(window["webpackJsonpd1-react"]=window["webpackJsonpd1-react"]||[]).push([[0],{222:function(e,t){},225:function(e,t,n){e.exports=n(494)},409:function(e,t){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},488:function(e,t,n){},490:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),s=n(39),c=n(9),l=n(3),d=n(6),u=n(1),m=n(4),h=n(2),p=n(5),g=n(200),f=(n(234),n(201)),v=new(n(202).Dispatcher),b=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).list=[],e.multipleList=[],e.instance=null,e.klass=null,e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"listModel",value:function(e){this.list=[],this.klass=e.klass;for(var t=0,n=e.data.length;t<n;++t)this.list.push(e.data[t]),t===n-1&&this.emit("got_list");0==e.data.length&&this.emit("got_list")}},{key:"listMultipleModel",value:function(e){console.log(e),this.multipleList=e.data,this.klass=e.klass,this.emit("got_multiple_list")}},{key:"showIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("got_instance")}},{key:"setIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("set_instance")}},{key:"deleteIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("deleted_instance")}},{key:"postFile",value:function(e){console.log(e),this.klass=e.klass,this.instance=e.data,this.emit("file_posted")}},{key:"getIntance",value:function(){return this.instance}},{key:"getList",value:function(){return this.list}},{key:"getMutipleList",value:function(){return this.multipleList}},{key:"getListnKlass",value:function(){return[this.list,this.klass]}},{key:"getKlass",value:function(){return this.klass}},{key:"handleActions",value:function(e){switch(e.type){case"LIST_MODEL_SUCCESS":this.listModel(e.list);break;case"MULTIPLE_LIST_MODEL_SUCCESS":this.listMultipleModel(e.list);break;case"GET_INSTANCE_SUCCESS":this.showIntance(e.instance);break;case"DELETE_INSTANCE_SUCCESS":this.deleteIntance(e.instance);break;case"SET_INSTANCE_SUCCESS":this.setIntance(e.instance);break;case"POST_FILE_SUCCESS":this.postFile(e.instance)}}}]),t}(f.EventEmitter));v.register(b.handleActions.bind(b));var w=b,y=n(40),k=n.n(y),S={server:"/v1",socketIOServer:"https://connect.ut.ac.ir/",socketServer:"wss://kaarafarinan.ir/ws",ionSignalServer:"wss://kaarafarinan.ir:7000/ws",janusServer:"https://kaarafarinan.ir:8089/janus"},E=S.server;function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(E+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){v.dispatch({type:"LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}function O(e,t,n,a){var r=E+"/"+e+"/"+t,i=new FormData;i.append("profile[avatar]",n),i.append("profile[id]",t);var o={headers:{"content-type":"multipart/form-data",Authorization:"bearer "+a}};Object(y.put)(r,i,o).then((function(e){v.dispatch({type:"POST_FILE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function C(e,t,n){k.a.get(E+"/"+e+"/"+t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"GET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function x(e,t,n){k.a.post(E+"/"+e+"/",t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function _(e,t,n){k.a.put(E+"/"+e+"/"+t.id,t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}var I=n(126),D=(n(497),I.initializeApp({apiKey:"AIzaSyAbQ1NDkKB_E_SbfgHY3w-esVWhjwj9DeE",authDomain:"tavan-e768d.firebaseapp.com",databaseURL:"https://tavan-e768d.firebaseio.com",projectId:"tavan-e768d",storageBucket:"tavan-e768d.appspot.com",messagingSenderId:"498708095861",appId:"1:498708095861:web:00428b1330b24e1eece93c",measurementId:"G-55DLXZ4VZY"}));I.messaging.isSupported()&&D.messaging().usePublicVapidKey("BGtSQdySGVQOeOwFha6rSVdmtfIUo_V33Eq-RTRb5kUNLvvwM7AVGCLtChjnGlD50fudRx8D4Aw-7br71Qfefrc");n(142);var T=n(22),R=n.n(T),A=n(133),M=window.RTCRtpTransceiver;U.sessions={},U.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||U.extension.isInstalled()}return!0};var P={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var a=new Error("NavigatorUserMediaError");a.name="You cancelled the request for permission, giving up...",n(a)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function U(e){if((e=e||{}).success="function"==typeof e.success?e.success:U.noop,e.error="function"==typeof e.error?e.error:U.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:U.noop,!U.initDone)return e.error("Library not initialized"),{};if(!U.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(U.log("Library initialized: "+U.initDone),!e.server)return e.error("Invalid server url"),{};var t=!1,n=null,a={},r=null,i=null,o=0,s=e.server;U.isArray(s)?(U.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,i=e.server,U.debug(i)):0===s.indexOf("ws")?(t=!0,U.log("Using WebSockets to contact Janus: "+s)):(t=!1,U.log("Using REST API to contact Janus: "+s));var c=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],l=e.iceTransportPolicy,d=e.bundlePolicy,u=!0===e.ipv6,m=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(m=!0===e.withCredentials);var h=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(h=e.max_poll_events),h<1&&(h=1);var p=null;void 0!==e.token&&null!==e.token&&(p=e.token);var g=null;void 0!==e.apisecret&&null!==e.apisecret&&(g=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var f=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(f=e.keepAlivePeriod),isNaN(f)&&(f=25e3);var v=6e4;function b(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);var w=!1,y=null,k={},S=this,E=0,j={};function O(){if(null!=y)if(U.debug("Long poll..."),w){var t=s+"/"+y+"?rid="+(new Date).getTime();h&&(t=t+"&maxev="+h),p&&(t=t+"&token="+encodeURIComponent(p)),g&&(t=t+"&apisecret="+encodeURIComponent(g)),U.httpAPICall(t,{verb:"GET",withCredentials:m,success:C,timeout:v,error:function(t,n){if(U.error(t+":",n),++E>3)return w=!1,void e.error("Lost connection to the server (is it down?)");O()}})}else U.warn("Is the server down? (connected=false)")}function C(e,a){if(E=0,t||void 0===y||null===y||!0===a||O(),t||!U.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){if(!(c=e.sender))return void U.warn("Missing sender...");if(!(d=k[c]))return void U.debug("This handle is not attached to this session");var r=e.candidate;U.debug("Got a trickled candidate on session "+y),U.debug(r);var i=d.webrtcStuff;i.pc&&i.remoteSdp?(U.debug("Adding remote candidate:",r),r&&!0!==r.completed?i.pc.addIceCandidate(r):i.pc.addIceCandidate(U.endOfCandidates)):(U.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),i.candidates||(i.candidates=[]),i.candidates.push(r),U.debug(i.candidates))}else{if("webrtcup"===e.janus)return U.debug("Got a webrtcup event on session "+y),U.debug(e),(c=e.sender)?(d=k[c])?void d.webrtcState(!0):void U.debug("This handle is not attached to this session"):void U.warn("Missing sender...");if("hangup"===e.janus){if(U.debug("Got a hangup event on session "+y),U.debug(e),!(c=e.sender))return void U.warn("Missing sender...");if(!(d=k[c]))return void U.debug("This handle is not attached to this session");d.webrtcState(!1,e.reason),d.hangup()}else if("detached"===e.janus){if(U.debug("Got a detached event on session "+y),U.debug(e),!(c=e.sender))return void U.warn("Missing sender...");if(!(d=k[c]))return;d.detached=!0,d.ondetached(),d.detach()}else if("media"===e.janus){if(U.debug("Got a media event on session "+y),U.debug(e),!(c=e.sender))return void U.warn("Missing sender...");if(!(d=k[c]))return void U.debug("This handle is not attached to this session");d.mediaState(e.type,e.receiving)}else if("slowlink"===e.janus){if(U.debug("Got a slowlink event on session "+y),U.debug(e),!(c=e.sender))return void U.warn("Missing sender...");if(!(d=k[c]))return void U.debug("This handle is not attached to this session");d.slowLink(e.uplink,e.lost)}else{if("error"===e.janus){var o,s;if(U.error("Ooops: "+e.error.code+" "+e.error.reason),U.debug(e),o=e.transaction)(s=j[o])&&s(e),delete j[o];return}if("event"===e.janus){var c;if(U.debug("Got a plugin event on session "+y),U.debug(e),!(c=e.sender))return void U.warn("Missing sender...");var l=e.plugindata;if(!l)return void U.warn("Missing plugindata...");U.debug("  -- Event is coming from "+c+" ("+l.plugin+")");var d,u=l.data;if(U.debug(u),!(d=k[c]))return void U.warn("This handle is not attached to this session");var m=e.jsep;m&&(U.debug("Handling SDP as well..."),U.debug(m));var h=d.onmessage;h?(U.debug("Notifying application..."),h(u,m)):U.debug("No provided notification callback")}else{if("timeout"===e.janus)return U.error("Timeout on session "+y),U.debug(e),void(t&&n.close(3504,"Gateway timeout"));U.warn("Unknown message/event  '"+e.janus+"' on session "+y),U.debug(e)}}}else U.debug("Got a success on session "+y),U.debug(e),(o=e.transaction)&&((s=j[o])&&s(e),delete j[o]);else U.debug("Got an ack on session "+y),U.debug(e),(o=e.transaction)&&((s=j[o])&&s(e),delete j[o]);else U.debug("Got info on the Janus instance"),U.debug(e),(o=e.transaction)&&((s=j[o])&&s(e),delete j[o]);else U.vdebug("Got a keepalive on session "+y);else for(var p=0;p<e.length;p++)C(e[p],!0)}function x(){if(s&&t&&w){r=setTimeout(x,f);var e={janus:"keepalive",session_id:y,transaction:U.randomString(12)};p&&(e.token=p),g&&(e.apisecret=g),n.send(JSON.stringify(e))}}function _(c){var l=U.randomString(12),d={janus:"create",transaction:l};if(c.reconnect&&(w=!1,d.janus="claim",d.session_id=y,n&&(n.onopen=null,n.onerror=null,n.onclose=null,r&&(clearTimeout(r),r=null))),p&&(d.token=p),g&&(d.apisecret=g),!s&&U.isArray(i)&&(0===(s=i[o]).indexOf("ws")?(t=!0,U.log("Server #"+(o+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,U.log("Server #"+(o+1)+": trying REST API to contact Janus ("+s+")"))),t)for(var u in n=U.newWebSocket(s,"janus-protocol"),a={error:function(){if(U.error("Error connecting to the Janus WebSockets server... "+s),U.isArray(i)&&!c.reconnect)return++o===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){_(c)}),200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){j[l]=function(e){if(U.debug(e),"success"!==e.janus)return U.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);r=setTimeout(x,f),w=!0,y=e.session_id?e.session_id:e.data.id,c.reconnect?U.log("Claimed session: "+y):U.log("Created session: "+y),U.sessions[y]=S,c.success()},n.send(JSON.stringify(d))},message:function(e){C(JSON.parse(e.data))},close:function(){s&&w&&(w=!1,e.error("Lost connection to the server (is it down?)"))}})n.addEventListener(u,a[u]);else U.httpAPICall(s,{verb:"POST",withCredentials:m,body:d,success:function(e){if(U.debug(e),"success"!==e.janus)return U.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);w=!0,y=e.session_id?e.session_id:e.data.id,c.reconnect?U.log("Claimed session: "+y):U.log("Created session: "+y),U.sessions[y]=S,O(),c.success()},error:function(e,t){if(U.error(e+":",t),U.isArray(i)&&!c.reconnect)return++o===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){_(c)}),200));""===t?c.error(e+": Is the server down?"):c.error(e+": "+t)}})}function I(e,a){if((a=a||{}).success="function"==typeof a.success?a.success:U.noop,a.error="function"==typeof a.error?a.error:U.noop,!w)return U.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var r=k[e];if(!r||!r.webrtcStuff)return U.warn("Invalid handle"),void a.error("Invalid handle");var i=a.message,o=a.jsep,c=U.randomString(12),l={janus:"message",body:i,transaction:c};if(r.token&&(l.token=r.token),g&&(l.apisecret=g),o&&(l.jsep={type:o.type,sdp:o.sdp},o.e2ee&&(l.jsep.e2ee=!0),"hml"!==o.rid_order&&"lmh"!==o.rid_order||(l.jsep.rid_order=o.rid_order)),U.debug("Sending message to plugin (handle="+e+"):"),U.debug(l),t)return l.session_id=y,l.handle_id=e,j[c]=function(e){if(U.debug("Message sent!"),U.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return U.warn("Request succeeded, but missing plugindata..."),void a.success();U.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return U.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(U.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(U.error("Unknown error"),a.error("Unknown error"))},void n.send(JSON.stringify(l));U.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:l,success:function(e){if(U.debug("Message sent!"),U.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return U.warn("Request succeeded, but missing plugindata..."),void a.success();U.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return U.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(U.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(U.error("Unknown error"),a.error("Unknown error"))},error:function(e,t){U.error(e+":",t),a.error(e+": "+t)}})}function D(e,a){if(w){var r=k[e];if(r&&r.webrtcStuff){var i={janus:"trickle",candidate:a,transaction:U.randomString(12)};if(r.token&&(i.token=r.token),g&&(i.apisecret=g),U.vdebug("Sending trickle candidate (handle="+e+"):"),U.vdebug(i),t)return i.session_id=y,i.handle_id=e,void n.send(JSON.stringify(i));U.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:i,success:function(e){U.vdebug("Candidate sent!"),U.vdebug(e),"ack"===e.janus||U.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){U.error(e+":",t)}})}else U.warn("Invalid handle")}else U.warn("Is the server down? (connected=false)")}function T(e,t,n,a,r){var i=k[e];if(i&&i.webrtcStuff){var o=i.webrtcStuff;if(o.pc){var s=function(e){U.log("Received state change on data channel:",e);var t=e.target.label,n=e.target.protocol,a=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(U.log("State change on <"+t+"> data channel: "+a),"open"===a){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){U.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length);var r=!0,s=!1,c=void 0;try{for(var l,d=o.dataChannel[t].pending[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var u=l.value;U.log("Sending data on data channel <"+t+">"),U.debug(u),o.dataChannel[t].send(u)}}catch(m){s=!0,c=m}finally{try{r||null==d.return||d.return()}finally{if(s)throw c}}o.dataChannel[t].pending=[]}i.ondataopen(t,n)}};if(a)o.dataChannel[t]=a;else{var c={ordered:!0};n&&(c.protocol=n),o.dataChannel[t]=o.pc.createDataChannel(t,c)}o.dataChannel[t].onmessage=function(e){U.log("Received message on data channel:",e);var t=e.target.label;i.ondata(e.data,t)},o.dataChannel[t].onopen=s,o.dataChannel[t].onclose=s,o.dataChannel[t].onerror=function(e){U.error("Got error on data channel:",e)},o.dataChannel[t].pending=[],r&&o.dataChannel[t].pending.push(r)}else U.warn("Invalid PeerConnection")}else U.warn("Invalid handle")}function R(e,t){(t=t||{}).success="function"==typeof t.success?t.success:U.noop,t.error="function"==typeof t.error?t.error:U.noop;var n=k[e];if(!n||!n.webrtcStuff)return U.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff,r=t.text||t.data;if(!r)return U.warn("Invalid data"),void t.error("Invalid data");var i=t.label?t.label:U.dataChanDefaultLabel;return a.dataChannel[i]?"open"!==a.dataChannel[i].readyState?(a.dataChannel[i].pending.push(r),void t.success()):(U.log("Sending data on data channel <"+i+">"),U.debug(r),a.dataChannel[i].send(r),void t.success()):(T(e,i,t.protocol,!1,r,t.protocol),void t.success())}function A(e,t){(t=t||{}).success="function"==typeof t.success?t.success:U.noop,t.error="function"==typeof t.error?t.error:U.noop;var n=k[e];if(!n||!n.webrtcStuff)return U.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff;if(!a.dtmfSender){if(a.pc){var r=a.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return U.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");a.dtmfSender=r.dtmf,a.dtmfSender&&(U.log("Created DTMF Sender"),a.dtmfSender.ontonechange=function(e){U.debug("Sent DTMF tone: "+e.tone)})}if(!a.dtmfSender)return U.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var i=t.dtmf;if(!i)return U.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var o=i.tones;if(!o)return U.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var s="number"===typeof i.duration?i.duration:500,c="number"===typeof i.gap?i.gap:50;U.debug("Sending DTMF string "+o+" (duration "+s+"ms, gap "+c+"ms)"),a.dtmfSender.insertDTMF(o,s,c),t.success()}function M(e,a){(a=a||{}).success="function"==typeof a.success?a.success:U.noop,a.error="function"==typeof a.error?a.error:U.noop;var r=!0===a.noRequest;U.log("Destroying handle "+e+" (only-locally="+r+")"),F(e);var i=k[e];if(!i||i.detached)return delete k[e],void a.success();if(r)return delete k[e],void a.success();if(!w)return U.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var o={janus:"detach",transaction:U.randomString(12)};if(i.token&&(o.token=i.token),g&&(o.apisecret=g),t)return o.session_id=y,o.handle_id=e,n.send(JSON.stringify(o)),delete k[e],void a.success();U.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:o,success:function(t){U.log("Destroyed handle:"),U.debug(t),"success"!==t.janus&&U.error("Ooops: "+t.error.code+" "+t.error.reason),delete k[e],a.success()},error:function(t,n){U.error(t+":",n),delete k[e],a.success()}})}function P(e,t,n,a,r){var i=k[e];if(!i||!i.webrtcStuff)return U.warn("Invalid handle"),a.stream||U.stopAllTracks(r),void a.error("Invalid handle");var o=i.webrtcStuff;U.debug("streamsDone:",r),r&&(U.debug("  -- Audio tracks:",r.getAudioTracks()),U.debug("  -- Video tracks:",r.getVideoTracks()));var s=!1;if(o.myStream&&n.update&&!o.streamExternal){if((!n.update&&H(n)||n.update&&(n.addAudio||n.replaceAudio))&&r.getAudioTracks()&&r.getAudioTracks().length)if(o.myStream.addTrack(r.getAudioTracks()[0]),U.unifiedPlan){U.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]);var m=null;if((w=o.pc.getTransceivers())&&w.length>0){var h=!0,p=!1,g=void 0;try{for(var f,v=w[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){if((x=f.value).sender&&x.sender.track&&"audio"===x.sender.track.kind||x.receiver&&x.receiver.track&&"audio"===x.receiver.track.kind){m=x;break}}}catch(M){p=!0,g=M}finally{try{h||null==v.return||v.return()}finally{if(p)throw g}}}m&&m.sender?m.sender.replaceTrack(r.getAudioTracks()[0]):o.pc.addTrack(r.getAudioTracks()[0],r)}else U.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]),o.pc.addTrack(r.getAudioTracks()[0],r);if((!n.update&&J(n)||n.update&&(n.addVideo||n.replaceVideo))&&r.getVideoTracks()&&r.getVideoTracks().length)if(o.myStream.addTrack(r.getVideoTracks()[0]),U.unifiedPlan){U.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]);var w,y=null;if((w=o.pc.getTransceivers())&&w.length>0){var S=!0,E=!1,j=void 0;try{for(var O,C=w[Symbol.iterator]();!(S=(O=C.next()).done);S=!0){var x;if((x=O.value).sender&&x.sender.track&&"video"===x.sender.track.kind||x.receiver&&x.receiver.track&&"video"===x.receiver.track.kind){y=x;break}}}catch(M){E=!0,j=M}finally{try{S||null==C.return||C.return()}finally{if(E)throw j}}}y&&y.sender?y.sender.replaceTrack(r.getVideoTracks()[0]):o.pc.addTrack(r.getVideoTracks()[0],r)}else U.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]),o.pc.addTrack(r.getVideoTracks()[0],r)}else o.myStream=r,s=!0;if(!o.pc){var _={iceServers:c,iceTransportPolicy:l,bundlePolicy:d};"chrome"===U.webRTCAdapter.browserDetails.browser&&(_.sdpSemantics=U.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var I={optional:[{DtlsSrtpKeyAgreement:!0}]};if(u&&I.optional.push({googIPv6:!0}),a.rtcConstraints&&"object"===typeof a.rtcConstraints)for(var R in U.debug("Adding custom PeerConnection constraints:",a.rtcConstraints),a.rtcConstraints)I.optional.push(a.rtcConstraints[R]);"edge"===U.webRTCAdapter.browserDetails.browser&&(_.bundlePolicy="max-bundle"),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&(a.senderTransforms||a.receiverTransforms)&&(o.senderTransforms=a.senderTransforms,o.receiverTransforms=a.receiverTransforms,_.forceEncodedAudioInsertableStreams=!0,_.forceEncodedVideoInsertableStreams=!0,_.encodedInsertableStreams=!0),U.log("Creating PeerConnection"),U.debug(I),o.pc=new RTCPeerConnection(_,I),U.debug(o.pc),o.pc.getStats&&(o.volume={},o.bitrate.value="0 kbits/sec"),U.log("Preparing local SDP and gathering candidates (trickle="+o.trickle+")"),o.pc.oniceconnectionstatechange=function(e){o.pc&&i.iceState(o.pc.iceConnectionState)},o.pc.onicecandidate=function(t){if(!t.candidate||"edge"===U.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)U.log("End of candidates."),o.iceDone=!0,!0===o.trickle?D(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:U.noop,t.error="function"==typeof t.error?t.error:U.noop;var n=k[e];if(!n||!n.webrtcStuff)return void U.warn("Invalid handle, not sending anything");var a=n.webrtcStuff;if(U.log("Sending offer/answer SDP..."),!a.mySdp)return void U.warn("Local SDP instance is invalid, not sending anything...");a.mySdp={type:a.pc.localDescription.type,sdp:a.pc.localDescription.sdp},!1===a.trickle&&(a.mySdp.trickle=!1);U.debug(t),a.sdpSent=!0,t.success(a.mySdp)}(e,a);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===o.trickle&&D(e,n)}},o.pc.ontrack=function(e){if(U.log("Handling Remote Track"),U.debug(e),e.streams&&(o.remoteStream=e.streams[0],i.onremotestream(o.remoteStream),!e.track.onended)){if(o.receiverTransforms){var t=null;RTCRtpSender.prototype.createEncodedStreams?t=e.receiver.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===e.track.kind&&o.receiverTransforms.audio?t=e.receiver.createEncodedAudioStreams():"video"===e.track.kind&&o.receiverTransforms.video&&(t=e.receiver.createEncodedVideoStreams())),t&&(console.log(t),t.readableStream&&t.writableStream?t.readableStream.pipeThrough(o.receiverTransforms[e.track.kind]).pipeTo(t.writableStream):t.readable&&t.writable&&t.readable.pipeThrough(o.receiverTransforms[e.track.kind]).pipeTo(t.writable))}var n=null;U.log("Adding onended callback to track:",e.track),e.track.onended=function(e){U.log("Remote track removed:",e),o.remoteStream&&(clearTimeout(n),o.remoteStream.removeTrack(e.target),i.onremotestream(o.remoteStream))},e.track.onmute=function(e){U.log("Remote track muted:",e),o.remoteStream&&null==n&&(n=setTimeout((function(){U.log("Removing remote track"),o.remoteStream&&(o.remoteStream.removeTrack(e.target),i.onremotestream(o.remoteStream)),n=null}),2520))},e.track.onunmute=function(e){if(U.log("Remote track flowing again:",e),null!=n)clearTimeout(n),n=null;else try{o.remoteStream.addTrack(e.target),i.onremotestream(o.remoteStream)}catch(t){U.error(t)}}}}}if(s&&r){U.log("Adding local stream");var A=!0===a.simulcast2;r.getTracks().forEach((function(e){U.log("Adding local track:",e);var t=null;if(A&&"audio"!==e.kind){U.log("Enabling rid-based simulcasting:",e);var n=b(a.simulcastMaxBitrates),i=o.pc.addTransceiver(e,{direction:"sendrecv",streams:[r],sendEncodings:a.sendEncodings||[{rid:"h",active:!0,maxBitrate:n.high},{rid:"m",active:!0,maxBitrate:n.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:n.low,scaleResolutionDownBy:4}]});i&&(t=i.sender)}else t=o.pc.addTrack(e,r);if(t&&o.senderTransforms){var s=null;RTCRtpSender.prototype.createEncodedStreams?s=t.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===t.track.kind&&o.senderTransforms.audio?s=t.createEncodedAudioStreams():"video"===t.track.kind&&o.senderTransforms.video&&(s=t.createEncodedVideoStreams())),s&&(console.log(s),s.readableStream&&s.writableStream?s.readableStream.pipeThrough(o.senderTransforms[t.track.kind]).pipeTo(s.writableStream):s.readable&&s.writable&&s.readable.pipeThrough(o.senderTransforms[t.track.kind]).pipeTo(s.writable))}}))}(function(e){if(U.debug("isDataEnabled:",e),"edge"===U.webRTCAdapter.browserDetails.browser)return U.warn("Edge doesn't support data channels yet"),!1;return void 0!==e&&null!==e&&!0===e.data})(n)&&!o.dataChannel[U.dataChanDefaultLabel]&&(U.log("Creating default data channel"),T(e,U.dataChanDefaultLabel,null,!1),o.pc.ondatachannel=function(t){U.log("Data channel created by Janus:",t),T(e,t.channel.label,t.channel.protocol,t.channel)}),o.myStream&&i.onlocalstream(o.myStream),t?o.pc.setRemoteDescription(t).then((function(){if(U.log("Remote description accepted!"),o.remoteSdp=t.sdp,o.candidates&&o.candidates.length>0){for(var r=0;r<o.candidates.length;r++){var i=o.candidates[r];U.debug("Adding remote candidate:",i),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate(U.endOfCandidates)}o.candidates=[]}!function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:U.noop,n.error="function"==typeof n.error?n.error:U.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:U.noop;var a=k[e];if(!a||!a.webrtcStuff)return U.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,i=!0===n.simulcast;i?U.log("Creating answer (iceDone="+r.iceDone+", simulcast="+i+")"):U.log("Creating answer (iceDone="+r.iceDone+")");var o=null;if(U.unifiedPlan){o={};var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var h,p=l[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var g=h.value;g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind?s||(s=g):(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind)&&(c||(c=g))}}catch(M){u=!0,m=M}finally{try{d||null==p.return||p.return()}finally{if(u)throw m}}}var f=H(t),v=q(t);if(f||v){if(f&&v){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",U.log("Setting audio transceiver to sendrecv:",s)}catch(C){U.error(C)}}else if(f&&!v)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",U.log("Setting audio transceiver to sendonly:",s))}catch(C){U.error(C)}else if(!f&&v)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",U.log("Setting audio transceiver to recvonly:",s)}catch(C){U.error(C)}else s=r.pc.addTransceiver("audio",{direction:"recvonly"}),U.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",U.log("Setting audio transceiver to inactive:",s)}catch(C){U.error(C)}var w=J(t),y=G(t);if(w||y){if(w&&y){if(c)try{c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",U.log("Setting video transceiver to sendrecv:",c)}catch(C){U.error(C)}}else if(w&&!y){if(c)try{c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",U.log("Setting video transceiver to sendonly:",c)}catch(C){U.error(C)}}else if(!w&&y)if(c)try{c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",U.log("Setting video transceiver to recvonly:",c)}catch(C){U.error(C)}else c=r.pc.addTransceiver("video",{direction:"recvonly"}),U.log("Adding recvonly video transceiver:",c)}else if(t.removeVideo&&c)try{c.setDirection?c.setDirection("inactive"):c.direction="inactive",U.log("Setting video transceiver to inactive:",c)}catch(C){U.error(C)}}else o="firefox"===U.webRTCAdapter.browserDetails.browser||"edge"===U.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:q(t),offerToReceiveVideo:G(t)}:{mandatory:{OfferToReceiveAudio:q(t),OfferToReceiveVideo:G(t)}};U.debug(o);var S=J(t);if(S&&i&&"firefox"===U.webRTCAdapter.browserDetails.browser){U.log("Enabling Simulcasting for Firefox (RID)");var E=r.pc.getSenders()[1];U.log(E);var j=E.getParameters();U.log(j);var O=b(n.simulcastMaxBitrates);E.setParameters({encodings:n.sendEncodings||[{rid:"h",active:!0,maxBitrate:O.high},{rid:"m",active:!0,maxBitrate:O.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:O.low,scaleResolutionDownBy:4}]})}r.pc.createAnswer(o).then((function(e){U.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,U.log("Setting local description"),S&&i&&("chrome"===U.webRTCAdapter.browserDetails.browser?U.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==U.webRTCAdapter.browserDetails.browser&&U.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=o,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):U.log("Waiting for all candidates...")}),n.error)}(e,n,a)}),a.error):function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:U.noop,n.error="function"==typeof n.error?n.error:U.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:U.noop;var a=k[e];if(!a||!a.webrtcStuff)return U.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,i=!0===n.simulcast;i?U.log("Creating offer (iceDone="+r.iceDone+", simulcast="+i+")"):U.log("Creating offer (iceDone="+r.iceDone+")");var o={};if(U.unifiedPlan){var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var h,p=l[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var g=h.value;g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind?s||(s=g):(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind)&&(c||(c=g))}}catch(M){u=!0,m=M}finally{try{d||null==p.return||p.return()}finally{if(u)throw m}}}var f=H(t),v=q(t);f||v?f&&v?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",U.log("Setting audio transceiver to sendrecv:",s)):f&&!v?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",U.log("Setting audio transceiver to sendonly:",s)):!f&&v&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",U.log("Setting audio transceiver to recvonly:",s)):(s=r.pc.addTransceiver("audio",{direction:"recvonly"}),U.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",U.log("Setting audio transceiver to inactive:",s));var w=J(t),y=G(t);w||y?w&&y?c&&(c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",U.log("Setting video transceiver to sendrecv:",c)):w&&!y?c&&(c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",U.log("Setting video transceiver to sendonly:",c)):!w&&y&&(c?(c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",U.log("Setting video transceiver to recvonly:",c)):(c=r.pc.addTransceiver("video",{direction:"recvonly"}),U.log("Adding recvonly video transceiver:",c))):t.removeVideo&&c&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive",U.log("Setting video transceiver to inactive:",c))}else o.offerToReceiveAudio=q(t),o.offerToReceiveVideo=G(t);!0===n.iceRestart&&(o.iceRestart=!0);U.debug(o);var S=J(t);if(S&&i&&"firefox"===U.webRTCAdapter.browserDetails.browser){U.log("Enabling Simulcasting for Firefox (RID)");var E=r.pc.getSenders().find((function(e){return"video"===e.track.kind}));if(E){var j=E.getParameters();j||(j={});var O=b(n.simulcastMaxBitrates);j.encodings=n.sendEncodings||[{rid:"h",active:!0,maxBitrate:O.high},{rid:"m",active:!0,maxBitrate:O.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:O.low,scaleResolutionDownBy:4}],E.setParameters(j)}}r.pc.createOffer(o).then((function(e){U.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,U.log("Setting local description"),S&&i&&("chrome"===U.webRTCAdapter.browserDetails.browser||"safari"===U.webRTCAdapter.browserDetails.browser?(U.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=function(e){for(var t=e.split("\r\n"),n=!1,a=[-1],r=[-1],i=null,o=null,s=null,c=null,l=-1,d=0;d<t.length;d++){if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){var u=t[d].match(/a=ssrc-group:FID (\d+) (\d+)/);if(u)a[0]=u[1],r[0]=u[2],t.splice(d,1),d--;else{if(a[0]){if((p=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(i=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(o=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=p[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!=t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0){l=-1,n=!1;for(d=0;d<t.length;d++){var m;if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){if(a[0]<0){var h=t[d].match(/a=ssrc:(\d+)/);if(h){a[0]=h[1],t.splice(d,1),d--;continue}}else{var p;if((p=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(i=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(o=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=p[1]),(p=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=p[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!==t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0)return U.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;l<0&&(l=t.length);a[1]=Math.floor(4294967295*Math.random()),a[2]=Math.floor(4294967295*Math.random()),r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random());for(d=0;d<a.length;d++)i&&(t.splice(l,0,"a=ssrc:"+a[d]+" cname:"+i),l++),o&&(t.splice(l,0,"a=ssrc:"+a[d]+" msid:"+o),l++),s&&(t.splice(l,0,"a=ssrc:"+a[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+a[d]+" label:"+c),l++),i&&(t.splice(l,0,"a=ssrc:"+r[d]+" cname:"+i),l++),o&&(t.splice(l,0,"a=ssrc:"+r[d]+" msid:"+o),l++),s&&(t.splice(l,0,"a=ssrc:"+r[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+r[d]+" label:"+c),l++);t.splice(l,0,"a=ssrc-group:FID "+a[2]+" "+r[2]),t.splice(l,0,"a=ssrc-group:FID "+a[1]+" "+r[1]),t.splice(l,0,"a=ssrc-group:FID "+a[0]+" "+r[0]),t.splice(l,0,"a=ssrc-group:SIM "+a[0]+" "+a[1]+" "+a[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e}(e.sdp)):"firefox"!==U.webRTCAdapter.browserDetails.browser&&U.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=o,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):U.log("Waiting for all candidates...")}),n.error)}(e,n,a)}function V(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:U.noop,n.error="function"==typeof n.error?n.error:z;var a=n.jsep;if(t&&a)return U.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!a||!a.type||!a.sdp))return U.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media="object"===typeof n.media&&n.media?n.media:{audio:!0,video:!0};var r=n.media,i=k[e];if(!i||!i.webrtcStuff)return U.warn("Invalid handle"),void n.error("Invalid handle");var o,s=i.webrtcStuff;if(s.trickle=(o=n.trickle,U.debug("isTrickleEnabled:",o),!1!==o),s.pc){if(U.log("Updating existing media session"),r.update=!0,n.stream)n.stream!==s.myStream&&U.log("Renegotiation involves a new external stream");else{if(r.addAudio){if(r.keepAudio=!1,r.replaceAudio=!1,r.removeAudio=!1,r.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return U.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else r.removeAudio?(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!1,r.audioSend=!1):r.replaceAudio&&(r.keepAudio=!1,r.addAudio=!1,r.removeAudio=!1,r.audioSend=!0);if(s.myStream&&s.myStream.getAudioTracks()&&0!==s.myStream.getAudioTracks().length?!H(r)||r.removeAudio||r.replaceAudio||(r.keepAudio=!0):(r.replaceAudio&&(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!0,r.audioSend=!0),H(r)&&(r.keepAudio=!1,r.addAudio=!0)),r.addVideo){if(r.keepVideo=!1,r.replaceVideo=!1,r.removeVideo=!1,r.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return U.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else r.removeVideo?(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!1,r.videoSend=!1):r.replaceVideo&&(r.keepVideo=!1,r.addVideo=!1,r.removeVideo=!1,r.videoSend=!0);s.myStream&&s.myStream.getVideoTracks()&&0!==s.myStream.getVideoTracks().length?!J(r)||r.removeVideo||r.replaceVideo||(r.keepVideo=!0):(r.replaceVideo&&(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!0,r.videoSend=!0),J(r)&&(r.keepVideo=!1,r.addVideo=!0)),r.addData&&(r.data=!0)}if(H(r)&&r.keepAudio&&J(r)&&r.keepVideo)return i.consentDialog(!1),void P(e,a,r,n,s.myStream)}else r.update=!1,r.keepAudio=!1,r.keepVideo=!1;if(r.update&&!s.streamExternal){if(r.removeAudio||r.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var c=s.myStream.getAudioTracks()[0];U.log("Removing audio track:",c),s.myStream.removeTrack(c);try{c.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var l=!0;if(r.replaceAudio&&U.unifiedPlan&&(l=!1),l){var d=!0,u=!1,m=void 0;try{for(var h,p=s.pc.getSenders()[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var g=h.value;g&&g.track&&"audio"===g.track.kind&&(U.log("Removing audio sender:",g),s.pc.removeTrack(g))}}catch(B){u=!0,m=B}finally{try{d||null==p.return||p.return()}finally{if(u)throw m}}}}}if(r.removeVideo||r.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){var f=s.myStream.getVideoTracks()[0];U.log("Removing video track:",f),s.myStream.removeTrack(f);try{f.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var v=!0;if(r.replaceVideo&&U.unifiedPlan&&(v=!1),v){var b=!0,w=!1,y=void 0;try{for(var S,E=s.pc.getSenders()[Symbol.iterator]();!(b=(S=E.next()).done);b=!0){var j=S.value;j&&j.track&&"video"===j.track.kind&&(U.log("Removing video sender:",j),s.pc.removeTrack(j))}}catch(B){w=!0,y=B}finally{try{b||null==E.return||E.return()}finally{if(w)throw y}}}}}}if(n.stream){var O=n.stream;return U.log("MediaStream provided by the application"),U.debug(O),r.update&&s.myStream&&s.myStream!==n.stream&&!s.streamExternal&&(U.stopAllTracks(s.myStream),s.myStream=null),s.streamExternal=!0,i.consentDialog(!1),void P(e,a,r,n,O)}if(H(r)||J(r)){if(!U.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var C={mandatory:{},optional:[]};i.consentDialog(!0);var x=H(r);x&&r&&"object"===typeof r.audio&&(x=r.audio);var _=J(r);if(_&&r){var I=!0===n.simulcast,D=!0===n.simulcast2;if(!I&&!D||a||r.video||(r.video="hires"),r.video&&"screen"!=r.video&&"window"!=r.video)if("object"===typeof r.video)_=r.video;else{var T=0,R=0;"lowres"===r.video?(R=240,240,T=320):"lowres-16:9"===r.video?(R=180,180,T=320):"hires"===r.video||"hires-16:9"===r.video||"hdres"===r.video?(R=720,720,T=1280):"fhdres"===r.video?(R=1080,1080,T=1920):"4kres"===r.video?(R=2160,2160,T=3840):"stdres"===r.video?(R=480,480,T=640):"stdres-16:9"===r.video?(R=360,360,T=640):(U.log("Default video setting is stdres 4:3"),R=480,480,T=640),U.log("Adding media constraint:",r.video),_={height:{ideal:R},width:{ideal:T}},U.log("Adding video constraint:",_)}else if("screen"===r.video||"window"===r.video){var A=function(t,o){i.consentDialog(!1),t?n.error(t):P(e,a,r,n,o)},M=function(e,t,n){U.log("Adding media constraint (screen capture)"),U.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){i.consentDialog(!1),t(e)}))};if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return C.video={},r.screenshareFrameRate&&(C.video.frameRate=r.screenshareFrameRate),r.screenshareHeight&&(C.video.height=r.screenshareHeight),r.screenshareWidth&&(C.video.width=r.screenshareWidth),C.audio=r.captureDesktopAudio,void navigator.mediaDevices.getDisplayMedia(C).then((function(t){i.consentDialog(!1),H(r)&&!r.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(i){t.addTrack(i.getAudioTracks()[0]),P(e,a,r,n,t)})):P(e,a,r,n,t)}),(function(e){i.consentDialog(!1),n.error(e)}));if("chrome"===U.webRTCAdapter.browserDetails.browser){var V=U.webRTCAdapter.browserDetails.version,L=33;window.navigator.userAgent.match("Linux")&&(L=35),V>=26&&V<=L?(C={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate,chromeMediaSource:"screen"}},audio:H(r)&&!r.keepAudio},M(C,A)):U.extension.getScreen((function(e,t){if(e)return i.consentDialog(!1),n.error(e);(C={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=t,M(C,A,H(r)&&!r.keepAudio)}))}else if("firefox"===U.webRTCAdapter.browserDetails.browser){if(!(U.webRTCAdapter.browserDetails.version>=33)){var N=new Error("NavigatorUserMediaError");return N.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",i.consentDialog(!1),void n.error(N)}C={video:{mozMediaSource:r.video,mediaSource:r.video},audio:H(r)&&!r.keepAudio},M(C,(function(e,t){if(A(e,t),!e)var n=t.currentTime,a=window.setInterval((function(){t||window.clearInterval(a),t.currentTime==n&&(window.clearInterval(a),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}r&&"screen"===r.video||navigator.mediaDevices.enumerateDevices().then((function(t){var o=t.some((function(e){return"audioinput"===e.kind})),s=function(e){if(U.debug("isScreenSendEnabled:",e),!e)return!1;if("object"!==typeof e.video||"object"!==typeof e.video.mandatory)return!1;var t=e.video.mandatory;if(t.chromeMediaSource)return"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource;if(t.mozMediaSource)return"window"===t.mozMediaSource||"screen"===t.mozMediaSource;if(t.mediaSource)return"window"===t.mediaSource||"screen"===t.mediaSource;return!1}(r)||t.some((function(e){return"videoinput"===e.kind})),c=H(r),l=J(r),d=function(e){return U.debug("isAudioSendRequired:",e),!!e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}(r),u=function(e){return U.debug("isVideoSendRequired:",e),!!e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}(r);if(c||l||d||u){var m=!!c&&o,h=!!l&&s;if(!m&&!h)return i.consentDialog(!1),n.error("No capture device found"),!1;if(!m&&d)return i.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!h&&u)return i.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var p={audio:!(!o||r.keepAudio)&&x,video:!(!s||r.keepVideo)&&_};U.debug("getUserMedia constraints",p),p.audio||p.video?navigator.mediaDevices.getUserMedia(p).then((function(t){i.consentDialog(!1),P(e,a,r,n,t)})).catch((function(e){i.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(i.consentDialog(!1),P(e,a,r,n,O))})).catch((function(e){i.consentDialog(!1),n.error(e)}))}else P(e,a,r,n)}function L(e,t){(t=t||{}).success="function"==typeof t.success?t.success:U.noop,t.error="function"==typeof t.error?t.error:z;var n=t.jsep,a=k[e];if(!a||!a.webrtcStuff)return U.warn("Invalid handle"),void t.error("Invalid handle");var r=a.webrtcStuff;if(n){if(!r.pc)return U.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.pc.setRemoteDescription(n).then((function(){if(U.log("Remote description accepted!"),r.remoteSdp=n.sdp,r.candidates&&r.candidates.length>0){for(var e=0;e<r.candidates.length;e++){var a=r.candidates[e];U.debug("Adding remote candidate:",a),a&&!0!==a.completed?r.pc.addIceCandidate(a):r.pc.addIceCandidate(U.endOfCandidates)}r.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function N(e,t){var n=k[e];if(!n||!n.webrtcStuff)return U.warn("Invalid handle"),0;var a=t?"remote":"local",r=n.webrtcStuff;return r.volume[a]||(r.volume[a]={value:0}),!r.pc.getStats||"chrome"!==U.webRTCAdapter.browserDetails.browser&&"safari"!==U.webRTCAdapter.browserDetails.browser?(U.warn("Getting the "+a+" volume unsupported by browser"),0):t&&!r.remoteStream?(U.warn("Remote stream unavailable"),0):t||r.myStream?r.volume[a].timer?r.volume[a].value:(U.log("Starting "+a+" volume monitor"),r.volume[a].timer=setInterval((function(){r.pc.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(t&&!e.remoteSource||!t&&"media-source"!==e.type||(r.volume[a].value=e.audioLevel?e.audioLevel:0))}))}))}),200),0):(U.warn("Local stream unavailable"),0)}function $(e,t){var n=k[e];if(!n||!n.webrtcStuff)return U.warn("Invalid handle"),!0;var a=n.webrtcStuff;return a.pc?a.myStream?t?a.myStream.getVideoTracks()&&0!==a.myStream.getVideoTracks().length?!a.myStream.getVideoTracks()[0].enabled:(U.warn("No video track"),!0):a.myStream.getAudioTracks()&&0!==a.myStream.getAudioTracks().length?!a.myStream.getAudioTracks()[0].enabled:(U.warn("No audio track"),!0):(U.warn("Invalid local MediaStream"),!0):(U.warn("Invalid PeerConnection"),!0)}function B(e,t,n){var a=k[e];if(!a||!a.webrtcStuff)return U.warn("Invalid handle"),!1;var r=a.webrtcStuff;return r.pc?r.myStream?t?r.myStream.getVideoTracks()&&0!==r.myStream.getVideoTracks().length?(r.myStream.getVideoTracks()[0].enabled=!n,!0):(U.warn("No video track"),!1):r.myStream.getAudioTracks()&&0!==r.myStream.getAudioTracks().length?(r.myStream.getAudioTracks()[0].enabled=!n,!0):(U.warn("No audio track"),!1):(U.warn("Invalid local MediaStream"),!1):(U.warn("Invalid PeerConnection"),!1)}function W(e){var t=k[e];if(!t||!t.webrtcStuff)return U.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return n.pc?n.pc.getStats?n.bitrate.timer?n.bitrate.value:(U.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var a=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"===U.webRTCAdapter.browserDetails.browser&&(a/=1e3);var r=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/a);"safari"===U.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),n.bitrate.value=r+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):(U.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"):"Invalid PeerConnection"}function z(e){U.error("WebRTC error:",e)}function F(e,a){U.log("Cleaning WebRTC stuff");var r=k[e];if(r){var i=r.webrtcStuff;if(i){if(!0===a){var o={janus:"hangup",transaction:U.randomString(12)};r.token&&(o.token=r.token),g&&(o.apisecret=g),U.debug("Sending hangup request (handle="+e+"):"),U.debug(o),t?(o.session_id=y,o.handle_id=e,n.send(JSON.stringify(o))):U.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:o})}i.remoteStream=null,i.volume&&(i.volume.local&&i.volume.local.timer&&clearInterval(i.volume.local.timer),i.volume.remote&&i.volume.remote.timer&&clearInterval(i.volume.remote.timer)),i.volume={},i.bitrate.timer&&clearInterval(i.bitrate.timer),i.bitrate.timer=null,i.bitrate.bsnow=null,i.bitrate.bsbefore=null,i.bitrate.tsnow=null,i.bitrate.tsbefore=null,i.bitrate.value=null,!i.streamExternal&&i.myStream&&(U.log("Stopping local stream tracks"),U.stopAllTracks(i.myStream)),i.streamExternal=!1,i.myStream=null;try{i.pc.close()}catch(c){}i.pc=null,i.candidates=null,i.mySdp=null,i.remoteSdp=null,i.iceDone=!1,i.dataChannel={},i.dtmfSender=null,i.senderTransforms=null,i.receiverTransforms=null}r.oncleanup()}}function H(e){return U.debug("isAudioSendEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function q(e){return U.debug("isAudioRecvEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function J(e){return U.debug("isVideoSendEnabled:",e),!e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function G(e){return U.debug("isVideoRecvEnabled:",e),!e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}_(e),this.getServer=function(){return s},this.isConnected=function(){return w},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:U.noop,e.error="function"==typeof e.error?e.error:U.noop,e.reconnect=!0,_(e)},this.getSessionId=function(){return y},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:U.noop,e.error="function"==typeof e.error?e.error:U.noop,U.log("Getting info on Janus instance"),!w)return U.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=U.randomString(12),r={janus:"info",transaction:a};p&&(r.token=p);g&&(r.apisecret=g);if(t)return j[a]=function(t){U.log("Server info:"),U.debug(t),"server_info"!==t.janus&&U.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},void n.send(JSON.stringify(r));U.httpAPICall(s,{verb:"POST",withCredentials:m,body:r,success:function(t){U.log("Server info:"),U.debug(t),"server_info"!==t.janus&&U.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){U.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(i){!function(i){(i=i||{}).success="function"==typeof i.success?i.success:U.noop,i.error="function"==typeof i.error?i.error:U.noop;var o=!0===i.unload,c=!0;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(c=!0===i.notifyDestroyed);var l=!0===i.cleanupHandles;if(U.log("Destroying session "+y+" (unload="+o+")"),!y)return U.warn("No session to destroy"),i.success(),void(c&&e.destroyed());if(l)for(var d in k)M(d,{noRequest:!0});if(!w)return U.warn("Is the server down? (connected=false)"),y=null,void i.success();var u={janus:"destroy",transaction:U.randomString(12)};p&&(u.token=p);g&&(u.apisecret=g);if(o)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(s+"/"+y,JSON.stringify(u)),U.log("Destroyed session:"),y=null,w=!1,i.success(),void(c&&e.destroyed());if(t){u.session_id=y;var h=function(){for(var e in a)n.removeEventListener(e,a[e]);n.removeEventListener("message",f),n.removeEventListener("error",v),r&&clearTimeout(r),n.close()},f=function(t){var n=JSON.parse(t.data);n.session_id==u.session_id&&n.transaction==u.transaction&&(h(),i.success(),c&&e.destroyed())},v=function(t){h(),i.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",f),n.addEventListener("error",v),void(1===n.readyState?n.send(JSON.stringify(u)):v())}U.httpAPICall(s+"/"+y,{verb:"POST",withCredentials:m,body:u,success:function(t){U.log("Destroyed session:"),U.debug(t),y=null,w=!1,"success"!==t.janus&&U.error("Ooops: "+t.error.code+" "+t.error.reason),i.success(),c&&e.destroyed()},error:function(t,n){U.error(t+":",n),y=null,w=!1,i.success(),c&&e.destroyed()}})}(i)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:U.noop,e.error="function"==typeof e.error?e.error:U.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:U.noop,e.iceState="function"==typeof e.iceState?e.iceState:U.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:U.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:U.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:U.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:U.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:U.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:U.noop,e.ondata="function"==typeof e.ondata?e.ondata:U.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:U.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:U.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:U.noop,!w)return U.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=e.plugin;if(!a)return U.error("Invalid plugin"),void e.error("Invalid plugin");var r=e.opaqueId,i=e.token?e.token:p,o=U.randomString(12),c={janus:"attach",plugin:a,opaque_id:r,transaction:o};i&&(c.token=i);g&&(c.apisecret=g);if(t)return j[o]=function(t){if(U.debug(t),"success"!==t.janus)return U.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;U.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:i,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return B(n,!1,!0)},unmuteAudio:function(){return B(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return B(n,!0,!0)},unmuteVideo:function(){return B(n,!0,!1)},getBitrate:function(){return W(n)},send:function(e){I(n,e)},data:function(e){R(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(n,!0,e)},createAnswer:function(e){V(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){F(n,!0===e)},detach:function(e){M(n,e)}};k[n]=r,e.success(r)},c.session_id=y,void n.send(JSON.stringify(c));U.httpAPICall(s+"/"+y,{verb:"POST",withCredentials:m,body:c,success:function(t){if(U.debug(t),"success"!==t.janus)return U.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;U.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:i,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return B(n,!1,!0)},unmuteAudio:function(){return B(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return B(n,!0,!0)},unmuteVideo:function(){return B(n,!0,!1)},getBitrate:function(){return W(n)},send:function(e){I(n,e)},data:function(e){R(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(n,!0,e)},createAnswer:function(e){V(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){F(n,!0===e)},detach:function(e){M(n,e)}};k[n]=r,e.success(r)},error:function(t,n){U.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}U.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,a=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new a(e,t)},extension:e&&e.extension||P,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||A.a,httpAPICall:function(e,a){var r={method:a.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===a.verb&&(r.headers["Content-Type"]="application/json"),void 0!==a.withCredentials&&(r.credentials=!0===a.withCredentials?"include":a.withCredentials?a.withCredentials:"omit"),a.body&&(r.body=JSON.stringify(a.body));var i=t(e,r).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(a.timeout){var o=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:a.timeout})}),a.timeout)}));i=n.race([i,o])}return i.then((function(e){return e.ok?typeof a.success===typeof U.noop?e.json().then((function(e){a.success(e)})).catch((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof a.error===typeof U.noop&&a.error(e.message||"<< internal error >>",e)})),i}}},U.useOldDependencies=function(e){var t=e&&e.jQuery||R.a,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||P,webRTCAdapter:e&&e.adapter||A.a,httpAPICall:function(e,n){var a=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},r=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(a,r,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success===typeof U.noop&&n.success(e)},error:function(e,t,a){typeof n.error===typeof U.noop&&n.error(t,a)}}))}}},U.noop=function(){},U.dataChanDefaultLabel="JanusDataChannel",U.endOfCandidates=null,U.stopAllTracks=function(e){try{var t=e.getTracks(),n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;U.log(s),s&&s.stop()}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}catch(l){}},U.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:U.noop,U.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),U.trace=U.noop,U.debug=U.noop,U.vdebug=U.noop,U.log=U.noop,U.warn=U.noop,U.error=U.noop,!0===e.debug||"all"===e.debug)U.trace=console.trace.bind(console),U.debug=console.debug.bind(console),U.vdebug=console.debug.bind(console),U.log=console.log.bind(console),U.warn=console.warn.bind(console),U.error=console.error.bind(console);else if(Array.isArray(e.debug)){var t=!0,n=!1,a=void 0;try{for(var r,i=e.debug[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;switch(o){case"trace":U.trace=console.trace.bind(console);break;case"debug":U.debug=console.debug.bind(console);break;case"vdebug":U.vdebug=console.debug.bind(console);break;case"log":U.log=console.log.bind(console);break;case"warn":U.warn=console.warn.bind(console);break;case"error":U.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+o+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}}catch(b){n=!0,a=b}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}U.log("Initializing library");var s=e.dependencies||U.useDefaultDependencies();U.isArray=s.isArray,U.webRTCAdapter=s.webRTCAdapter,U.httpAPICall=s.httpAPICall,U.newWebSocket=s.newWebSocket,U.extension=s.extension,U.extension.init(),U.listDevices=function(e,t){e="function"==typeof e?e:U.noop,null==t&&(t={audio:!0,video:!0}),U.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){U.debug(n),e(n),U.stopAllTracks(t)}))})).catch((function(t){U.error(t),e([])})):(U.warn("navigator.mediaDevices unavailable"),e([]))},U.attachMediaStream=function(e,t){try{e.srcObject=t}catch(n){try{e.src=URL.createObjectURL(t)}catch(n){U.error("Error attaching stream to element")}}},U.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch(n){try{e.src=t.src}catch(n){U.error("Error reattaching stream to element")}}};var c=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",l=window["on"+c];if(window.addEventListener(c,(function(e){for(var t in U.log("Closing window"),U.sessions)U.sessions[t]&&U.sessions[t].destroyOnUnload&&(U.log("Destroying session "+t),U.sessions[t].destroy({unload:!0,notifyDestroyed:!1}));l&&"function"==typeof l&&l()})),U.safariVp8=!1,"safari"===U.webRTCAdapter.browserDetails.browser&&U.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){var d=!0,u=!1,m=void 0;try{for(var h,p=RTCRtpSender.getCapabilities("video").codecs[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var g=h.value;if(g&&g.mimeType&&"video/vp8"===g.mimeType.toLowerCase()){U.safariVp8=!0;break}}}catch(b){u=!0,m=b}finally{try{d||null==p.return||p.return()}finally{if(u)throw m}}U.safariVp8?U.log("This version of Safari supports VP8"):U.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var f=new RTCPeerConnection({});f.createOffer({offerToReceiveVideo:!0}).then((function(e){U.safariVp8=-1!==e.sdp.indexOf("VP8"),U.safariVp8?U.log("This version of Safari supports VP8"):U.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),f.close(),f=null}))}if(U.unifiedPlan=!1,"firefox"===U.webRTCAdapter.browserDetails.browser&&U.webRTCAdapter.browserDetails.version>=59)U.unifiedPlan=!0;else if("chrome"===U.webRTCAdapter.browserDetails.browser&&U.webRTCAdapter.browserDetails.version>=72)U.unifiedPlan=!0;else if(window.RTCRtpTransceiver&&"currentDirection"in M.prototype){var v=new RTCPeerConnection;try{v.addTransceiver("audio"),U.unifiedPlan=!0}catch(w){}v.close()}else U.unifiedPlan=!1;U.initDone=!0,e.callback()}},U.isWebrtcSupported=function(){return!!window.RTCPeerConnection},U.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},U.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n};var V,L=U,N=n(7),$=(V={home:"\u062e\u0627\u0646\u0647",name:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc ",login:"\u0648\u0631\u0648\u062f",username:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc ",password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 ",password_confirmation:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",mobile:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 ",error:"\u062e\u0637\u0627",sign_in:"\u0648\u0631\u0648\u062f ",sign_up:"\u062b\u0628\u062a \u0646\u0627\u0645",back:"\u0628\u0627\u0632\u06af\u0634\u062a",signed_up_already:"\u062a\u0627 \u06a9\u0646\u0648\u0646 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u061f",new_advert:"\u062f\u0631\u062c \u0622\u06af\u0647\u06cc ",title:"\u0639\u0646\u0648\u0627\u0646",abstract:"\u0686\u06a9\u06cc\u062f\u0647",content:"\u0645\u062a\u0646",submit:"\u062b\u0628\u062a ",upload_from_gallery:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0627\u0632 \u06af\u0627\u0644\u0631\u06cc",welcome:"\u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f",sign_out:"\u062e\u0631\u0648\u062c",phone_number:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646",telegram_channel:"\u06a9\u0627\u0646\u0627\u0644 \u062a\u0644\u06af\u0631\u0627\u0645",instagram_page:"\u0635\u0641\u062d\u0647 \u0627\u06cc\u0646\u0633\u062a\u0627\u06af\u0631\u0627\u0645",address:"\u0622\u062f\u0631\u0633 ",email:"\u0627\u06cc\u0645\u06cc\u0644 ",contact_information:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062a\u0645\u0627\u0633 ",search:"\u062c\u0633\u062a\u062c\u0648 ",cancel:"\u0627\u0646\u0635\u0631\u0627\u0641",view:"\u0646\u0645\u0627\u06cc\u0634",edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634",delete:"\u062d\u0630\u0641",adverts_nes:"\u0639\u0646\u0648\u0627\u0646\u060c \u0645\u062a\u0646 \u0648 \u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a",my_pins:" \u0646\u0634\u0627\u0646 \u0634\u062f\u0647\u200c\u0647\u0627 ",pin:"\u0646\u0634\u0627\u0646 \u06a9\u0646",pinned:"\u0646\u0634\u0627\u0646 \u0634\u062f\u0647",message_to_seller:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",messages:"\u067e\u06cc\u0627\u0645 \u0647\u0627 ",send_message:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",province:"\u0627\u0633\u062a\u0627\u0646",city:"\u0634\u0647\u0631",website:"\u0648\u0628\u0633\u0627\u06cc\u062a",call:"\u062a\u0645\u0627\u0633 \u0628\u06af\u06cc\u0631\u06cc\u062f",ago:" \u0642\u0628\u0644",all_above:"\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0641\u0648\u0642",no_result:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f ",category:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc ",leg:"\u0645\u0633\u06cc\u0631",date:"\u062a\u0627\u0631\u06cc\u062e",time:"\u0632\u0645\u0627\u0646",numberOfPassngers:"\u062a\u0639\u062f\u0627\u062f \u0645\u0633\u0627\u0641\u0631\u0627\u0646 ",surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",fathername:"\u0646\u0627\u0645 \u067e\u062f\u0631",ssn:"\u06a9\u062f\u0645\u0644\u06cc",birthplace:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",pass_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",birthdate:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f",place_of_birth:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",required_fields:"\u0641\u06cc\u0644\u062f\u0647\u0627\u06cc \u0627\u062c\u0628\u0627\u0631\u06cc",en_father_name:"\u0646\u0627\u0645 \u067e\u062f\u0631 \u0644\u0627\u062a\u06cc\u0646",en_name:"\u0646\u0627\u0645 \u0644\u0627\u062a\u06cc\u0646",en_surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u0644\u0627\u062a\u06cc\u0646 ",passport_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",final_confirm:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0647\u0627\u06cc\u06cc ",document_form:"\u0641\u0631\u0645 \u0627\u0633\u0646\u0627\u062f ",save:"\u0630\u062e\u06cc\u0631\u0647",documents:"\u0627\u0633\u0646\u0627\u062f ",type:"\u0646\u0648\u0639",string:"\u0645\u062a\u0646 \u06a9\u0648\u062a\u0627\u0647",text:"\u0645\u062a\u0646 \u0628\u0644\u0646\u062f",select:"\u06af\u0632\u06cc\u0646\u0647",multiSelect:"\u0686\u0646\u062f \u06af\u0632\u06cc\u0646\u0647",table:"\u062c\u062f\u0648\u0644"},Object(N.a)(V,"date","\u062a\u0627\u0631\u06cc\u062e"),Object(N.a)(V,"refundable","\u0642\u0627\u0628\u0644 \u0627\u0639\u0627\u062f\u0647"),Object(N.a)(V,"yes","\u0628\u0644\u0647"),Object(N.a)(V,"no","\u062e\u06cc\u0631"),Object(N.a)(V,"commentable","\u0642\u0627\u0628\u0644 \u0646\u0638\u0631\u062f\u0647\u06cc"),Object(N.a)(V,"end_point","\u0646\u0642\u0637\u0647 \u067e\u0627\u06cc\u0627\u0646"),Object(N.a)(V,"start_point","\u0646\u0642\u0637\u0647 \u0634\u0631\u0648\u0639"),Object(N.a)(V,"votable","\u0631\u0627\u06cc \u06af\u06cc\u0631\u06cc"),Object(N.a)(V,"publishable","\u0642\u0627\u0628\u0644 \u0627\u0646\u062a\u0634\u0627\u0631"),Object(N.a)(V,"field_name","\u0646\u0627\u0645 \u0641\u06cc\u0644\u062f"),Object(N.a)(V,"add","\u0627\u0641\u0632\u0648\u062f\u0646 "),Object(N.a)(V,"remove","\u062d\u0630\u0641"),Object(N.a)(V,"auxiliary_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"create_by","\u0627\u06cc\u062c\u0627\u062f \u0634\u062f\u0647 \u062a\u0648\u0633\u0637"),Object(N.a)(V,"list","\u0644\u06cc\u0633\u062a"),Object(N.a)(V,"workflows","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"auxiliary_records","\u0645\u0642\u0627\u062f\u06cc\u0631 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"basic_table","\u062c\u062f\u0648\u0644 \u067e\u0627\u06cc\u0647"),Object(N.a)(V,"relation_table","\u062c\u062f\u0648\u0644 \u0631\u0627\u0628\u0637\u0647"),Object(N.a)(V,"auxiliary_table_form","\u0641\u0631\u0645 \u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc "),Object(N.a)(V,"Basic","\u067e\u0627\u06cc\u0647"),Object(N.a)(V,"Relation","\u0631\u0627\u0628\u0637\u0647 "),Object(N.a)(V,"Divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(V,"workflow_form","\u0641\u0631\u0645 \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(V,"submitting","\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644 ... "),Object(N.a)(V,"settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"),Object(N.a)(V,"receiving","\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a ..."),Object(N.a)(V,"workflow_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631 "),Object(N.a)(V,"auxiliary_table","\u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"workflow","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(V,"actions","\u0639\u0645\u0644\u06cc\u0627\u062a"),Object(N.a)(V,"roles","\u0646\u0642\u0634 \u0647\u0627"),Object(N.a)(V,"divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(V,"enter_your_email","\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"enter_your_password","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f "),Object(N.a)(V,"enter_your_password_confirmation","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f "),Object(N.a)(V,"profiles","\u0627\u0641\u0631\u0627\u062f "),Object(N.a)(V,"firstname","\u0646\u0627\u0645"),Object(N.a)(V,"if_registered","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(V,"you_can_login","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"),Object(N.a)(V,"if_not_registered","\u0627\u06af\u0631 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(V,"you_can_sign_up","\u0686\u0646\u0627\u0646\u0686\u0647 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0627\u06cc\u0646\u062c\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f."),Object(N.a)(V,"new_assignment","\u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"posts","\u067e\u0633\u062a \u0647\u0627"),Object(N.a)(V,"bookmark","\u0646\u0634\u0627\u0646"),Object(N.a)(V,"like","\u0639\u0644\u0627\u0642\u0647"),Object(N.a)(V,"follow","\u062f\u0646\u0628\u0627\u0644"),Object(N.a)(V,"share","\u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(V,"social_acts","\u0639\u0645\u0644\u06af\u0631\u0647\u0627\u06cc \u0627\u062c\u062a\u0645\u0627\u0639\u06cc "),Object(N.a)(V,"channels","\u06a9\u0627\u0646\u0627\u0644 \u0647\u0627"),Object(N.a)(V,"close","\u0628\u0633\u062a\u0646"),Object(N.a)(V,"channel","\u06a9\u0627\u0646\u0627\u0644 "),Object(N.a)(V,"details","\u0634\u0631\u062d"),Object(N.a)(V,"Shoa","\u0634\u0639\u0627\u0639 "),Object(N.a)(V,"role","\u0646\u0642\u0634"),Object(N.a)(V,"Default","\u067e\u06cc\u0634 \u0641\u0631\u0636"),Object(N.a)(V,"NonDefault","\u063a\u06cc\u0631 \u067e\u06cc\u0634 \u0641\u0631\u0636 "),Object(N.a)(V,"value"," \u0645\u0642\u062f\u0627\u0631"),Object(N.a)(V,"true","\u0645\u062b\u0628\u062a"),Object(N.a)(V,"false","\u0645\u0646\u0641\u06cc"),Object(N.a)(V,"access_control_list","\u0644\u06cc\u0633\u062a \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(V,"access_control_form","\u0641\u0631\u0645 \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(V,"assignment_form","\u0641\u0631\u0645 \u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634"),Object(N.a)(V,"comment_form","\u0646\u0638\u0631 \u0628\u062f\u0647\u06cc\u062f"),Object(N.a)(V,"post_form","\u0641\u0631\u0645 \u067e\u0633\u062a"),Object(N.a)(V,"metas","\u067e\u06cc\u0634 \u062c\u062f\u0627\u0648\u0644"),Object(N.a)(V,"shoa","\u0634\u0639\u0627\u0639"),Object(N.a)(V,"form","\u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a"),Object(N.a)(V,"choose_image","\u0627\u0646\u062a\u062e\u0627\u0628 \u0639\u06a9\u0633"),Object(N.a)(V,"logout","\u062e\u0631\u0648\u062c"),Object(N.a)(V,"more","\u0628\u06cc\u0634\u062a\u0631 ..."),Object(N.a)(V,"social","\u0627\u062c\u062a\u0645\u0627\u0639\u06cc"),Object(N.a)(V,"courses","\u062f\u0631\u0648\u0633"),Object(N.a)(V,"discussions","\u06af\u0641\u062a\u06af\u0648 \u0647\u0627"),Object(N.a)(V,"exams","\u0622\u0632\u0645\u0648\u0646 \u0647\u0627 "),Object(N.a)(V,"public","\u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(V,"private","\u062e\u0635\u0648\u0635\u06cc "),Object(N.a)(V,"course_type","\u0646\u0648\u0639 \u062f\u0631\u0633"),Object(N.a)(V,"select_appropriate_title","\u0639\u0646\u0648\u0627\u0646\u06cc \u0645\u0646\u0627\u0633\u0628 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"write_appropriate_description","\u0634\u0631\u062d\u06cc \u0627\u0632 \u0627\u0647\u062f\u0627\u0641 \u0648 \u0631\u0648\u0634 \u0647\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"description","\u0634\u0631\u062d "),Object(N.a)(V,"drag_or_browse","\u0641\u0627\u06cc\u0644 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0631\u0627 \u0627\u06cc\u0646\u062c\u0627 \u0628\u06cc\u0627\u0646\u062f\u0627\u0632\u06cc\u062f \u06cc\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"attachment","\u0641\u0627\u06cc\u0644 \u0647\u0627\u06cc \u067e\u06cc\u0648\u0633\u062a"),Object(N.a)(V,"tasks","\u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"start_date","\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639"),Object(N.a)(V,"deadline","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc"),Object(N.a)(V,"select_a_date","\u06cc\u06a9 \u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"incomplete_data","\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0631\u0627 \u062a\u06a9\u0645\u06cc\u0644 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"alert","\u0647\u0634\u062f\u0627\u0631"),Object(N.a)(V,"deadline_time","\u0633\u0627\u0639\u062a"),Object(N.a)(V,"start_time","\u0633\u0627\u0639\u062a"),Object(N.a)(V,"select_a_time","\u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u0627\u0639\u062a"),Object(N.a)(V,"coworkers","\u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(V,"works","\u06a9\u0627\u0631\u0647\u0627 "),Object(N.a)(V,"dashboard","\u0645\u06cc\u0632\u06a9\u0627\u0631"),Object(N.a)(V,"tavan","\u062a\u0648\u0627\u0646"),Object(N.a)(V,"statuses","\u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(V,"status","\u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(V,"add_stauts","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(V,"select","\u0627\u0646\u062a\u062e\u0627\u0628"),Object(N.a)(V,"new","\u062c\u062f\u06cc\u062f"),Object(N.a)(V,"task","\u0648\u0638\u06cc\u0641\u0647"),Object(N.a)(V,"attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627"),Object(N.a)(V,"reports","\u0627\u0633\u0646\u0627\u062f \u0648 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"tags","\u0628\u0631\u0686\u0633\u0628 \u0647\u0627"),Object(N.a)(V,"new_tag","\u0628\u0631\u0686\u0633\u0628 \u062c\u062f\u06cc\u062f "),Object(N.a)(V,"recent_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0627\u062e\u06cc\u0631"),Object(N.a)(V,"public_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(V,"sort_by","\u0645\u0631\u062a\u0628 \u0633\u0627\u0632\u06cc"),Object(N.a)(V,"by_title","\u0639\u0646\u0648\u0627\u0646"),Object(N.a)(V,"by_events","\u0631\u062e\u062f\u0627\u062f"),Object(N.a)(V,"deadline_near","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc \u0646\u0632\u062f\u06cc\u06a9"),Object(N.a)(V,"new_report","\u06af\u0632\u0627\u0631\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"new_comments","\u06af\u0641\u062a\u06af\u0648\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"Admin","\u0645\u062f\u06cc\u0631"),Object(N.a)(V,"Colleague","\u0647\u0645\u06a9\u0627\u0631"),Object(N.a)(V,"Observer","\u0646\u0627\u0638\u0631"),Object(N.a)(V,"Creator","\u0633\u0627\u0632\u0646\u062f\u0647"),Object(N.a)(V,"verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632"),Object(N.a)(V,"enter_verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"your_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(V,"your_newest_works","\u062c\u062f\u06cc\u062f\u062a\u0631\u06cc\u0646 \u06a9\u0627\u0631\u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(V,"todo_list","\u062a\u0642\u0633\u06cc\u0645 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631"),Object(N.a)(V,"todo_participants","\u0627\u0641\u0631\u0627\u062f"),Object(N.a)(V,"new_todo_participants","\u0627\u0641\u0631\u0627\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"not_found","\u0686\u06cc\u0632\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),Object(N.a)(V,"are_you_sure","\u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f"),Object(N.a)(V,"Confirmer","\u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u0646\u062f\u0647"),Object(N.a)(V,"time_sheets","\u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"morning_report","\u06af\u0632\u0627\u0631\u0634 \u067e\u06cc\u0634 \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(V,"afternoon_report","\u06af\u0632\u0627\u0631\u0634 \u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(V,"extra_report","\u06af\u0632\u0627\u0631\u0634 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0627\u0631\u06cc"),Object(N.a)(V,"write_appropriate_details","\u0634\u0631\u062d\u06cc \u06a9\u0627\u0645\u0644 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"associations","\u0645\u0631\u062a\u0628\u0637 \u0628\u0627"),Object(N.a)(V,"sheet_date","\u062a\u0627\u0631\u06cc\u062e \u062c\u062f\u0648\u0644"),Object(N.a)(V,"recipients","\u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0646\u062f\u06af\u0627\u0646"),Object(N.a)(V,"sent_by_me","\u0627\u0631\u0633\u0627\u0644 \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"sent_to_me","\u062f\u0631\u06cc\u0627\u0641\u062a \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"priority","\u0644\u0648\u0644\u0648\u06cc\u062a"),Object(N.a)(V,"normal","\u0639\u0627\u062f\u06cc"),Object(N.a)(V,"high","\u0641\u0648\u0631\u06cc"),Object(N.a)(V,"urgent","\u0628\u0633\u06cc\u0627\u0631 \u0641\u0648\u0631\u06cc"),Object(N.a)(V,"archived","\u0622\u0631\u0634\u06cc\u0648 \u0634\u062f\u0647"),Object(N.a)(V,"write_archive_note","\u0645\u062a\u0646 \u062c\u0645\u0639 \u0628\u0646\u062f\u06cc \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u0622\u0631\u0634\u06cc\u0648 \u0633\u0627\u0632\u06cc \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"user_groups","\u06af\u0631\u0648\u0647 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"),Object(N.a)(V,"user_settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0634\u062e\u0635\u06cc"),Object(N.a)(V,"add_involvement_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"remove_involvement_from_tasks","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"change_status_tasks","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_works_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06a9\u0627\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_reports_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_comments_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_involvement_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"remove_involvement_from_works","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"change_status_works","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_todos_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_reports_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_comments_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_involvement_to_todos","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631 \u0628\u0647 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(V,"remove_involvement_from_todos","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631 \u0627\u0632 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(V,"add_involvement_to_time_sheets","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0628\u0647 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"remove_involvement_from_timesheets","\u062d\u0630\u0641 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0627\u0632 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"notification_type","\u0634\u06cc\u0648\u0647 \u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(V,"mail_notification","\u0627\u06cc\u0645\u06cc\u0644"),Object(N.a)(V,"push_notification","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0648\u0628"),Object(N.a)(V,"sms","\u067e\u06cc\u0627\u0645\u06a9"),Object(N.a)(V,"if_someone_adds_you_youll_be_asked","\u0686\u0646\u0627\u0646\u0686\u0647 \u06a9\u0633\u06cc \u0634\u0645\u0627 \u0631\u0627 \u0628\u0647 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u06cc\u0627\u0641\u0632\u0627\u06cc\u062f \u0634\u0645\u0627 \u0628\u0627\u06cc\u062f \u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u06cc\u062f."),Object(N.a)(V,"previous_attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627\u06cc \u0642\u0628\u0644\u0627 \u0622\u067e\u0644\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(V,"cas","\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a \u0645\u0631\u06a9\u0632\u06cc"),Object(N.a)(V,"profile","\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"),Object(N.a)(V,"groups","\u06af\u0631\u0648\u0647\u0628\u0646\u062f\u06cc \u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(V,"confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0634\u062f\u0647"),Object(N.a)(V,"not_confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0646\u0634\u062f\u0647"),Object(N.a)(V,"blocked_list","\u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0645\u0633\u062f\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(V,"notifications","\u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(V,"privacy","\u062d\u0631\u06cc\u0645 \u062e\u0635\u0648\u0635\u06cc"),Object(N.a)(V,"add_comments_to_reports","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"new_notifications","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0647\u0627\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"new_reports","\u0622\u062e\u0631\u06cc\u0646 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"events_calendar","\u062a\u0642\u0648\u06cc\u0645 \u0631\u062e\u062f\u0627\u062f\u0647\u0627"),Object(N.a)(V,"to","\u0628\u0647"),Object(N.a)(V,"statusChanges","\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(V,"in_reply_to","\u062f\u0631 \u067e\u0627\u0633\u062e \u0628\u0647"),Object(N.a)(V,"avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"number_of_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"duration","\u0637\u0648\u0644 \u062c\u0644\u0633\u0647"),Object(N.a)(V,"kian","\u06a9\u06cc\u0627\u0646"),Object(N.a)(V,"attendances","\u062d\u0627\u0636\u0631\u06cc\u0646"),Object(N.a)(V,"attendance_duration","\u062f\u0642\u0627\u06cc\u0642 \u062d\u0636\u0648\u0631"),Object(N.a)(V,"utid","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(V,"attendance_percentage","\u062f\u0631\u0635\u062f \u062d\u0636\u0648\u0631"),Object(N.a)(V,"faculties","\u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"total_assets","\u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(V,"id","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(V,"courses_most_quiz","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a"),Object(N.a)(V,"courses_most_resource","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u0646\u0627\u0628\u0639"),Object(N.a)(V,"courses_most_assignment","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0645\u0631\u06cc\u0646 \u0647\u0627"),Object(N.a)(V,"teacher","\u0645\u062f\u0631\u0633"),Object(N.a)(V,"courses_most_occ","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"courses_most_ocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"courses_most_activity","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(V,"bb_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"adobe_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"number_of_bb_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"courses_most_bocc","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062c\u0644\u0633\u0647 \u062f\u0631 \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"courses_most_bocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"person_session","\u0646\u0641\u0631/\u062c\u0644\u0633\u0647"),Object(N.a)(V,"session","\u062c\u0644\u0633\u0647"),Object(N.a)(V,"bb_avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"link","\u0644\u06cc\u0646\u06a9 \u062f\u0631\u0633 \u062f\u0631 \u0627\u06cc\u0644\u0631\u0646"),Object(N.a)(V,"sections","\u067e\u0631\u062f\u06cc\u0633 \u0647\u0627 \u0648 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"facultyId","\u0634\u0646\u0627\u0633\u0647 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 "),Object(N.a)(V,"is_typing","\u062f\u0631\u062d\u0627\u0644 \u0646\u0648\u0634\u062a\u0646 \u0627\u0633\u062a"),Object(N.a)(V,"pass","\u0631\u0645\u0632"),Object(N.a)(V,"new_slide","\u0627\u0633\u0644\u0627\u06cc\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"unshare","\u0639\u062f\u0645 \u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(V,"start_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u0631\u0648\u0634\u0646"),Object(N.a)(V,"end_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u062e\u0627\u0645\u0648\u0634"),Object(N.a)(V,"record","\u0636\u0628\u0637 \u062c\u0644\u0633\u0647"),Object(N.a)(V,"recording","\u062f\u0631 \u062d\u0627\u0644 \u0636\u0628\u0637"),Object(N.a)(V,"stop","\u0642\u0637\u0639"),Object(N.a)(V,"send","\u0627\u0631\u0633\u0627\u0644"),Object(N.a)(V,"chat","\u06af\u0641\u062a\u06af\u0648"),Object(N.a)(V,"write_here","\u0627\u06cc\u0646\u062c\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f..."),Object(N.a)(V,"frame_link","\u0622\u062f\u0631\u0633"),V),B=(a.Component,n(14)),W=n(46),z=n(224),F=(n(399),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={image:null},n.handleLoad=function(){n.setState({image:n.image})},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage(),e.width!==this.props.width&&this.loadImage(),e.height!==this.props.height&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.crossOrigin="anonymous",this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return r.a.createElement(W.b,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,image:this.state.image,ref:function(t){e.imageNode=t}})}}]),t}(r.a.Component)),H=n(209),q=n(210),J=n.n(q),G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleMouseDown=function(e){n.setState({isDrawing:!0}),console.log(n.getRelativePointerPosition(e.target.getStage())),console.log(e.target.getStage().getPointerPosition());var t=n.getRelativePointerPosition(e.target.getStage()),a=n.state.tool,r=Math.random().toString(36).substring(7),i={tool:a,color:n.state.color,vectorId:r,points:[t.x,t.y]};n.setState({lines:n.state.lines.concat(i),vectorId:n.state.vectorId.concat(r)},(function(){n.throttle(i,"line"),console.log(i)}))},n.handleMouseMove=function(e){if(n.state.pointerEnabled&&(n.props.isAdmin||n.props.isPresenter||n.props.isWriter)){var t=n.getRelativePointerPosition(e.target.getStage()),a={uuid:n.props.userUUID,x:t.x,y:t.y};return n.updateMovement(a),void n.throttle(a,"point")}if(n.state.isDrawing&&(n.props.isAdmin||n.props.isPresenter||n.props.isWriter)){e.target.getStage();var r=n.getRelativePointerPosition(e.target.getStage()),i=n.state.lines[n.state.lines.length-1];i.points=i.points.concat([r.x,r.y]),n.state.lines.splice(n.state.lines.length-1,1,i),n.setState({lines:n.state.lines.concat()},(function(){n.throttle(n.state.lines,"line")}))}},n.handleMouseUp=function(){n.setState({isDrawing:!1})},n.handleMouseDown=n.handleMouseDown.bind(Object(h.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(h.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(h.a)(n)),n.fitStageIntoParentContainer=n.fitStageIntoParentContainer.bind(Object(h.a)(n)),n.getRelativePointerPosition=n.getRelativePointerPosition.bind(Object(h.a)(n)),n.stage=r.a.createRef(),n.layer=r.a.createRef(),n.imageLayer=r.a.createRef(),n.throttle=n.throttle.bind(Object(h.a)(n)),n.pointer=n.pointer.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleClose=n.handleClose.bind(Object(h.a)(n)),n.undo=n.undo.bind(Object(h.a)(n)),n.removeLatestLine=n.removeLatestLine.bind(Object(h.a)(n)),n.trash=n.trash.bind(Object(h.a)(n)),n.updateMovement=n.updateMovement.bind(Object(h.a)(n)),n.togglePointer=n.togglePointer.bind(Object(h.a)(n)),n.loadImage=n.loadImage.bind(Object(h.a)(n)),n.recorder=n.recorder.bind(Object(h.a)(n)),n.stopRecording=n.stopRecording.bind(Object(h.a)(n)),n.recordBtn=n.recordBtn.bind(Object(h.a)(n)),n.boardControl=n.boardControl.bind(Object(h.a)(n)),n.arrows=n.arrows.bind(Object(h.a)(n)),n.state={tool:"pen",lines:[],isDrawing:!1,baseWidth:800,baseHeight:600,width:800,height:600,scale:4/3,scaleX:1,scaleY:1,lastTime:Date.now(),pointer:{x:100,y:100},currentPage:0,color:"#22194D",displayColorPicker:!1,upload:null,vectorId:[],pointers:[],pointerEnabled:!0,uploadedHeigth:1e3,ratio:.75,db:null,recording:!1},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.line!==this.props.line&&this.setState({lines:this.state.lines.concat(this.props.line)}),e.participants!==this.props.participants&&(console.log("ZZZZZZZZ",this.props.participants),this.props.participants.map((function(e){var n=t.state.pointers.filter((function(t){return t.uuid===e.uuid}));0!==n.length&&e.userColor===n.userColor||t.setState({pointers:t.state.pointers.concat({uuid:e.uuid,color:e.userColor,x:0,y:0})},(function(){}))}))),e.undoVector!==this.props.undoVector&&this.props.undoVector&&(this.removeLatestLine(this.props.undoVector),this.props.revertUndo()),e.trash!==this.props.trash&&this.props.trash&&(this.applyTrash(),this.props.revertTrash()),e.upload!==this.props.upload&&this.props.upload.converted){var n=this.props.upload.dimensions[this.state.currentPage],a=n.h/n.w;console.log("><><><><",n.h,n.w),this.setState({currentPage:0,upload:this.props.upload,ratio:a}),this.props.uploadedRecently&&(this.throttle({currentPage:this.state.currentPage,uuid:this.props.upload.uuid},"newUpload"),this.props.uploadedRecentlyReset())}e.page!==this.props.page&&(this.props.page.uuid==this.state.upload.uuid?this.setState({currentPage:this.props.page.currentPage}):(console.log("Calling recentUpload ..."),this.props.recentUpload())),e.currentPoint!==this.props.currentPoint&&this.updateMovement(this.props.currentPoint)}},{key:"updateMovement",value:function(e){for(var t=this.state.pointers,n=0;n<t.length;n++)if(t[n].uuid===e.uuid){var a=Object.assign({},this.state);a.pointers[n]={uuid:t[n].uuid,color:t[n].color,x:e.x,y:e.y},this.setState(a)}}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"pointer",value:function(e,t){return r.a.createElement(W.a,{x:e,y:t,radius:2,fill:"green"})}},{key:"componentDidMount",value:function(){this.layer.current.getCanvas()._canvas.id="main-canvas",window.db={},window.db=new H.a("VideosDB"),window.db.version(2).stores({videos:"++id,session,blob"}),window.addEventListener("load",this.fitStageIntoParentContainer),window.addEventListener("resize",this.fitStageIntoParentContainer),this.$$("#board").css({height:this.$$("#uploaded").height()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.fitStageIntoParentContainer),window.removeEventListener("load",this.fitStageIntoParentContainer)}},{key:"fitStageIntoParentContainer",value:function(){var e=this,t=this.$$("#board").width(),n=this.$$("#board").height(),a=Math.min(t/this.state.width,n/this.state.height);window.innerWidth<1090&&(this.setState({scale:a}),this.setState({width:this.$$("#board").width(),height:this.$$("#board").width()*this.state.ratio},(function(){e.stage.current.width(e.$$("#board").width()),console.log(e.state.width,e.state.height),e.stage.current.height(e.$$("#board").width()*e.state.ratio),e.stage.current.scale({x:a,y:a}),e.stage.current.draw()}))),window.innerWidth>1090&&(this.setState({scale:a}),this.setState({width:800,height:800*this.state.ratio},(function(){e.stage.current.width(800),e.stage.current.height(800*e.state.ratio),e.stage.current.scale({x:a,y:a}),e.stage.current.draw()})))}},{key:"getRelativePointerPosition",value:function(e){var t=e.getAbsoluteTransform().copy();t.invert();var n=e.getStage().getPointerPosition();return t.point(n)}},{key:"progress",value:function(){var e=this;if(this.props.isPresenter||this.props.isAdmin)return this.props.progressShow||this.props.upload&&!this.props.upload.converted?r.a.createElement(c.w,{color:"red"}):r.a.createElement("div",{class:"upload-btn"},r.a.createElement("label",{for:"file-input"},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),r.a.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),r.a.createElement("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),r.a.createElement("line",{x1:"9",y1:"14",x2:"15",y2:"14"})))),r.a.createElement("input",{id:"file-input",className:"file-input",type:"file",name:"resume",accept:"application/pdf",onInput:function(t){e.props.uploader(t.target.files[0]),e.setState({upload:null})}}))}},{key:"uploaded",value:function(){if(this.state.upload)return r.a.createElement("img",{src:"http://localhost:3001/"+this.state.upload.uuid+"/x-"+this.enumerator(this.state.currentPage)+".jpg",class:"b-radius-0 ",id:"uploaded",width:this.state.width+"px"})}},{key:"enumerator",value:function(e){return e<10?"000"+e.toString():10<=e<100?"00"+e.toString():100<=e<1e3?"0"+e.toString():void 0}},{key:"arrows",value:function(){var e=this;if(this.props.upload)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.previousPage()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"10",y2:"12"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"16",y2:"16"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"16",y2:"8"}),r.a.createElement("line",{x1:"4",y1:"4",x2:"4",y2:"20"})))),r.a.createElement("div",{style:{marginTop:"-4px"}},this.state.currentPage+1,"/",this.props.upload.pages),r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.nextPage()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"14",y2:"12"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"8",y2:"16"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"8",y2:"8"}),r.a.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"20"})))))}},{key:"nextPage",value:function(){var e=this;this.props.upload&&this.props.upload.pages&&this.props.upload.pages>this.state.currentPage&&this.setState({currentPage:this.state.currentPage+1},(function(){e.throttle({currentPage:e.state.currentPage,uuid:e.props.upload.uuid},"page")}))}},{key:"previousPage",value:function(){var e=this;this.props.upload&&this.props.upload.pages&&this.props.upload.pages>this.state.currentPage&&this.state.currentPage>0&&this.setState({currentPage:this.state.currentPage-1},(function(){e.throttle({currentPage:e.state.currentPage,uuid:e.props.upload.uuid},"page")}))}},{key:"handleClick",value:function(e){console.log(e),this.setState({displayColorPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function(e){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e,t){console.log(e,t),this.setState({color:e.hex,pointerEnabled:!1})}},{key:"undo",value:function(){var e=this.state.vectorId[this.state.vectorId.length-1];this.throttle(e,"undo"),this.removeLatestLine(e),this.setState({vectorId:this.state.vectorId.filter((function(t){return t!==e}))})}},{key:"removeLatestLine",value:function(e){this.state.lines.length>0&&this.setState({lines:this.state.lines.filter((function(t){return t.vectorId!==e}))})}},{key:"trash",value:function(){this.throttle(null,"trash"),this.setState({lines:[]})}},{key:"applyTrash",value:function(){this.setState({lines:[]})}},{key:"pointers",value:function(){var e=[];return this.state.pointers.map((function(t){e.push(r.a.createElement(W.a,{x:t.x,y:t.y,radius:5,fill:t.color}))})),e}},{key:"togglePointer",value:function(){this.setState({pointerEnabled:!this.state.pointerEnabled})}},{key:"loadImage",value:function(){if(this.state.upload)return r.a.createElement(F,{src:"http://localhost:3001/"+this.state.upload.uuid+"/x-"+this.enumerator(this.state.currentPage)+".jpg",width:this.state.width,height:this.state.width*this.state.ratio})}},{key:"recorder",value:function(){console.log("Record started");var e=this.layer.current.getCanvas()._canvas;window.recorder={};var t=new J.a([this.props.localStream,this.props.remoteStream]);console.log(t.getMixedStream());var n=new MediaStream([].concat(Object(B.a)(e.captureStream(5).getTracks()),Object(B.a)(t.getMixedStream().getTracks())));window.recorder=new MediaRecorder(n);var a=[];window.recorder.ondataavailable=function(e){e.data.size&&a.push(e.data)},window.recorder.onstop=function(){var e=new Blob(a,{type:"video/mp4"});URL.createObjectURL(e);window.db.videos.add({blob:e}).then((function(){console.log("Blob Stored ...")})).catch((function(e){alert("Error: "+(e.stack||e))}))},window.recorder.start(),this.setState({recording:!0})}},{key:"stageDrawer",value:function(){}},{key:"stopRecording",value:function(){window.recorder.stop(),this.setState({recording:!1})}},{key:"recordBtn",value:function(){var e=this;return this.state.recording?r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.stopRecording()}},r.a.createElement("div",{style:{float:"left"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"5",y:"5",width:"14",height:"14",rx:"2"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"125px"}},r.a.createElement(c.w,{color:"multi",size:15,style:{marginLeft:"2px"}}),$.recording,"...",$.stop))):r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.recorder()}},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),r.a.createElement("circle",{cx:"12",cy:"14",r:"2"}),r.a.createElement("polyline",{points:"14 4 14 8 8 8 8 4"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"90px"}},$.record)))}},{key:"boardControl",value:function(e,t){var n=this;if(this.props.isWriter||this.props.isPresenter||this.props.isAdmin)return r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return n.togglePointer()}},this.state.pointerEnabled?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("path",{d:"M14.828 9.172a4 4 0 0 1 0 5.656"}),r.a.createElement("path",{d:"M17.657 6.343a8 8 0 0 1 0 11.314"}),r.a.createElement("path",{d:"M9.168 14.828a4 4 0 0 1 0 -5.656"}),r.a.createElement("path",{d:"M6.337 17.657a8 8 0 0 1 0 -11.314"})):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M14.828 9.172a4 4 0 0 1 1.172 2.828"}),r.a.createElement("path",{d:"M17.657 6.343a8 8 0 0 1 1.635 8.952"}),r.a.createElement("path",{d:"M9.168 14.828a4 4 0 0 1 0 -5.656"}),r.a.createElement("path",{d:"M6.337 17.657a8 8 0 0 1 0 -11.314"}))),r.a.createElement("a",{onClick:this.handleClick},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"}),r.a.createElement("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"}))),this.state.displayColorPicker?r.a.createElement("div",{style:e},r.a.createElement("div",{style:t,onClick:this.handleClose}),r.a.createElement(z.a,{onChange:this.handleChange})):null,r.a.createElement("a",{onClick:function(){return n.undo()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1"}))),r.a.createElement("a",{onClick:function(){return n.trash()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),r.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),r.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),r.a.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),r.a.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,null,r.a.createElement(c.i,null,this.boardControl({position:"absolute",zIndex:"1000"},{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}),this.progress()),r.a.createElement(c.g,{id:"board",className:"flex-center",style:{alignItems:"normal",height:this.state.uploadedHeigth}},r.a.createElement("div",{style:{position:"absolute"}}),r.a.createElement(W.e,{width:this.state.width+2,height:this.state.width*this.state.ratio+2,onMouseDown:this.handleMouseDown,onMousemove:this.handleMouseMove,onMouseup:this.handleMouseUp,ref:this.stage},r.a.createElement(W.c,{ref:this.layer},this.loadImage(),this.pointers(),this.state.lines.map((function(e,t){return r.a.createElement(W.d,{key:t,points:e.points,stroke:e.color,strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"})}))))),r.a.createElement(c.h,{className:"board-footer"},this.arrows())),r.a.createElement("div",{id:"vid"}))}}]),t}(a.Component),K=n(91),Z=n.n(K),Y=n(128),Q=n.n(Y),X=n(211),ee=n.n(X),te=(a.Component,n(29)),ne=n(43),ae=(a.Component,n(180),a.Component,n(61)),re=n.n(ae),ie=n(212),oe=(a.Component,a.Component,n(495),function(e){return r.a.createElement(c.u,{id:"main-page"},r.a.createElement(c.t,{title:$.home},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),function(){var t="none";return e.ionActive&&(t="block"),r.a.createElement(c.f,{style:{display:t,background:"#5d5d5f",borderRadius:"0"}},r.a.createElement(c.g,{id:"videos",style:{minHeight:"210px"}},e.ionVideos(),r.a.createElement("div",{id:"selfVideos",style:{float:"right"}}),r.a.createElement("div",{id:"remoteVideos",style:{minHeight:"right"}})))}(),r.a.createElement(G,{wsSend:e.wsSend,line:e.line,currentPoint:e.currentPoint,uploader:e.uploader,progress:e.progress,progressShow:e.progressShow,upload:e.upload,recentUpload:e.recentUpload,page:e.page,undoVector:e.undoVector,revertUndo:e.revertUndo,revertTrash:e.revertTrash,trash:e.trash,userColor:e.userColor,participants:e.participants,userUUID:e.userUUID,uploadedRecently:e.uploadedRecently,uploadedRecentlyReset:e.uploadedRecentlyReset,remoteStream:e.remoteStream,localStream:e.localStream,isAdmin:e.isAdmin,isPresenter:e.isPresenter,isWriter:e.isWriter}),(e.screenActive,r.a.createElement(c.f,{style:{minHeight:"0px",background:"#5d5d5f",borderRadius:"0"}},r.a.createElement("div",{id:"screen",style:{textAlign:"center"}},e.screenVideos(),r.a.createElement("div",{id:"remotes"})))),r.a.createElement("div",{id:"mixedaudio"}))}),se=function(e){function t(t){if(!e.isAdmin&&t.uuid===e.userUUID||e.isAdmin&&t.uuid!==e.userUUID)return r.a.createElement("div",{className:"right-icon-3",style:{marginTop:"3px",marginLeft:"9px"}},r.a.createElement("a",{onClick:function(){return function(t){t.uuid===e.userUUID&&(e.handRaised(t.uuid)?(e.wsSend({type:"handRaise",c:{status:"down",raiserUUID:t.uuid}}),e.handRaise({status:"down",raiserUUID:t.uuid})):(e.wsSend({type:"handRaise",c:{status:"raised",raiserUUID:t.uuid}}),e.handRaise({status:"raised",raiserUUID:t.uuid})))}(t)},style:{color:a(t)}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"15",height:"15",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),r.a.createElement("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),r.a.createElement("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),r.a.createElement("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"}))))}function n(t,n){return e.participantRole(t.uuid)===n?"#8ff597":"#d4b9a3"}function a(t){return e.handRaised(t.uuid)?"#8ff597":"#d4b9a3"}return r.a.createElement(c.u,null,r.a.createElement("div",{className:"icon-bar "},r.a.createElement("div",{className:"icon-circle"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M7 7h10v6a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3v-6"}),r.a.createElement("line",{x1:"9",y1:"3",x2:"9",y2:"7"}),r.a.createElement("line",{x1:"15",y1:"3",x2:"15",y2:"7"}),r.a.createElement("path",{d:"M12 16v2a2 2 0 0 0 2 2h3"}))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.ionActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.screenActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.screenActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("circle",{cx:"12",cy:"12",r:"1"}),r.a.createElement("circle",{cx:"12",cy:"12",r:"5"}),r.a.createElement("line",{x1:"15.9",y1:"20.11",x2:"15.9",y2:"20.12"}),r.a.createElement("line",{x1:"19.04",y1:"17.61",x2:"19.04",y2:"17.62"}),r.a.createElement("line",{x1:"20.77",y1:"14",x2:"20.77",y2:"14.01"}),r.a.createElement("line",{x1:"20.77",y1:"10",x2:"20.77",y2:"10.01"}),r.a.createElement("line",{x1:"19.04",y1:"6.39",x2:"19.04",y2:"6.4"}),r.a.createElement("line",{x1:"15.9",y1:"3.89",x2:"15.9",y2:"3.9"}),r.a.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"3.01"}),r.a.createElement("line",{x1:"8.1",y1:"3.89",x2:"8.1",y2:"3.9"}),r.a.createElement("line",{x1:"4.96",y1:"6.39",x2:"4.96",y2:"6.4"}),r.a.createElement("line",{x1:"3.23",y1:"10",x2:"3.23",y2:"10.01"}),r.a.createElement("line",{x1:"3.23",y1:"14",x2:"3.23",y2:"14.01"}),r.a.createElement("line",{x1:"4.96",y1:"17.61",x2:"4.96",y2:"17.62"}),r.a.createElement("line",{x1:"8.1",y1:"20.11",x2:"8.1",y2:"20.12"}),r.a.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"21.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement(c.e,{panelOpen:"left",className:e.chatActive?"fc-white mr--5":"mr--5",onClick:function(){return e.chatDeactive()},style:{textOverflow:"clip"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"}),r.a.createElement("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{onClick:function(){return e.logout()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M5.64 5.632a9 9 0 1 0 6.36 -2.632v7.714"}))))),r.a.createElement(c.o,{className:"fs-13 z-1 mb-80"}),r.a.createElement(c.o,{className:"fs-13 z-1"},function(){if(e.participants){var a=[];e.participants.map((function(i){i.display&&a.push(r.a.createElement(c.q,null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:i.userColor,"stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("circle",{cx:"12",cy:"7",r:"4"}),r.a.createElement("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})),r.a.createElement("span",null,i.display),function(e){return"talking"===e.current?r.a.createElement("div",{className:"right-icon-5"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M18 8a3 3 0 0 1 0 6"}),r.a.createElement("path",{d:"M10 8v11a1 1 0 0 1 -1 1h-1a1 1 0 0 1 -1 -1v-5"}),r.a.createElement("path",{d:"M12 8h0l4.524 -3.77a0.9 .9 0 0 1 1.476 .692v12.156a0.9 .9 0 0 1 -1.476 .692l-4.524 -3.77h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h8"}))):null}(i),function(t){if(t.uuid===e.userUUID&&(e.isPresenter||e.isSpeaker))return e.muted?r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2.002 -2a6.967 6.967 0 0 0 1.152 -3.85"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"})))):r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()},style:{color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"9",y:"2",width:"6",height:"11",rx:"3"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 14 0"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"}))))}(i),function(t){if(t.uuid===e.userUUID)return r.a.createElement("div",{className:"right-icon-1"},e.ionPublishBtn(),r.a.createElement("div",{id:"videoLoaderIcon",className:"loader",style:{display:"none"}}))}(i),function(t){if(t.uuid===e.userUUID&&e.isPresenter)return r.a.createElement("div",{className:"right-icon-2"},e.screenPublishBtn())}(i),function(t){return t.uuid!==e.userUUID&&e.isAdmin?r.a.createElement("div",{className:"right-icon-1"},r.a.createElement("a",{onClick:function(){return e.toggleRole(t.uuid,"presenter")},style:{color:n(t,"presenter")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"4",x2:"21",y2:"4"}),r.a.createElement("path",{d:"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10"}),r.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M8 12l3 -3l2 2l3 -3"})))):null}(i),t(i),function(t){if(t.uuid!==e.userUUID&&e.isPresenter)return r.a.createElement("div",{className:"right-icon-2"},r.a.createElement("a",{onClick:function(){return e.toggleRole(t.uuid,"writer")},style:{color:n(t,"writer")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"}),r.a.createElement("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"}))))}(i),function(t){if(t.uuid!==e.userUUID&&e.isPresenter)return r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleRole(t.uuid,"speaker")},style:{color:n(t,"speaker")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"9",y:"2",width:"6",height:"11",rx:"3"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 14 0"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"}))))}(i)))}))}return a}()))},ce=n(219),le=n(52),de=n.n(le),ue=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).throttle=n.throttle.bind(Object(h.a)(n)),n.send=n.send.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.chatItems=n.chatItems.bind(Object(h.a)(n)),n.state={lastTime:Date.now(),content:null,item:null},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){e.chats!==this.props.chats&&console.log(this.props.chats)}},{key:"componentDidMount",value:function(){}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"send",value:function(){this.state.item&&(this.throttle(this.state.item,"chat"),this.props.appendChat(this.state.item),this.$$("#chat-form").val(""),this.props.chatDeactive())}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"chatItems",value:function(){var e=[];return this.props.chats.slice(0).reverse().map((function(t){console.log(t),e.push(r.a.createElement("div",{class:"item-content"},r.a.createElement("div",{class:"item-inner"},r.a.createElement("div",{class:"item-title-row"},r.a.createElement("div",{class:"item-title",style:{fontSize:"10px"}},t.name),r.a.createElement("div",{class:"item-after"},r.a.createElement("span",null,de()(t.time).fromNow()))),r.a.createElement("div",{class:"item-text mh-auto",style:{overflow:"auto"}},t.content))))})),e}},{key:"render",value:function(){var e=this;return r.a.createElement(c.u,null,r.a.createElement(c.o,{noHairlinesMd:!0},r.a.createElement(c.p,{inputId:"chat-form",label:$.chat,type:"textarea",placeholder:$.write_here,onChange:function(t){e.handleChange({item:{content:t.target.value,name:e.props.name,time:Date.now(),uuid:Object(ce.v4)()}})}})),r.a.createElement(c.x,null,r.a.createElement(c.k,null),r.a.createElement(c.k,null),r.a.createElement(c.k,null,r.a.createElement(c.e,{fill:!0,onClick:function(){return e.send()}},$.send))),r.a.createElement(c.o,{mediaList:!0},this.chatItems()))}}]),t}(a.Component),me=function(e){function t(t){if(e.signingUp){if("name"==t)return r.a.createElement(c.p,{label:$.name,className:"fs-14",type:"text",placeholder:"Your username",value:e.name,onInput:function(t){e.handleChangeValue({name:t.target.value})}});if("passwordConfirmation"==t)return r.a.createElement(c.p,{label:$.password_confirmation,type:"text",className:"fs-14",placeholder:"Password Confirmation",value:e.passwordConfirmation,onInput:function(t){e.handleChangeValue({passwordConfirmation:t.target.value})}})}}return r.a.createElement(c.u,{loginScreen:!0},r.a.createElement(c.s,null," "),r.a.createElement(c.o,{form:!0},r.a.createElement(c.p,{label:$.email,className:"fs-14",type:"text",placeholder:"Your email",value:e.email,onInput:function(t){e.handleChangeValue({email:t.target.value})}}),t("name"),r.a.createElement(c.p,{label:$.password,type:"text",className:"fs-14",placeholder:"Password",value:e.password,onInput:function(t){e.handleChangeValue({password:t.target.value})}}),t("passwordConfirmation")),r.a.createElement(c.o,null,e.signingUp?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.sign_up),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.loginActive},$.you_can_login))):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.login),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.signUp},$.you_can_sign_up)))))},he=(n(421),function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.home},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.A,{tabbar:!0,top:!0},r.a.createElement(c.n,{tabLink:"#tab-1",tabLinkActive:!0},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))),r.a.createElement(c.n,{tabLink:"#tab-2"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))),r.a.createElement(c.n,{tabLink:"#tab-3"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"})))),r.a.createElement(c.x,null))});var pe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(h.a)(e)),e.state={token:window.localStorage.getItem("token"),bbMeetingHistogram:null,meetingHistogram:null,hourMeetingHistogram:null},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_multiple_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_multiple_list",this.getList)}},{key:"componentDidMount",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(E+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){console.log(e),v.dispatch({type:"MULTIPLE_LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}("/home",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=w.getMutipleList(),t=w.getKlass();e&&"Home"===t&&this.setState({meetingHistogram:e.meeting_histogram,hourMeetingHistogram:e.hour_meeting_histogram,bbMeetingHistogram:e.bb_meeting_histogram})}},{key:"render",value:function(){var e=this.state,t=e.meetingHistogram,n=e.bbMeetingHistogram,a=e.hourMeetingHistogram;return r.a.createElement(he,{bbMeetingHistogram:n,meetingHistogram:t,hourMeetingHistogram:a})}}]),t}(a.Component),ge=(n(425),function(e){return e.profile?(console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.o,{className:"fs-12"},r.a.createElement(c.q,{key:"profile-show"+e.profile.id,title:e.profile.fullname,after:""},r.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))),r.a.createElement(c.f,null),r.a.createElement(c.f,null))):null}),fe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getInstance=e.getInstance.bind(Object(h.a)(e)),e.state={token:window.localStorage.getItem("token"),profile:null,id:null,actuals:null,metas:null,channels:null},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({profile:e,id:e.id})}},{key:"fab",value:function(){if(this.state.profile)return r.a.createElement(c.l,{href:"/profiles/"+this.state.profile.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},r.a.createElement(c.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),r.a.createElement(c.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state.profile;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profiles,backLink:$.back}),this.fab(),r.a.createElement(ge,{profile:e}))}}]),t}(a.Component),ve=n(42),be=n.n(ve),we=(n(186),n(187),n(188),function(e){return e.profiles?r.a.createElement(c.o,{mediaList:!0},e.profiles.map((function(e){return r.a.createElement(c.q,{key:be.a.lib.WordArray.random(32),link:"/profiles/"+e.id,title:e.fullname,after:"",subtitle:"",text:""},r.a.createElement("img",{slot:"media",src:e.avatar,width:"40",height:"40"}))}))):r.a.createElement("ul",null)}),ye=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profiles,backLink:$.back},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"})),r.a.createElement(c.z,{inner:!1},r.a.createElement(c.y,{disableButtonText:$.cancel,placeholder:$.search,onChange:function(t){e.search({query:t.target.value})}}))),r.a.createElement(c.d,null),r.a.createElement(c.l,{href:"/profiles/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},r.a.createElement(c.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),r.a.createElement(c.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),r.a.createElement(we,{profiles:e.profiles}))},ke=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(h.a)(e)),e.search=e.search.bind(Object(h.a)(e)),e.state={token:window.localStorage.getItem("token"),profiles:null,query:null},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){j("profiles",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState(e,(function(){j("profiles/search",t.state.page,{q:t.state.query},t.state.token)}))}},{key:"getList",value:function(){var e=w.getList(),t=w.getKlass();e&&"Profile"===t&&this.setState({profiles:e})}},{key:"render",value:function(){var e=this.state.profiles;return r.a.createElement(ye,{profiles:e,search:this.search})}}]),t}(r.a.Component),Se=n(221),Ee=n.n(Se),je=function(e){return e.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.profile_info),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.firstname,type:"text",placeholder:"...",defaultValue:e.name,onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.p,{label:$.surename,type:"text",placeholder:"...",defaultValue:e.surename,onInput:function(t){e.handleChange({surename:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,null),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.submit))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,r.a.createElement("img",{src:e.avatar,width:"40",height:"40"})),r.a.createElement(Ee.a,{withIcon:!0,buttonText:$.choose_image,onChange:e.onDrop,buttonClassName:"upload-btn",imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880}))):null},Oe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.handleChangeValueFields=e.handleChangeValueFields.bind(Object(h.a)(e)),e.removeActual=e.removeActual.bind(Object(h.a)(e)),e.getInstance=e.getInstance.bind(Object(h.a)(e)),e.submitFields=e.submitFields.bind(Object(h.a)(e)),e.onDrop=e.onDrop.bind(Object(h.a)(e)),e.getList=e.getList.bind(Object(h.a)(e)),e.getList=e.getList.bind(Object(h.a)(e)),e.state={profile:{},metas:null,token:window.localStorage.getItem("token"),fields:[],name:"dd",surename:"",pictures:[],avatar:null},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.getInstance),w.on("deleted_instance",this.getInstance),w.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.getInstance),w.removeListener("deleted_instance",this.getInstance),w.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){j("metas",this.state.page)}},{key:"onDrop",value:function(e){console.log(e[0]),O("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){_("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"submitFields",value:function(){x("actuals",{meta_id:this.state.metaId,content:this.state.fields},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"handleChangeValueFields",value:function(e,t,n){var a=this.state.fields;if(a.length>0)for(var r=0;r<a.length;r++)if(a[r].fid&&a[r].fid===e){var i=Object.assign({},this.state);i.fields[r]={fid:e,value:t,metaId:n},this.setState(i)}else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})});else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})})}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({metas:e.metas,profile:e})}},{key:"removeActual",value:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");k.a.get(E+"/"+e+"/delete?"+a,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"DELETE_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}("actuals",{uuid:e})}},{key:"getList",value:function(){var e=w.getList(),t=w.getKlass();e&&"Meta"===t&&this.setState({metas:e})}},{key:"render",value:function(){var e=this.state,t=(e.profile,e.metas),n=e.name,a=e.avatar,i=e.surename;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(je,{name:n,avatar:a,surename:i,metas:t,onDrop:this.onDrop,removeActual:this.removeActual,submitFields:this.submitFields,submit:this.submit,editing:!0,handleChangeValueFields:this.handleChangeValueFields,handleChange:this.handleChangeValue}))}}]),t}(a.Component),Ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.getInstance=e.getInstance.bind(Object(h.a)(e)),e.onDrop=e.onDrop.bind(Object(h.a)(e)),e.state={name:null,surename:null,token:window.localStorage.getItem("token"),profile:null,id:null,pictures:[],avatar:null},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.setInstance),w.on("file_posted",this.getInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.setInstance),w.removeListener("file_posted",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.$f7route.params.profileId&&C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"onDrop",value:function(e){console.log(e[0]),O("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){_("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({id:e.id,profile:e,name:e.name,surename:e.surename,avatar:e.avatar})}},{key:"render",value:function(){var e=this.state,t=e.profile,n=e.name,a=e.surename,i=e.avatar;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(je,{profile:t,name:n,avatar:i,surename:a,onDrop:this.onDrop,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(a.Component);function xe(){var e=this;L.init({debug:"all",callback:function(){var t=new L({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),L.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){L.error("  -- Error attaching plugin...",e)},consentDialog:function(e){L.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){L.log("ICE state changed to "+e)},mediaState:function(e,t){L.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){L.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){L.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(L.debug("Event: "+a),a)if("joined"===a){if(t.id&&(e.setState({myid:t.id}),L.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){L.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!1},jsep:t})},error:function(e){L.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){var o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;e.addParticipant(r[i].id,r[i].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),L.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),L.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)L.warn("The room has been destroyed!");else if("event"===a){if(t.participants){r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;L.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")"),e.addParticipant(r[i].id,r[i].display)}}else if(t.error)return void t.error_code;if(t.leaving){var d=t.leaving;L.log("Participant left: "+d+" elements with ID #rp"+d+")")}}n&&(L.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(e){L.debug(" ::: Got a local stream :::",e)},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),L.attachMediaStream(document.getElementById("roomaudio"),t))},oncleanup:function(){L.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function _e(){var e={request:"join",room:1234,display:this.state.fullname+" \xa7"+this.state.userUUID};this.state.mixertest.send({message:e})}function Ie(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],role:"listener"})}),console.log("participant added:",n[1])}function De(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}var Te=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).sessionCreate=xe.bind(Object(h.a)(e)),e.registerUsername=_e.bind(Object(h.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(h.a)(e)),e.getInstance=e.getInstance.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.addParticipant=Ie.bind(Object(h.a)(e)),e.exisitingParticipant=De.bind(Object(h.a)(e)),e.state={token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+L.randomString(12),roomId:1234,webrtcUp:null,myusername:null,mixertest:null,myid:null,mystream:null,pin:null,userUUID:null,fullname:null,isOwner:!1,muted:!0,participants:[],room:null,notification:{},chats:[],panelOpen:!1},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.setInstance),window.removeEventListener("beforeunload",this.unPublishData)}},{key:"componentDidMount",value:function(){C("rooms",this.$f7route.params.roomId,this.state.token),window.addEventListener("beforeunload",this.unPublishData),window.innerWidth>960&&(this.setState({panelOpen:!0}),console.log(">960"));var e=this.$f7;console.log("props",e.panel.get("#panel-r"))}},{key:"submitParticipation",value:function(e){x("participations",{room_id:this.state.id,activity:e},this.state.token)}},{key:"getInstance",value:function(){var e=this,t=w.getIntance(),n=w.getKlass();t&&"Room"===n&&this.setState({room:t,id:t.id,roomId:t.room_id,pin:t.pin,fullname:t.user_fullname,title:t.title,isOwner:t.is_owner},(function(){return e.submitParticipation("joined")})),console.log(t)}},{key:"pageAfterIn",value:function(){this.sessionCreate()}},{key:"setInstance",value:function(){var e=this,t=w.getIntance(),n=w.getKlass();t&&"Participation"===n&&this.setState({userUUID:t.uuid},(function(){return e.pageAfterIn()})),console.log(t)}},{key:"render",value:function(){var e=this.state,t=(e.token,e.shortners,e.urls,e.publishedMicrophone,e.publishedCamera,e.publishedDesktop,e.feeds,e.muted,e.lowFeeds,e.requests,e.participants),n=(e.room,e.notification,e.chats,e.isOwner,e.roomId,e.panelOpen);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{participants:t,panelOpen:n}))}}]),t}(r.a.Component),Re=n(222),Ae=n.n(Re),Me=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.sign_up},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,{className:"mh-auto"},r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.e,{fill:!0,className:"fs-11 external f-color-black bg-teal",href:"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Ftavan.ut.ac.ir%2Fusers%2Fservice",animate:!1,ignoreCache:!0},$.cas," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},Pe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.state={token:window.localStorage.getItem("token"),email:"",password:""},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.$f7route.params.token&&x("users/validate_token",{},this.$f7route.params.token),this.state.token&&this.state.token.length>10&&x("users/validate_token",{},this.state.token)}},{key:"submit",value:function(){x("users/login",{email:this.state.email,password:this.state.password})}},{key:"setInstance",value:function(){var e=w.getKlass();"Login"===e&&this.$f7router.navigate("/verification/"+this.state.email),"Validate"===e&&(this.$f7router.navigate("/"),window.location.reload()),console.log(e)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Me,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ue=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.state={email:"",password:""},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){x("users/validate_token",{},this.$f7route.params.token)}},{key:"setInstance",value:function(){var e=w.getIntance();"Validate"===w.getKlass()?(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload()):(this.$f7router.navigate("/login_error/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Me,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ve=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.sign_up},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.sign_up),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.firstname+" *",placeholder:$.enter_your_name,type:"text",name:be.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.p,{label:$.surename+" *",placeholder:$.enter_your_surename,type:"text",name:be.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({surename:t.target.value})}}),r.a.createElement(c.p,{label:" * "+$.email,type:"email",validate:!0,placeholder:$.enter_your_email,className:"ltr",value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/login/"},$.if_registered,"\xa0",$.you_can_login," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.sign_up))))},Le=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.state={email:"",name:"",surename:""},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={email:this.state.email,name:this.state.name,surename:this.state.surename};if(this.state.email&&this.state.email.length>0&&this.state.name&&this.state.name.length>0&&this.state.surename&&this.state.surename.length>0)x("users/sign_up",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"setInstance",value:function(){"SignUp"===w.getKlass()&&(this.$$(".btn").show(),this.$f7router.navigate("/verification/"+this.state.email))}},{key:"handleChangeValue",value:function(e){this.setState(e),console.log(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Ve,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ne=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.verification},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}),r.a.createElement(c.p,{label:$.verification_code,type:"text",placeholder:$.enter_verification_code,onInput:function(t){e.handleChange({verificationCode:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},$e=[{path:"/",component:pe},{path:"/login/",component:Pe},{path:"/sign_up/",component:Le},{path:"/verification/:email",component:function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.state={verificationCode:"",email:""},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.setState({email:this.$f7route.params.email})}},{key:"submit",value:function(){x("users/verify",{verification_code:this.state.verificationCode})}},{key:"setInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Verify"==t&&(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state,t=(e.username,e.email);return r.a.createElement(Ne,{submit:this.submit,email:t,handleChange:this.handleChangeValue})}}]),t}(r.a.Component)},{path:"/login_jwt/:token",component:Ue},{path:"/profiles/",component:ke},{path:"/profiles/:profileId/edit",component:Ce},{path:"/profiles/new",component:Oe},{path:"/profiles/:profileId",component:fe},{path:"/rooms/",component:Ae.a},{path:"/rooms/:roomId",component:Te},{path:"(.*)",component:function(){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:"Not found",backLink:"Back"}),r.a.createElement(c.b,{strong:!0},r.a.createElement("p",null,"Sorry"),r.a.createElement("p",null,"Requested content not found.")))}}];function Be(){var e=this;L.init({debug:"all",callback:function(){var t=new L({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),L.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){L.error("  -- Error attaching plugin...",e)},consentDialog:function(e){L.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){L.log("ICE state changed to "+e)},mediaState:function(e,t){L.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){L.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){L.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(L.debug("Event: "+a),a)if(console.log(a,t),"talking"==a&&e.participantChangeStatus(t.id,"talking"),"stopped-talking"==a&&e.participantChangeStatus(t.id,"stopped-talking"),"joined"===a){if(t.id&&(e.setState({myid:t.id}),L.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){L.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!0},jsep:t})},error:function(e){L.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){var o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;console.log("%%%%%%%%",r[i]),e.addParticipant(r[i].id,r[i].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),L.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;console.log(">>>>>>",r[i]),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),L.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)L.warn("The room has been destroyed!");else if("event"===a){if(console.log("Participant...",t),t.participants){r=t.participants;for(var i in L.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;var d=r[i].talking;L.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")"),console.log("%%%%%%%%",r),d&&console.log("%%%%%%%%",r[i].id,"is talking ..."),l&&e.participantChangeStatus(r[i].id,"stopped-talking"),e.addParticipant(r[i].id,r[i].display)}}else if(t.error)return void t.error_code;if(t.leaving){var u=t.leaving;e.removeParticipant(u),L.log("Participant left: "+u+" elements with ID #rp"+u+")")}}n&&(L.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(t){L.debug(" ::: Got a local stream :::",t),console.log("Local stream ******",t),console.log("Local stream ******",t.getTracks()),e.setState({localStream:t})},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),L.attachMediaStream(document.getElementById("roomaudio"),t),e.setState({remoteStream:t}))},oncleanup:function(){L.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function We(){var e={request:"join",room:this.state.roomId,pin:this.state.pin,display:this.state.fullname+" \xa7"+this.state.userUUID+"\xa7"+this.state.userColor};this.state.mixertest.send({message:e}),this.setState({myId:this.state.mixertest.id})}function ze(e){this.setState({participants:this.state.participants.filter((function(t){return t.id!==e}))})}function Fe(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],userColor:n[2],role:"listener",current:"stopped-talking"})}),console.log("participant added:",n[1])}function He(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}function qe(e){var t=this.state.participants.filter((function(t){return t.uuid===e}));return 0===t.length?"":t[0].display}function Je(e,t){console.log(e,t);var n=this,a=n.state.participants;if(a.length>0)for(var r=0;r<a.length;r++)if(console.log(a[r].id),a[r].id==e){var i=Object.assign({},n.state);i.participants[r]={id:a[r].id,display:a[r].display,uuid:a[r].uuid,userColor:a[r].userColor,role:a[r].role,current:t},n.setState(i,(function(){return console.log(n.state.participants)}))}}function Ge(){this.state.mixertest.send({message:{request:"configure",muted:this.state.muted}}),this.participantChangeStatus(this.state.myId,"stopped-talking")}function Ke(){this.state.mixertest.send({message:{request:"configure",muted:!0}}),this.participantChangeStatus(this.state.myId,"stopped-talking")}function Ze(){this.state.mixertest&&this.state.mixertest.send({message:{request:"unpublish"}})}var Ye=n(223),Qe=n.n(Ye).a.connect(S.socketIOServer,{transports:["websocket"],secure:!0,reconnect:!0,rejectUnauthorized:!1});function Xe(e){var t=this,n=new ne.IonSFUJSONRPCSignal(S.ionSignalServer);t.setState({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},signal:n},(function(){var n=new te.Client(t.state.signal,t.state.config);t.setState({clientLocal:n},(function(){t.state.signal.onopen=function(){return t.state.clientLocal.join("room"+e)},t.state.clientLocal.ontrack=function(e,n){console.log(e,n),console.log("got track",e.id,"for stream",n.id),"video"===e.kind&&(e.onunmute=function(){0==t.state.streams.filter((function(e){return e.id===n.id})).length&&t.setState({streams:t.state.streams.concat(n),ionActive:!0},(function(){console.log("Streams are ...",t.state.streams)})),n.onremovetrack=function(){console.log("Stream owner left"),t.setState({streams:t.state.streams.filter((function(e){return e.id!==n.id}))},(function(){0!=t.state.streams.length||t.state.media||t.setState({ionActive:!1})})),t.$$("#remoteVideos").remove(),t.$$("#videos").append("<div id='remoteVideos'></div>")}})}}))}))}function et(){var e=this,t=this;te.LocalStream.getUserMedia({resolution:"vga",video:!0,audio:!1}).then((function(n){t.setState({media:n,ionActive:!0});var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width="320",t.state.clientLocal.publish(n),console.log(n),t.$$("#selfVideos").append(a),t.$$("#videoLoaderIcon").hide(),t.$$("#disableVideo").show(),Qe.emit("ionSetSlot",{slot:e.state.slot,stream:n.id}),n.getVideoTracks()[0].onended=function(){t.ionUnPublish()}})).catch(console.error)}function tt(){var e=this,t=this;if(this.state.streams)return this.state.streams.map((function(n){if(console.log("Attaching to stream ...",n),t.state.media&&n.id===t.state.media.id);else if(0==e.$$("#"+n.id).length){var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width="320",a.id=n.id,console.log("Trying to attach to",n.id),e.$$("#remoteVideos").append(a)}})),[]}function nt(){var e=this;this.state.media.unpublish(),this.state.media.getTracks().forEach((function(e){return e.stop()})),this.$$("#selfVideos").remove(this.state.media.id),this.$$("#videos").append("<div id='selfVideos'></div>"),Qe.emit("ionRelSlot",{stream:this.state.media.id}),this.setState({media:null},(function(){0!=e.state.streams.length||e.state.media||e.setState({ionActive:!1,videoState:"initial"})})),this.setState({videoState:"initial"})}function at(){var e=this;return e.state.media?r.a.createElement("a",{id:"disableVideo",onClick:function(){return e.ionUnPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"1px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M15 11v-1l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -.675 .946"}),r.a.createElement("path",{d:"M10 6h3a2 2 0 0 1 2 2v3m0 4v1a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h1"})))):r.a.createElement("a",{id:"enableVideo",fill:!0,onClick:function(){return e.ionRequestRoom()}},r.a.createElement("div",{style:{float:"right",paddingTop:"3px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"18",height:"18",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"}),r.a.createElement("line",{x1:"7",y1:"12",x2:"11",y2:"12"}),r.a.createElement("line",{x1:"9",y1:"10",x2:"9",y2:"14"}))))}function rt(e){var t=this;console.log(e.target.value),this.setState({display:e.target.value},(function(){console.log("Display:"+t.state.display)}))}function it(){var e=this,t=new ne.IonSFUJSONRPCSignal(S.ionSignalServer);e.setState({screenConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},screenSignal:t},(function(){var t=new te.Client(e.state.screenSignal,e.state.screenConfig);e.setState({screenClientLocal:t},(function(){e.state.screenSignal.onopen=function(){return e.state.screenClientLocal.join("screen room")},e.state.screenClientLocal.ontrack=function(t,n){console.log("got track",t.id,"for stream",n.id),"video"===t.kind&&(t.onunmute=function(){0==e.state.screenStreams.filter((function(e){return e.id===n.id})).length&&e.setState({screenStreams:e.state.screenStreams.concat(n),screenActive:!0},(function(){})),n.onremovetrack=function(){console.log("Stream owner left"),e.setState({screenStreams:e.state.screenStreams.filter((function(e){return e.id!==n.id}))},(function(){0!=e.state.screenStreams.length||e.state.screenMedia||e.setState({screenActive:!1})})),e.$$("#remotes").remove(),e.$$("#screen").append("<div id='remotes'></div>")}})}}))}))}function ot(){var e=this,t=this;te.LocalStream.getDisplayMedia({resolution:"vga",frameRate:15,audio:!1}).then((function(n){console.log(n),e.setState({screenMedia:n,screenActive:!0});var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width=e.$$("#screen").width()-20,e.state.screenClientLocal.publish(n),e.$$("#remotes").append(a),n.getVideoTracks()[0].onended=function(){t.screenUnPublish()},t.scrollTo("#screen")})).catch(console.error)}function st(){var e=this,t=this;if(this.state.screenStreams)return this.state.screenStreams.map((function(n){if(0==e.$$("#"+n.id).length){console.log("Going to show",n.id);var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width=e.$$("#screen").width()-20,a.id=n.id,e.$$("#remotes").append(a),t.scrollTo("#screen")}})),[]}function ct(){var e=this;this.state.screenMedia.unpublish(),this.state.screenMedia.getTracks().forEach((function(e){return e.stop()})),this.$$("#remotes").remove(this.state.screenMedia.id),this.$$("#screen").append("<div id='remotes'></div>"),this.setState({screenMedia:null},(function(){0!=e.state.screenStreams.length||e.state.screenMedia||e.setState({screenActive:!1})}))}function lt(){var e=this;return this.state.screenMedia?r.a.createElement("a",{onClick:function(){return e.screenUnPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 8l4 -4m-4 0l4 4"})))):r.a.createElement("a",{fill:!0,onClick:function(){return e.screenStart()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))))}var dt=new g.w3cwebsocket(S.socketServer),ut=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).setParticipants=e.setParticipants.bind(Object(h.a)(e)),e.sessionCreate=Be.bind(Object(h.a)(e)),e.registerUsername=We.bind(Object(h.a)(e)),e.participantChangeStatus=Je.bind(Object(h.a)(e)),e.participantDisplay=qe.bind(Object(h.a)(e)),e.forceMute=Ke.bind(Object(h.a)(e)),e.addParticipant=Fe.bind(Object(h.a)(e)),e.exisitingParticipant=He.bind(Object(h.a)(e)),e.toggleMute=Ge.bind(Object(h.a)(e)),e.getJsonFromUrl=e.getJsonFromUrl.bind(Object(h.a)(e)),e.wsSend=e.wsSend.bind(Object(h.a)(e)),e.ionSessionCreate=Xe.bind(Object(h.a)(e)),e.ionStart=et.bind(Object(h.a)(e)),e.ionVideos=tt.bind(Object(h.a)(e)),e.ionUnPublish=nt.bind(Object(h.a)(e)),e.ionPublishBtn=at.bind(Object(h.a)(e)),e.ionDisplay=rt.bind(Object(h.a)(e)),e.screenSessionCreate=it.bind(Object(h.a)(e)),e.screenStart=ot.bind(Object(h.a)(e)),e.screenVideos=st.bind(Object(h.a)(e)),e.screenUnPublish=ct.bind(Object(h.a)(e)),e.screenPublishBtn=lt.bind(Object(h.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(h.a)(e)),e.login=e.login.bind(Object(h.a)(e)),e.setInstance=e.setInstance.bind(Object(h.a)(e)),e.newComerReset=e.newComerReset.bind(Object(h.a)(e)),e.toggleMicrophone=e.toggleMicrophone.bind(Object(h.a)(e)),e.uploader=e.uploader.bind(Object(h.a)(e)),e.getInstance=e.getInstance.bind(Object(h.a)(e)),e.recentUpload=e.recentUpload.bind(Object(h.a)(e)),e.revertUndo=e.revertUndo.bind(Object(h.a)(e)),e.revertTrash=e.revertTrash.bind(Object(h.a)(e)),e.exitAudioRoom=Ze.bind(Object(h.a)(e)),e.removeParticipant=ze.bind(Object(h.a)(e)),e.uploadedRecentlyReset=e.uploadedRecentlyReset.bind(Object(h.a)(e)),e.extractAction=e.extractAction.bind(Object(h.a)(e)),e.logout=e.logout.bind(Object(h.a)(e)),e.signUp=e.signUp.bind(Object(h.a)(e)),e.scrollTo=e.scrollTo.bind(Object(h.a)(e)),e.appendChat=e.appendChat.bind(Object(h.a)(e)),e.chatDeactive=e.chatDeactive.bind(Object(h.a)(e)),e.appendLink=e.appendLink.bind(Object(h.a)(e)),e.socketHandle=e.socketHandle.bind(Object(h.a)(e)),e.togglePresenter=e.togglePresenter.bind(Object(h.a)(e)),e.ionRequestRoom=e.ionRequestRoom.bind(Object(h.a)(e)),e.toggleRole=e.toggleRole.bind(Object(h.a)(e)),e.connectSocketRoom=e.connectSocketRoom.bind(Object(h.a)(e)),e.participantRole=e.participantRole.bind(Object(h.a)(e)),e.handRaise=e.handRaise.bind(Object(h.a)(e)),e.handRaised=e.handRaised.bind(Object(h.a)(e)),e.state={participants:[],token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+L.randomString(12),roomId:null,pin:"c13eab83262202c2840a",myId:null,isAdmin:!1,webrtcUp:null,myusername:null,mixertest:null,fullname:null,userUUID:null,line:null,currentTab:null,currentPoint:null,quillDelta:null,cursorRange:null,newCursor:null,client:null,clients:[],typing:null,loginScreenOpened:!0,username:"",pass:"",name:null,newComerLength:null,contentSync:null,wsConnected:!1,muted:!0,progressShow:!1,progress:null,upload:null,page:null,undoVector:null,trash:!1,userColor:Z()({luminosity:"dark",hue:"random",alpha:.6}),uploadedRecently:!1,remoteStream:null,localStream:null,chats:[],action:null,signingUp:!1,email:null,password:null,passwordConfirmation:null,signal:null,config:null,clientLocal:null,streams:[],media:null,display:1,ionActive:!1,screenSignal:null,screenConfig:null,screenClientLocal:null,screenStreams:[],screenMedia:null,screenActive:!1,chatActive:!1,srcLink:null,converterCounter:0,presenters:[],roles:[],isPresenter:!1,isSpeaker:!1,isWriter:!1,handRaisings:[],slot:null,videoState:"initial"},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"setParticipants",value:function(){}},{key:"toggleMicrophone",value:function(){var e=this;this.setState({muted:!this.state.muted},(function(){e.toggleMute()}))}},{key:"togglePresenter",value:function(e){}},{key:"toggleRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"single";console.log(e,t,this.participantRole(e)),this.participantRole(e)===t&&(t="not"+t);var a={uuid:e,role:t,domain:n};Qe.emit("changeRole",a);var r=this.state.roles;if(r.length>0)for(var i=0;i<r.length;i++)if(r[i].uuid&&r[i].uuid===e){var o=Object.assign({},this.state);o.roles[i]=a,this.setState(o)}else this.setState({roles:this.state.roles.concat(a)});else this.setState({roles:this.state.roles.concat(a)})}},{key:"participantRole",value:function(e){var t=this.state.roles.filter((function(t){return t.uuid===e}));return t&&t[0]&&t[0].role?t[0].role:""}},{key:"handRaise",value:function(e){var t={uuid:e.raiserUUID,status:e.status},n=this.state.handRaisings;if(n.length>0)for(var a=0;a<n.length;a++)if(n[a].uuid&&n[a].uuid===e.raiserUUID){var r=Object.assign({},this.state);r.handRaisings[a]=t,this.setState(r)}else this.setState({handRaisings:this.state.handRaisings.concat(t)});else this.setState({handRaisings:this.state.handRaisings.concat(t)})}},{key:"handRaised",value:function(e){console.log(this.state.handRaisings);for(var t=!1,n=this.state.handRaisings,a=0;a<n.length;a++)if(n[a].uuid&&n[a].uuid===e&&"raised"===n[a].status&&(t=!0),a===n.length-1)return t}},{key:"wsSend",value:function(e){e.room=this.state.roomId,e.sender=this.state.userUUID,Qe.emit("message",e)}},{key:"componentDidMount",value:function(){var e=this;C("uploads/recent",1,this.state.token);this.$f7;C("rooms/last",1,this.state.token),this.state.token&&this.state.token.length>10&&(x("users/validate_token",{},this.state.token),this.setState({loginScreenOpened:!1})),e.screenSessionCreate(),Qe.on("connect",(function(){e.state.roomId&&Qe.emit("room",{room:e.state.roomId.toString(),uuid:e.state.userUUID})})),Qe.on("message",(function(t){t.sender!==e.state.userUUID&&e.socketHandle(t)})),Qe.on("ionSlot",(function(t){e.ionSessionCreate(t.slot),e.setState({slot:t.slot}),setTimeout((function(){return e.ionStart()}),7e3),console.log(">>>>>!!!",t.slot)}))}},{key:"ionRequestRoom",value:function(){var e=this;this.$$("#videoLoaderIcon").show(),this.$$("#enableVideo").hide(),"initial"==this.state.videoState&&this.setState({videoState:"requested"},(function(){Qe.emit("ionReqSlot",{uuid:e.state.userUUID}),console.log("ionReqSlot")}))}},{key:"extractAction",value:function(){var e=this.getJsonFromUrl(this.$f7.view[0].history[0]);e&&e.action?this.setState({action:e.action}):this.setState({action:"room"})}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance),w.removeListener("got_instance",this.getInstance)}},{key:"newComerReset",value:function(){this.setState({newComerLength:null})}},{key:"uploadedRecentlyReset",value:function(){this.setState({uploadedRecently:!1})}},{key:"logout",value:function(){this.setState({token:null}),this.exitAudioRoom(),setTimeout((function(){window.localStorage.removeItem("token"),window.location.replace("/")}),1e3)}},{key:"uploader",value:function(e){var t=this,n=this;console.log(e),n.setState({progressShow:!0},(function(){return console.log(t.state.progressShow)}));var a={onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);console.log(t),n.setState({progress:t})},headers:{"Content-Type":"application/json",Authorization:"bearer "+n.state.token}},r=new FormData;r.append("upload[attached_document]",e),r.append("upload[room_id]",1),k.a.post(S.server+"/uploads",r,a).then((function(e){n.setState({progressShow:!1,uploadedRecently:!0}),C("uploads/recent",1,t.state.token)})).catch((function(e){return n.setState({progressShow:!1})}))}},{key:"recentUpload",value:function(){console.log("recentUpload Called ..."),this.setState({progressShow:!0}),C("uploads/recent",1,this.state.token)}},{key:"revertUndo",value:function(){this.setState({undo:null})}},{key:"revertTrash",value:function(){this.setState({trash:!1})}},{key:"scrollTo",value:function(e){var t=this.$$(e).offset();this.$$(".page-content").scrollTop(t.top,350)}},{key:"appendChat",value:function(e){console.log(e);var t=this.state.chats.filter((function(t){return t.uuid===e.uuid}));console.log(t),t&&0===t.length&&(this.state.chats&&this.state.chats.length>50?this.setState({chats:this.state.chats.slice(1).concat(e)}):this.setState({chats:this.state.chats.concat(e)}),this.state.chatActive||this.setState({chatActive:!0}))}},{key:"chatDeactive",value:function(){this.setState({chatActive:!1})}},{key:"appendLink",value:function(e){this.setState({srcLink:e})}},{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance),w.on("got_instance",this.getInstance)}},{key:"socketHandle",value:function(e){console.log(e);var t=e;switch(t.type){case"room":console.log("client",t.c),this.setState({client:t.c});break;case"presenter":console.log(),t.c.presenterUUID==this.state.userUUID&&this.setState({isPresenter:!0});break;case"changeRole":console.log(),"all"!=t.c.domain&&t.c.roleUUID!=this.state.userUUID||("presenter"==t.c.role&&this.setState({isPresenter:!0,isSpeaker:!1,isWriter:!1}),"speaker"==t.c.role&&this.setState({isSpeaker:!0,isPresenter:!1}),"writer"==t.c.role&&this.setState({isWriter:!0,isPresenter:!1}),"notpresenter"==t.c.role&&this.setState({isPresenter:!1}),"notwriter"==t.c.role&&this.setState({isWriter:!1}),"notspeaker"==t.c.role&&(this.forceMute(),this.setState({isSpeaker:!1})));break;case"handRaise":this.handRaise(t.c);break;case"srcLink":this.appendLink(t.c);break;case"chat":this.appendChat(t.c);break;case"page":this.setState({page:t.c});break;case"undo":this.setState({undoVector:t.c});break;case"trash":this.setState({trash:!0});break;case"newUpload":this.recentUpload();break;case"contentSync":this.setState({contentSync:t.c});break;case"newComer":console.log("newComer",t.c),this.setState({newComerLength:t.c});break;case"newCursor":this.setState({newCursor:t.c});break;case"typing":this.setState({typing:t.c});break;case"point":this.setState({currentPoint:t.c});break;case"quill":this.setState({quillDelta:t.c});break;case"cursor":this.setState({cursorRange:t.c});break;case"line":this.setState({line:t.c});break;case"tab":this.setState({currentTab:t.current})}}},{key:"maintainWS",value:function(){var e=this;dt.onopen=function(){dt.send(JSON.stringify({type:"room",id:1234})),e.setState({wsConnected:!0})},dt.onclose=function(){e.setState({wsConnected:!1})},dt.onmessage=function(t){var n={};switch(t.data&&t.data.length>0&&(n=JSON.parse(t.data)),n.type){case"room":console.log("client",n.c),e.setState({client:n.c});break;case"srcLink":e.appendLink(n.c);break;case"chat":e.appendChat(n.c);break;case"page":e.setState({page:n.c});break;case"undo":e.setState({undoVector:n.c});break;case"trash":e.setState({trash:!0});break;case"newUpload":e.recentUpload();break;case"contentSync":e.setState({contentSync:n.c});break;case"newComer":console.log("newComer",n.c),e.setState({newComerLength:n.c});break;case"newCursor":e.setState({newCursor:n.c});break;case"typing":e.setState({typing:n.c});break;case"point":e.setState({currentPoint:n.c});break;case"quill":e.setState({quillDelta:n.c});break;case"cursor":e.setState({cursorRange:n.c});break;case"line":e.setState({line:n.c});break;case"tab":e.setState({currentTab:n.current})}}}},{key:"getJsonFromUrl",value:function(e){if(!e||!e.split("?")||!e.split("?")[1])return[];var t=e.split("?")[1],n={};return t.split("&").forEach((function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])})),n}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"login",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={name:this.state.name,user:{email:this.state.email,password:this.state.password}};if(this.state.email&&this.state.email.length>0)this.state.signingUp?x("users/sign_up",e):x("users/login",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"signUp",value:function(){this.setState({signingUp:!0})}},{key:"setInstance",value:function(){var e=this,t=w.getKlass(),n=w.getIntance();!n||"SignUp"!==t&&"Login"!==t||(window.localStorage.setItem("token",n.token),window.location.reload()),"Validate"===t&&(console.log("registering name ..."),this.setState({name:n.name,fullname:n.name,userUUID:n.uuid},(function(){e.connectSocketRoom()}))),console.log(n,t)}},{key:"getInstance",value:function(){var e=this,t=this,n=w.getIntance(),a=w.getKlass();n&&"Upload"===a&&this.setState({model:n},(function(){!n.converted&&t.state.converterCounter<10?(console.log("Cheking for conversion ..."),setTimeout((function(){return e.recentUpload()}),1e4),e.setState({converterCounter:t.state.converterCounter+1})):e.setState({progressShow:!1})})),n&&"Room"===a&&this.setState({roomId:n.room_id,pin:n.pin,isAdmin:n.is_admin,isPresenter:n.is_admin},(function(){t.sessionCreate(),t.connectSocketRoom()})),console.log(n,a)}},{key:"connectSocketRoom",value:function(){this.state.userUUID&&this.state.roomId&&(Qe.emit("room",{room:this.state.roomId,uuid:this.state.userUUID}),console.log("*******",this.state.roomId,this.state.userUUID))}},{key:"currentPage",value:function(){}},{key:"render",value:function(){var e=this,t={id:"io.framework7.testapp",name:"Framework7",theme:"aurora",panel:{rightBreakpoint:960},view:{},routes:$e},n=this.state,a=n.line,i=n.currentTab,o=n.currentPoint,s=n.quillDelta,l=n.cursorRange,d=(n.clients,n.client),u=n.newCursor,m=n.typing,h=n.name,p=n.newComerLength,g=n.contentSync,f=n.muted,v=n.userUUID,b=n.progress,w=n.progressShow,y=n.upload,k=n.page,S=n.undoVector,E=n.trash,j=n.userColor,O=n.participants,C=n.uploadedRecently,x=n.remoteStream,_=n.localStream,I=n.chats,D=n.email,T=n.password,R=n.passwordConfirmation,A=n.signingUp,M=n.ionActive,P=n.screenActive,U=n.srcLink,V=n.isAdmin,L=n.chatActive,N=n.isPresenter,$=n.isSpeaker,B=n.isWriter,W=n.roles,z=n.handRaisings;return r.a.createElement(c.a,{params:t},r.a.createElement(c.v,{resizable:!0,left:!0,cover:!0},r.a.createElement(c.B,null,r.a.createElement(ue,{wsSend:this.wsSend,chats:I,appendChat:this.appendChat,userUUID:v,name:h,participantDisplay:this.participantDisplay,isAdmin:V,chatDeactive:this.chatDeactive}))),r.a.createElement(c.v,{resizable:!0,right:!0,themeDark:!0},r.a.createElement(c.B,null,r.a.createElement(se,{participants:O,handleChangeValue:this.handleChangeValue,muted:f,userUUID:v,toggleMicrophone:this.toggleMicrophone,userColor:j,logout:this.logout,scrollTo:this.scrollTo,ionPublishBtn:this.ionPublishBtn,screenPublishBtn:this.screenPublishBtn,ionActive:M,screenActive:P,isAdmin:V,chatActive:L,chatDeactive:this.chatDeactive,togglePresenter:this.togglePresenter,isPresenter:N,toggleRole:this.toggleRole,isSpeaker:$,isWriter:B,roles:W,participantRole:this.participantRole,wsSend:this.wsSend,handRaisings:z,handRaised:this.handRaised,handRaise:this.handRaise}))),r.a.createElement(c.B,{id:"main-view",url:"",pushState:!0,main:!0,className:"safe-areas"},r.a.createElement(oe,{wsSend:this.wsSend,line:a,currentTab:i,currentPoint:o,quillDelta:s,cursorRange:l,client:d,typing:m,newCursor:u,name:h,newComerLength:p,contentSync:g,newComerReset:this.newComerReset,uploader:this.uploader,progress:b,progressShow:w,upload:y,recentUpload:this.recentUpload,page:k,undoVector:S,revertUndo:this.revertUndo,trash:E,revertTrash:this.revertTrash,userColor:j,participants:O,userUUID:v,uploadedRecently:C,uploadedRecentlyReset:this.uploadedRecentlyReset,remoteStream:x,localStream:_,ionVideos:this.ionVideos,ionActive:M,screenVideos:this.screenVideos,screenActive:P,appendLink:this.appendLink,srcLink:U,isAdmin:V,isPresenter:N,isWriter:B}),r.a.createElement(c.r,{className:"demo-login-screen",opened:this.state.loginScreenOpened,onLoginScreenClosed:function(){e.handleChangeValue({loginScreenOpened:!1})}},r.a.createElement(me,{email:D,handleChangeValue:this.handleChangeValue,name:h,password:T,passwordConfirmation:R,login:this.login,signUp:this.signUp,signingUp:A}))))}}]),t}(r.a.Component);n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)})),s.a.use(c.C),o.a.render(r.a.createElement(ut),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.de06fbb6.chunk.js.map