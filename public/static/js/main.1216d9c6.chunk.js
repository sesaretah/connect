(window["webpackJsonpd1-react"]=window["webpackJsonpd1-react"]||[]).push([[0],{222:function(e,t){},225:function(e,t,n){e.exports=n(493)},409:function(e,t){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},488:function(e,t,n){},490:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),s=n(39),c=n(9),l=n(3),d=n(6),u=n(1),m=n(4),p=n(2),h=n(5),f=n(200),g=(n(234),n(201)),v=new(n(202).Dispatcher),b=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).list=[],e.multipleList=[],e.instance=null,e.klass=null,e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"listModel",value:function(e){this.list=[],this.klass=e.klass;for(var t=0,n=e.data.length;t<n;++t)this.list.push(e.data[t]),t===n-1&&this.emit("got_list");0==e.data.length&&this.emit("got_list")}},{key:"listMultipleModel",value:function(e){console.log(e),this.multipleList=e.data,this.klass=e.klass,this.emit("got_multiple_list")}},{key:"showIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("got_instance")}},{key:"setIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("set_instance")}},{key:"deleteIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("deleted_instance")}},{key:"postFile",value:function(e){console.log(e),this.klass=e.klass,this.instance=e.data,this.emit("file_posted")}},{key:"getIntance",value:function(){return this.instance}},{key:"getList",value:function(){return this.list}},{key:"getMutipleList",value:function(){return this.multipleList}},{key:"getListnKlass",value:function(){return[this.list,this.klass]}},{key:"getKlass",value:function(){return this.klass}},{key:"handleActions",value:function(e){switch(e.type){case"LIST_MODEL_SUCCESS":this.listModel(e.list);break;case"MULTIPLE_LIST_MODEL_SUCCESS":this.listMultipleModel(e.list);break;case"GET_INSTANCE_SUCCESS":this.showIntance(e.instance);break;case"DELETE_INSTANCE_SUCCESS":this.deleteIntance(e.instance);break;case"SET_INSTANCE_SUCCESS":this.setIntance(e.instance);break;case"POST_FILE_SUCCESS":this.postFile(e.instance)}}}]),t}(g.EventEmitter));v.register(b.handleActions.bind(b));var y=b,w=n(40),k=n.n(w),S={server:"/v1",socketIOServer:"https://connect.ut.ac.ir/",socketServer:"wss://kaarafarinan.ir/ws",ionSignalServer:"wss://kaarafarinan.ir:7000/ws",janusServer:"https://kaarafarinan.ir:8089/janus"},j=S.server;function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(j+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){v.dispatch({type:"LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}function E(e,t,n,a){var r=j+"/"+e+"/"+t,i=new FormData;i.append("profile[avatar]",n),i.append("profile[id]",t);var o={headers:{"content-type":"multipart/form-data",Authorization:"bearer "+a}};Object(w.put)(r,i,o).then((function(e){v.dispatch({type:"POST_FILE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function C(e,t,n){k.a.get(j+"/"+e+"/"+t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"GET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function _(e,t,n){k.a.post(j+"/"+e+"/",t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function I(e,t,n){k.a.put(j+"/"+e+"/"+t.id,t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}var T=n(126),x=(n(496),T.initializeApp({apiKey:"AIzaSyAbQ1NDkKB_E_SbfgHY3w-esVWhjwj9DeE",authDomain:"tavan-e768d.firebaseapp.com",databaseURL:"https://tavan-e768d.firebaseio.com",projectId:"tavan-e768d",storageBucket:"tavan-e768d.appspot.com",messagingSenderId:"498708095861",appId:"1:498708095861:web:00428b1330b24e1eece93c",measurementId:"G-55DLXZ4VZY"}));T.messaging.isSupported()&&x.messaging().usePublicVapidKey("BGtSQdySGVQOeOwFha6rSVdmtfIUo_V33Eq-RTRb5kUNLvvwM7AVGCLtChjnGlD50fudRx8D4Aw-7br71Qfefrc");n(142);var D=n(22),A=n.n(D),M=n(133),R=window.RTCRtpTransceiver;V.sessions={},V.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||V.extension.isInstalled()}return!0};var L={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var a=new Error("NavigatorUserMediaError");a.name="You cancelled the request for permission, giving up...",n(a)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function V(e){if((e=e||{}).success="function"==typeof e.success?e.success:V.noop,e.error="function"==typeof e.error?e.error:V.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:V.noop,!V.initDone)return e.error("Library not initialized"),{};if(!V.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(V.log("Library initialized: "+V.initDone),!e.server)return e.error("Invalid server url"),{};var t=!1,n=null,a={},r=null,i=null,o=0,s=e.server;V.isArray(s)?(V.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,i=e.server,V.debug(i)):0===s.indexOf("ws")?(t=!0,V.log("Using WebSockets to contact Janus: "+s)):(t=!1,V.log("Using REST API to contact Janus: "+s));var c=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],l=e.iceTransportPolicy,d=e.bundlePolicy,u=!0===e.ipv6,m=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(m=!0===e.withCredentials);var p=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(p=e.max_poll_events),p<1&&(p=1);var h=null;void 0!==e.token&&null!==e.token&&(h=e.token);var f=null;void 0!==e.apisecret&&null!==e.apisecret&&(f=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var g=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(g=e.keepAlivePeriod),isNaN(g)&&(g=25e3);var v=6e4;function b(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);var y=!1,w=null,k={},S=this,j=0,O={};function E(){if(null!=w)if(V.debug("Long poll..."),y){var t=s+"/"+w+"?rid="+(new Date).getTime();p&&(t=t+"&maxev="+p),h&&(t=t+"&token="+encodeURIComponent(h)),f&&(t=t+"&apisecret="+encodeURIComponent(f)),V.httpAPICall(t,{verb:"GET",withCredentials:m,success:C,timeout:v,error:function(t,n){if(V.error(t+":",n),++j>3)return y=!1,void e.error("Lost connection to the server (is it down?)");E()}})}else V.warn("Is the server down? (connected=false)")}function C(e,a){if(j=0,t||void 0===w||null===w||!0===a||E(),t||!V.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){if(!(c=e.sender))return void V.warn("Missing sender...");if(!(d=k[c]))return void V.debug("This handle is not attached to this session");var r=e.candidate;V.debug("Got a trickled candidate on session "+w),V.debug(r);var i=d.webrtcStuff;i.pc&&i.remoteSdp?(V.debug("Adding remote candidate:",r),r&&!0!==r.completed?i.pc.addIceCandidate(r):i.pc.addIceCandidate(V.endOfCandidates)):(V.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),i.candidates||(i.candidates=[]),i.candidates.push(r),V.debug(i.candidates))}else{if("webrtcup"===e.janus)return V.debug("Got a webrtcup event on session "+w),V.debug(e),(c=e.sender)?(d=k[c])?void d.webrtcState(!0):void V.debug("This handle is not attached to this session"):void V.warn("Missing sender...");if("hangup"===e.janus){if(V.debug("Got a hangup event on session "+w),V.debug(e),!(c=e.sender))return void V.warn("Missing sender...");if(!(d=k[c]))return void V.debug("This handle is not attached to this session");d.webrtcState(!1,e.reason),d.hangup()}else if("detached"===e.janus){if(V.debug("Got a detached event on session "+w),V.debug(e),!(c=e.sender))return void V.warn("Missing sender...");if(!(d=k[c]))return;d.detached=!0,d.ondetached(),d.detach()}else if("media"===e.janus){if(V.debug("Got a media event on session "+w),V.debug(e),!(c=e.sender))return void V.warn("Missing sender...");if(!(d=k[c]))return void V.debug("This handle is not attached to this session");d.mediaState(e.type,e.receiving)}else if("slowlink"===e.janus){if(V.debug("Got a slowlink event on session "+w),V.debug(e),!(c=e.sender))return void V.warn("Missing sender...");if(!(d=k[c]))return void V.debug("This handle is not attached to this session");d.slowLink(e.uplink,e.lost)}else{if("error"===e.janus){var o,s;if(V.error("Ooops: "+e.error.code+" "+e.error.reason),V.debug(e),o=e.transaction)(s=O[o])&&s(e),delete O[o];return}if("event"===e.janus){var c;if(V.debug("Got a plugin event on session "+w),V.debug(e),!(c=e.sender))return void V.warn("Missing sender...");var l=e.plugindata;if(!l)return void V.warn("Missing plugindata...");V.debug("  -- Event is coming from "+c+" ("+l.plugin+")");var d,u=l.data;if(V.debug(u),!(d=k[c]))return void V.warn("This handle is not attached to this session");var m=e.jsep;m&&(V.debug("Handling SDP as well..."),V.debug(m));var p=d.onmessage;p?(V.debug("Notifying application..."),p(u,m)):V.debug("No provided notification callback")}else{if("timeout"===e.janus)return V.error("Timeout on session "+w),V.debug(e),void(t&&n.close(3504,"Gateway timeout"));V.warn("Unknown message/event  '"+e.janus+"' on session "+w),V.debug(e)}}}else V.debug("Got a success on session "+w),V.debug(e),(o=e.transaction)&&((s=O[o])&&s(e),delete O[o]);else V.debug("Got an ack on session "+w),V.debug(e),(o=e.transaction)&&((s=O[o])&&s(e),delete O[o]);else V.debug("Got info on the Janus instance"),V.debug(e),(o=e.transaction)&&((s=O[o])&&s(e),delete O[o]);else V.vdebug("Got a keepalive on session "+w);else for(var h=0;h<e.length;h++)C(e[h],!0)}function _(){if(s&&t&&y){r=setTimeout(_,g);var e={janus:"keepalive",session_id:w,transaction:V.randomString(12)};h&&(e.token=h),f&&(e.apisecret=f),n.send(JSON.stringify(e))}}function I(c){var l=V.randomString(12),d={janus:"create",transaction:l};if(c.reconnect&&(y=!1,d.janus="claim",d.session_id=w,n&&(n.onopen=null,n.onerror=null,n.onclose=null,r&&(clearTimeout(r),r=null))),h&&(d.token=h),f&&(d.apisecret=f),!s&&V.isArray(i)&&(0===(s=i[o]).indexOf("ws")?(t=!0,V.log("Server #"+(o+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,V.log("Server #"+(o+1)+": trying REST API to contact Janus ("+s+")"))),t)for(var u in n=V.newWebSocket(s,"janus-protocol"),a={error:function(){if(V.error("Error connecting to the Janus WebSockets server... "+s),V.isArray(i)&&!c.reconnect)return++o===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){I(c)}),200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){O[l]=function(e){if(V.debug(e),"success"!==e.janus)return V.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);r=setTimeout(_,g),y=!0,w=e.session_id?e.session_id:e.data.id,c.reconnect?V.log("Claimed session: "+w):V.log("Created session: "+w),V.sessions[w]=S,c.success()},n.send(JSON.stringify(d))},message:function(e){C(JSON.parse(e.data))},close:function(){s&&y&&(y=!1,e.error("Lost connection to the server (is it down?)"))}})n.addEventListener(u,a[u]);else V.httpAPICall(s,{verb:"POST",withCredentials:m,body:d,success:function(e){if(V.debug(e),"success"!==e.janus)return V.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);y=!0,w=e.session_id?e.session_id:e.data.id,c.reconnect?V.log("Claimed session: "+w):V.log("Created session: "+w),V.sessions[w]=S,E(),c.success()},error:function(e,t){if(V.error(e+":",t),V.isArray(i)&&!c.reconnect)return++o===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){I(c)}),200));""===t?c.error(e+": Is the server down?"):c.error(e+": "+t)}})}function T(e,a){if((a=a||{}).success="function"==typeof a.success?a.success:V.noop,a.error="function"==typeof a.error?a.error:V.noop,!y)return V.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var r=k[e];if(!r||!r.webrtcStuff)return V.warn("Invalid handle"),void a.error("Invalid handle");var i=a.message,o=a.jsep,c=V.randomString(12),l={janus:"message",body:i,transaction:c};if(r.token&&(l.token=r.token),f&&(l.apisecret=f),o&&(l.jsep={type:o.type,sdp:o.sdp},o.e2ee&&(l.jsep.e2ee=!0),"hml"!==o.rid_order&&"lmh"!==o.rid_order||(l.jsep.rid_order=o.rid_order)),V.debug("Sending message to plugin (handle="+e+"):"),V.debug(l),t)return l.session_id=w,l.handle_id=e,O[c]=function(e){if(V.debug("Message sent!"),V.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return V.warn("Request succeeded, but missing plugindata..."),void a.success();V.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return V.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(V.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(V.error("Unknown error"),a.error("Unknown error"))},void n.send(JSON.stringify(l));V.httpAPICall(s+"/"+w+"/"+e,{verb:"POST",withCredentials:m,body:l,success:function(e){if(V.debug("Message sent!"),V.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return V.warn("Request succeeded, but missing plugindata..."),void a.success();V.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return V.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(V.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(V.error("Unknown error"),a.error("Unknown error"))},error:function(e,t){V.error(e+":",t),a.error(e+": "+t)}})}function x(e,a){if(y){var r=k[e];if(r&&r.webrtcStuff){var i={janus:"trickle",candidate:a,transaction:V.randomString(12)};if(r.token&&(i.token=r.token),f&&(i.apisecret=f),V.vdebug("Sending trickle candidate (handle="+e+"):"),V.vdebug(i),t)return i.session_id=w,i.handle_id=e,void n.send(JSON.stringify(i));V.httpAPICall(s+"/"+w+"/"+e,{verb:"POST",withCredentials:m,body:i,success:function(e){V.vdebug("Candidate sent!"),V.vdebug(e),"ack"===e.janus||V.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){V.error(e+":",t)}})}else V.warn("Invalid handle")}else V.warn("Is the server down? (connected=false)")}function D(e,t,n,a,r){var i=k[e];if(i&&i.webrtcStuff){var o=i.webrtcStuff;if(o.pc){var s=function(e){V.log("Received state change on data channel:",e);var t=e.target.label,n=e.target.protocol,a=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(V.log("State change on <"+t+"> data channel: "+a),"open"===a){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){V.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length);var r=!0,s=!1,c=void 0;try{for(var l,d=o.dataChannel[t].pending[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var u=l.value;V.log("Sending data on data channel <"+t+">"),V.debug(u),o.dataChannel[t].send(u)}}catch(m){s=!0,c=m}finally{try{r||null==d.return||d.return()}finally{if(s)throw c}}o.dataChannel[t].pending=[]}i.ondataopen(t,n)}};if(a)o.dataChannel[t]=a;else{var c={ordered:!0};n&&(c.protocol=n),o.dataChannel[t]=o.pc.createDataChannel(t,c)}o.dataChannel[t].onmessage=function(e){V.log("Received message on data channel:",e);var t=e.target.label;i.ondata(e.data,t)},o.dataChannel[t].onopen=s,o.dataChannel[t].onclose=s,o.dataChannel[t].onerror=function(e){V.error("Got error on data channel:",e)},o.dataChannel[t].pending=[],r&&o.dataChannel[t].pending.push(r)}else V.warn("Invalid PeerConnection")}else V.warn("Invalid handle")}function A(e,t){(t=t||{}).success="function"==typeof t.success?t.success:V.noop,t.error="function"==typeof t.error?t.error:V.noop;var n=k[e];if(!n||!n.webrtcStuff)return V.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff,r=t.text||t.data;if(!r)return V.warn("Invalid data"),void t.error("Invalid data");var i=t.label?t.label:V.dataChanDefaultLabel;return a.dataChannel[i]?"open"!==a.dataChannel[i].readyState?(a.dataChannel[i].pending.push(r),void t.success()):(V.log("Sending data on data channel <"+i+">"),V.debug(r),a.dataChannel[i].send(r),void t.success()):(D(e,i,t.protocol,!1,r,t.protocol),void t.success())}function M(e,t){(t=t||{}).success="function"==typeof t.success?t.success:V.noop,t.error="function"==typeof t.error?t.error:V.noop;var n=k[e];if(!n||!n.webrtcStuff)return V.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff;if(!a.dtmfSender){if(a.pc){var r=a.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return V.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");a.dtmfSender=r.dtmf,a.dtmfSender&&(V.log("Created DTMF Sender"),a.dtmfSender.ontonechange=function(e){V.debug("Sent DTMF tone: "+e.tone)})}if(!a.dtmfSender)return V.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var i=t.dtmf;if(!i)return V.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var o=i.tones;if(!o)return V.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var s="number"===typeof i.duration?i.duration:500,c="number"===typeof i.gap?i.gap:50;V.debug("Sending DTMF string "+o+" (duration "+s+"ms, gap "+c+"ms)"),a.dtmfSender.insertDTMF(o,s,c),t.success()}function R(e,a){(a=a||{}).success="function"==typeof a.success?a.success:V.noop,a.error="function"==typeof a.error?a.error:V.noop;var r=!0===a.noRequest;V.log("Destroying handle "+e+" (only-locally="+r+")"),W(e);var i=k[e];if(!i||i.detached)return delete k[e],void a.success();if(r)return delete k[e],void a.success();if(!y)return V.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var o={janus:"detach",transaction:V.randomString(12)};if(i.token&&(o.token=i.token),f&&(o.apisecret=f),t)return o.session_id=w,o.handle_id=e,n.send(JSON.stringify(o)),delete k[e],void a.success();V.httpAPICall(s+"/"+w+"/"+e,{verb:"POST",withCredentials:m,body:o,success:function(t){V.log("Destroyed handle:"),V.debug(t),"success"!==t.janus&&V.error("Ooops: "+t.error.code+" "+t.error.reason),delete k[e],a.success()},error:function(t,n){V.error(t+":",n),delete k[e],a.success()}})}function L(e,t,n,a,r){var i=k[e];if(!i||!i.webrtcStuff)return V.warn("Invalid handle"),a.stream||V.stopAllTracks(r),void a.error("Invalid handle");var o=i.webrtcStuff;V.debug("streamsDone:",r),r&&(V.debug("  -- Audio tracks:",r.getAudioTracks()),V.debug("  -- Video tracks:",r.getVideoTracks()));var s=!1;if(o.myStream&&n.update&&!o.streamExternal){if((!n.update&&q(n)||n.update&&(n.addAudio||n.replaceAudio))&&r.getAudioTracks()&&r.getAudioTracks().length)if(o.myStream.addTrack(r.getAudioTracks()[0]),V.unifiedPlan){V.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]);var m=null;if((y=o.pc.getTransceivers())&&y.length>0){var p=!0,h=!1,f=void 0;try{for(var g,v=y[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){if((_=g.value).sender&&_.sender.track&&"audio"===_.sender.track.kind||_.receiver&&_.receiver.track&&"audio"===_.receiver.track.kind){m=_;break}}}catch(R){h=!0,f=R}finally{try{p||null==v.return||v.return()}finally{if(h)throw f}}}m&&m.sender?m.sender.replaceTrack(r.getAudioTracks()[0]):o.pc.addTrack(r.getAudioTracks()[0],r)}else V.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]),o.pc.addTrack(r.getAudioTracks()[0],r);if((!n.update&&H(n)||n.update&&(n.addVideo||n.replaceVideo))&&r.getVideoTracks()&&r.getVideoTracks().length)if(o.myStream.addTrack(r.getVideoTracks()[0]),V.unifiedPlan){V.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]);var y,w=null;if((y=o.pc.getTransceivers())&&y.length>0){var S=!0,j=!1,O=void 0;try{for(var E,C=y[Symbol.iterator]();!(S=(E=C.next()).done);S=!0){var _;if((_=E.value).sender&&_.sender.track&&"video"===_.sender.track.kind||_.receiver&&_.receiver.track&&"video"===_.receiver.track.kind){w=_;break}}}catch(R){j=!0,O=R}finally{try{S||null==C.return||C.return()}finally{if(j)throw O}}}w&&w.sender?w.sender.replaceTrack(r.getVideoTracks()[0]):o.pc.addTrack(r.getVideoTracks()[0],r)}else V.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]),o.pc.addTrack(r.getVideoTracks()[0],r)}else o.myStream=r,s=!0;if(!o.pc){var I={iceServers:c,iceTransportPolicy:l,bundlePolicy:d};"chrome"===V.webRTCAdapter.browserDetails.browser&&(I.sdpSemantics=V.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var T={optional:[{DtlsSrtpKeyAgreement:!0}]};if(u&&T.optional.push({googIPv6:!0}),a.rtcConstraints&&"object"===typeof a.rtcConstraints)for(var A in V.debug("Adding custom PeerConnection constraints:",a.rtcConstraints),a.rtcConstraints)T.optional.push(a.rtcConstraints[A]);"edge"===V.webRTCAdapter.browserDetails.browser&&(I.bundlePolicy="max-bundle"),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&(a.senderTransforms||a.receiverTransforms)&&(o.senderTransforms=a.senderTransforms,o.receiverTransforms=a.receiverTransforms,I.forceEncodedAudioInsertableStreams=!0,I.forceEncodedVideoInsertableStreams=!0,I.encodedInsertableStreams=!0),V.log("Creating PeerConnection"),V.debug(T),o.pc=new RTCPeerConnection(I,T),V.debug(o.pc),o.pc.getStats&&(o.volume={},o.bitrate.value="0 kbits/sec"),V.log("Preparing local SDP and gathering candidates (trickle="+o.trickle+")"),o.pc.oniceconnectionstatechange=function(e){o.pc&&i.iceState(o.pc.iceConnectionState)},o.pc.onicecandidate=function(t){if(!t.candidate||"edge"===V.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)V.log("End of candidates."),o.iceDone=!0,!0===o.trickle?x(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:V.noop,t.error="function"==typeof t.error?t.error:V.noop;var n=k[e];if(!n||!n.webrtcStuff)return void V.warn("Invalid handle, not sending anything");var a=n.webrtcStuff;if(V.log("Sending offer/answer SDP..."),!a.mySdp)return void V.warn("Local SDP instance is invalid, not sending anything...");a.mySdp={type:a.pc.localDescription.type,sdp:a.pc.localDescription.sdp},!1===a.trickle&&(a.mySdp.trickle=!1);V.debug(t),a.sdpSent=!0,t.success(a.mySdp)}(e,a);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===o.trickle&&x(e,n)}},o.pc.ontrack=function(e){if(V.log("Handling Remote Track"),V.debug(e),e.streams&&(o.remoteStream=e.streams[0],i.onremotestream(o.remoteStream),!e.track.onended)){if(o.receiverTransforms){var t=null;RTCRtpSender.prototype.createEncodedStreams?t=e.receiver.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===e.track.kind&&o.receiverTransforms.audio?t=e.receiver.createEncodedAudioStreams():"video"===e.track.kind&&o.receiverTransforms.video&&(t=e.receiver.createEncodedVideoStreams())),t&&(console.log(t),t.readableStream&&t.writableStream?t.readableStream.pipeThrough(o.receiverTransforms[e.track.kind]).pipeTo(t.writableStream):t.readable&&t.writable&&t.readable.pipeThrough(o.receiverTransforms[e.track.kind]).pipeTo(t.writable))}var n=null;V.log("Adding onended callback to track:",e.track),e.track.onended=function(e){V.log("Remote track removed:",e),o.remoteStream&&(clearTimeout(n),o.remoteStream.removeTrack(e.target),i.onremotestream(o.remoteStream))},e.track.onmute=function(e){V.log("Remote track muted:",e),o.remoteStream&&null==n&&(n=setTimeout((function(){V.log("Removing remote track"),o.remoteStream&&(o.remoteStream.removeTrack(e.target),i.onremotestream(o.remoteStream)),n=null}),2520))},e.track.onunmute=function(e){if(V.log("Remote track flowing again:",e),null!=n)clearTimeout(n),n=null;else try{o.remoteStream.addTrack(e.target),i.onremotestream(o.remoteStream)}catch(t){V.error(t)}}}}}if(s&&r){V.log("Adding local stream");var M=!0===a.simulcast2;r.getTracks().forEach((function(e){V.log("Adding local track:",e);var t=null;if(M&&"audio"!==e.kind){V.log("Enabling rid-based simulcasting:",e);var n=b(a.simulcastMaxBitrates),i=o.pc.addTransceiver(e,{direction:"sendrecv",streams:[r],sendEncodings:a.sendEncodings||[{rid:"h",active:!0,maxBitrate:n.high},{rid:"m",active:!0,maxBitrate:n.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:n.low,scaleResolutionDownBy:4}]});i&&(t=i.sender)}else t=o.pc.addTrack(e,r);if(t&&o.senderTransforms){var s=null;RTCRtpSender.prototype.createEncodedStreams?s=t.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===t.track.kind&&o.senderTransforms.audio?s=t.createEncodedAudioStreams():"video"===t.track.kind&&o.senderTransforms.video&&(s=t.createEncodedVideoStreams())),s&&(console.log(s),s.readableStream&&s.writableStream?s.readableStream.pipeThrough(o.senderTransforms[t.track.kind]).pipeTo(s.writableStream):s.readable&&s.writable&&s.readable.pipeThrough(o.senderTransforms[t.track.kind]).pipeTo(s.writable))}}))}(function(e){if(V.debug("isDataEnabled:",e),"edge"===V.webRTCAdapter.browserDetails.browser)return V.warn("Edge doesn't support data channels yet"),!1;return void 0!==e&&null!==e&&!0===e.data})(n)&&!o.dataChannel[V.dataChanDefaultLabel]&&(V.log("Creating default data channel"),D(e,V.dataChanDefaultLabel,null,!1),o.pc.ondatachannel=function(t){V.log("Data channel created by Janus:",t),D(e,t.channel.label,t.channel.protocol,t.channel)}),o.myStream&&i.onlocalstream(o.myStream),t?o.pc.setRemoteDescription(t).then((function(){if(V.log("Remote description accepted!"),o.remoteSdp=t.sdp,o.candidates&&o.candidates.length>0){for(var r=0;r<o.candidates.length;r++){var i=o.candidates[r];V.debug("Adding remote candidate:",i),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate(V.endOfCandidates)}o.candidates=[]}!function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:V.noop,n.error="function"==typeof n.error?n.error:V.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:V.noop;var a=k[e];if(!a||!a.webrtcStuff)return V.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,i=!0===n.simulcast;i?V.log("Creating answer (iceDone="+r.iceDone+", simulcast="+i+")"):V.log("Creating answer (iceDone="+r.iceDone+")");var o=null;if(V.unifiedPlan){o={};var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var p,h=l[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value;f.sender&&f.sender.track&&"audio"===f.sender.track.kind||f.receiver&&f.receiver.track&&"audio"===f.receiver.track.kind?s||(s=f):(f.sender&&f.sender.track&&"video"===f.sender.track.kind||f.receiver&&f.receiver.track&&"video"===f.receiver.track.kind)&&(c||(c=f))}}catch(R){u=!0,m=R}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}var g=q(t),v=J(t);if(g||v){if(g&&v){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",V.log("Setting audio transceiver to sendrecv:",s)}catch(C){V.error(C)}}else if(g&&!v)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",V.log("Setting audio transceiver to sendonly:",s))}catch(C){V.error(C)}else if(!g&&v)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",V.log("Setting audio transceiver to recvonly:",s)}catch(C){V.error(C)}else s=r.pc.addTransceiver("audio",{direction:"recvonly"}),V.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",V.log("Setting audio transceiver to inactive:",s)}catch(C){V.error(C)}var y=H(t),w=G(t);if(y||w){if(y&&w){if(c)try{c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",V.log("Setting video transceiver to sendrecv:",c)}catch(C){V.error(C)}}else if(y&&!w){if(c)try{c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",V.log("Setting video transceiver to sendonly:",c)}catch(C){V.error(C)}}else if(!y&&w)if(c)try{c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",V.log("Setting video transceiver to recvonly:",c)}catch(C){V.error(C)}else c=r.pc.addTransceiver("video",{direction:"recvonly"}),V.log("Adding recvonly video transceiver:",c)}else if(t.removeVideo&&c)try{c.setDirection?c.setDirection("inactive"):c.direction="inactive",V.log("Setting video transceiver to inactive:",c)}catch(C){V.error(C)}}else o="firefox"===V.webRTCAdapter.browserDetails.browser||"edge"===V.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:J(t),offerToReceiveVideo:G(t)}:{mandatory:{OfferToReceiveAudio:J(t),OfferToReceiveVideo:G(t)}};V.debug(o);var S=H(t);if(S&&i&&"firefox"===V.webRTCAdapter.browserDetails.browser){V.log("Enabling Simulcasting for Firefox (RID)");var j=r.pc.getSenders()[1];V.log(j);var O=j.getParameters();V.log(O);var E=b(n.simulcastMaxBitrates);j.setParameters({encodings:n.sendEncodings||[{rid:"h",active:!0,maxBitrate:E.high},{rid:"m",active:!0,maxBitrate:E.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:E.low,scaleResolutionDownBy:4}]})}r.pc.createAnswer(o).then((function(e){V.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,V.log("Setting local description"),S&&i&&("chrome"===V.webRTCAdapter.browserDetails.browser?V.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==V.webRTCAdapter.browserDetails.browser&&V.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=o,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):V.log("Waiting for all candidates...")}),n.error)}(e,n,a)}),a.error):function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:V.noop,n.error="function"==typeof n.error?n.error:V.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:V.noop;var a=k[e];if(!a||!a.webrtcStuff)return V.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,i=!0===n.simulcast;i?V.log("Creating offer (iceDone="+r.iceDone+", simulcast="+i+")"):V.log("Creating offer (iceDone="+r.iceDone+")");var o={};if(V.unifiedPlan){var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var p,h=l[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value;f.sender&&f.sender.track&&"audio"===f.sender.track.kind||f.receiver&&f.receiver.track&&"audio"===f.receiver.track.kind?s||(s=f):(f.sender&&f.sender.track&&"video"===f.sender.track.kind||f.receiver&&f.receiver.track&&"video"===f.receiver.track.kind)&&(c||(c=f))}}catch(R){u=!0,m=R}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}var g=q(t),v=J(t);g||v?g&&v?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",V.log("Setting audio transceiver to sendrecv:",s)):g&&!v?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",V.log("Setting audio transceiver to sendonly:",s)):!g&&v&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",V.log("Setting audio transceiver to recvonly:",s)):(s=r.pc.addTransceiver("audio",{direction:"recvonly"}),V.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",V.log("Setting audio transceiver to inactive:",s));var y=H(t),w=G(t);y||w?y&&w?c&&(c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",V.log("Setting video transceiver to sendrecv:",c)):y&&!w?c&&(c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",V.log("Setting video transceiver to sendonly:",c)):!y&&w&&(c?(c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",V.log("Setting video transceiver to recvonly:",c)):(c=r.pc.addTransceiver("video",{direction:"recvonly"}),V.log("Adding recvonly video transceiver:",c))):t.removeVideo&&c&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive",V.log("Setting video transceiver to inactive:",c))}else o.offerToReceiveAudio=J(t),o.offerToReceiveVideo=G(t);!0===n.iceRestart&&(o.iceRestart=!0);V.debug(o);var S=H(t);if(S&&i&&"firefox"===V.webRTCAdapter.browserDetails.browser){V.log("Enabling Simulcasting for Firefox (RID)");var j=r.pc.getSenders().find((function(e){return"video"===e.track.kind}));if(j){var O=j.getParameters();O||(O={});var E=b(n.simulcastMaxBitrates);O.encodings=n.sendEncodings||[{rid:"h",active:!0,maxBitrate:E.high},{rid:"m",active:!0,maxBitrate:E.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:E.low,scaleResolutionDownBy:4}],j.setParameters(O)}}r.pc.createOffer(o).then((function(e){V.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,V.log("Setting local description"),S&&i&&("chrome"===V.webRTCAdapter.browserDetails.browser||"safari"===V.webRTCAdapter.browserDetails.browser?(V.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=function(e){for(var t=e.split("\r\n"),n=!1,a=[-1],r=[-1],i=null,o=null,s=null,c=null,l=-1,d=0;d<t.length;d++){if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){var u=t[d].match(/a=ssrc-group:FID (\d+) (\d+)/);if(u)a[0]=u[1],r[0]=u[2],t.splice(d,1),d--;else{if(a[0]){if((h=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(i=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(o=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=h[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!=t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0){l=-1,n=!1;for(d=0;d<t.length;d++){var m;if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){if(a[0]<0){var p=t[d].match(/a=ssrc:(\d+)/);if(p){a[0]=p[1],t.splice(d,1),d--;continue}}else{var h;if((h=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(i=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(o=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=h[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!==t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0)return V.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;l<0&&(l=t.length);a[1]=Math.floor(4294967295*Math.random()),a[2]=Math.floor(4294967295*Math.random()),r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random());for(d=0;d<a.length;d++)i&&(t.splice(l,0,"a=ssrc:"+a[d]+" cname:"+i),l++),o&&(t.splice(l,0,"a=ssrc:"+a[d]+" msid:"+o),l++),s&&(t.splice(l,0,"a=ssrc:"+a[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+a[d]+" label:"+c),l++),i&&(t.splice(l,0,"a=ssrc:"+r[d]+" cname:"+i),l++),o&&(t.splice(l,0,"a=ssrc:"+r[d]+" msid:"+o),l++),s&&(t.splice(l,0,"a=ssrc:"+r[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+r[d]+" label:"+c),l++);t.splice(l,0,"a=ssrc-group:FID "+a[2]+" "+r[2]),t.splice(l,0,"a=ssrc-group:FID "+a[1]+" "+r[1]),t.splice(l,0,"a=ssrc-group:FID "+a[0]+" "+r[0]),t.splice(l,0,"a=ssrc-group:SIM "+a[0]+" "+a[1]+" "+a[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e}(e.sdp)):"firefox"!==V.webRTCAdapter.browserDetails.browser&&V.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=o,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):V.log("Waiting for all candidates...")}),n.error)}(e,n,a)}function P(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:V.noop,n.error="function"==typeof n.error?n.error:B;var a=n.jsep;if(t&&a)return V.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!a||!a.type||!a.sdp))return V.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media="object"===typeof n.media&&n.media?n.media:{audio:!0,video:!0};var r=n.media,i=k[e];if(!i||!i.webrtcStuff)return V.warn("Invalid handle"),void n.error("Invalid handle");var o,s=i.webrtcStuff;if(s.trickle=(o=n.trickle,V.debug("isTrickleEnabled:",o),!1!==o),s.pc){if(V.log("Updating existing media session"),r.update=!0,n.stream)n.stream!==s.myStream&&V.log("Renegotiation involves a new external stream");else{if(r.addAudio){if(r.keepAudio=!1,r.replaceAudio=!1,r.removeAudio=!1,r.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return V.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else r.removeAudio?(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!1,r.audioSend=!1):r.replaceAudio&&(r.keepAudio=!1,r.addAudio=!1,r.removeAudio=!1,r.audioSend=!0);if(s.myStream&&s.myStream.getAudioTracks()&&0!==s.myStream.getAudioTracks().length?!q(r)||r.removeAudio||r.replaceAudio||(r.keepAudio=!0):(r.replaceAudio&&(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!0,r.audioSend=!0),q(r)&&(r.keepAudio=!1,r.addAudio=!0)),r.addVideo){if(r.keepVideo=!1,r.replaceVideo=!1,r.removeVideo=!1,r.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return V.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else r.removeVideo?(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!1,r.videoSend=!1):r.replaceVideo&&(r.keepVideo=!1,r.addVideo=!1,r.removeVideo=!1,r.videoSend=!0);s.myStream&&s.myStream.getVideoTracks()&&0!==s.myStream.getVideoTracks().length?!H(r)||r.removeVideo||r.replaceVideo||(r.keepVideo=!0):(r.replaceVideo&&(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!0,r.videoSend=!0),H(r)&&(r.keepVideo=!1,r.addVideo=!0)),r.addData&&(r.data=!0)}if(q(r)&&r.keepAudio&&H(r)&&r.keepVideo)return i.consentDialog(!1),void L(e,a,r,n,s.myStream)}else r.update=!1,r.keepAudio=!1,r.keepVideo=!1;if(r.update&&!s.streamExternal){if(r.removeAudio||r.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var c=s.myStream.getAudioTracks()[0];V.log("Removing audio track:",c),s.myStream.removeTrack(c);try{c.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var l=!0;if(r.replaceAudio&&V.unifiedPlan&&(l=!1),l){var d=!0,u=!1,m=void 0;try{for(var p,h=s.pc.getSenders()[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value;f&&f.track&&"audio"===f.track.kind&&(V.log("Removing audio sender:",f),s.pc.removeTrack(f))}}catch(F){u=!0,m=F}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}}}if(r.removeVideo||r.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){var g=s.myStream.getVideoTracks()[0];V.log("Removing video track:",g),s.myStream.removeTrack(g);try{g.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var v=!0;if(r.replaceVideo&&V.unifiedPlan&&(v=!1),v){var b=!0,y=!1,w=void 0;try{for(var S,j=s.pc.getSenders()[Symbol.iterator]();!(b=(S=j.next()).done);b=!0){var O=S.value;O&&O.track&&"video"===O.track.kind&&(V.log("Removing video sender:",O),s.pc.removeTrack(O))}}catch(F){y=!0,w=F}finally{try{b||null==j.return||j.return()}finally{if(y)throw w}}}}}}if(n.stream){var E=n.stream;return V.log("MediaStream provided by the application"),V.debug(E),r.update&&s.myStream&&s.myStream!==n.stream&&!s.streamExternal&&(V.stopAllTracks(s.myStream),s.myStream=null),s.streamExternal=!0,i.consentDialog(!1),void L(e,a,r,n,E)}if(q(r)||H(r)){if(!V.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var C={mandatory:{},optional:[]};i.consentDialog(!0);var _=q(r);_&&r&&"object"===typeof r.audio&&(_=r.audio);var I=H(r);if(I&&r){var T=!0===n.simulcast,x=!0===n.simulcast2;if(!T&&!x||a||r.video||(r.video="hires"),r.video&&"screen"!=r.video&&"window"!=r.video)if("object"===typeof r.video)I=r.video;else{var D=0,A=0;"lowres"===r.video?(A=240,240,D=320):"lowres-16:9"===r.video?(A=180,180,D=320):"hires"===r.video||"hires-16:9"===r.video||"hdres"===r.video?(A=720,720,D=1280):"fhdres"===r.video?(A=1080,1080,D=1920):"4kres"===r.video?(A=2160,2160,D=3840):"stdres"===r.video?(A=480,480,D=640):"stdres-16:9"===r.video?(A=360,360,D=640):(V.log("Default video setting is stdres 4:3"),A=480,480,D=640),V.log("Adding media constraint:",r.video),I={height:{ideal:A},width:{ideal:D}},V.log("Adding video constraint:",I)}else if("screen"===r.video||"window"===r.video){var M=function(t,o){i.consentDialog(!1),t?n.error(t):L(e,a,r,n,o)},R=function(e,t,n){V.log("Adding media constraint (screen capture)"),V.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){i.consentDialog(!1),t(e)}))};if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return C.video={},r.screenshareFrameRate&&(C.video.frameRate=r.screenshareFrameRate),r.screenshareHeight&&(C.video.height=r.screenshareHeight),r.screenshareWidth&&(C.video.width=r.screenshareWidth),C.audio=r.captureDesktopAudio,void navigator.mediaDevices.getDisplayMedia(C).then((function(t){i.consentDialog(!1),q(r)&&!r.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(i){t.addTrack(i.getAudioTracks()[0]),L(e,a,r,n,t)})):L(e,a,r,n,t)}),(function(e){i.consentDialog(!1),n.error(e)}));if("chrome"===V.webRTCAdapter.browserDetails.browser){var P=V.webRTCAdapter.browserDetails.version,U=33;window.navigator.userAgent.match("Linux")&&(U=35),P>=26&&P<=U?(C={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate,chromeMediaSource:"screen"}},audio:q(r)&&!r.keepAudio},R(C,M)):V.extension.getScreen((function(e,t){if(e)return i.consentDialog(!1),n.error(e);(C={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=t,R(C,M,q(r)&&!r.keepAudio)}))}else if("firefox"===V.webRTCAdapter.browserDetails.browser){if(!(V.webRTCAdapter.browserDetails.version>=33)){var N=new Error("NavigatorUserMediaError");return N.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",i.consentDialog(!1),void n.error(N)}C={video:{mozMediaSource:r.video,mediaSource:r.video},audio:q(r)&&!r.keepAudio},R(C,(function(e,t){if(M(e,t),!e)var n=t.currentTime,a=window.setInterval((function(){t||window.clearInterval(a),t.currentTime==n&&(window.clearInterval(a),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}r&&"screen"===r.video||navigator.mediaDevices.enumerateDevices().then((function(t){var o=t.some((function(e){return"audioinput"===e.kind})),s=function(e){if(V.debug("isScreenSendEnabled:",e),!e)return!1;if("object"!==typeof e.video||"object"!==typeof e.video.mandatory)return!1;var t=e.video.mandatory;if(t.chromeMediaSource)return"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource;if(t.mozMediaSource)return"window"===t.mozMediaSource||"screen"===t.mozMediaSource;if(t.mediaSource)return"window"===t.mediaSource||"screen"===t.mediaSource;return!1}(r)||t.some((function(e){return"videoinput"===e.kind})),c=q(r),l=H(r),d=function(e){return V.debug("isAudioSendRequired:",e),!!e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}(r),u=function(e){return V.debug("isVideoSendRequired:",e),!!e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}(r);if(c||l||d||u){var m=!!c&&o,p=!!l&&s;if(!m&&!p)return i.consentDialog(!1),n.error("No capture device found"),!1;if(!m&&d)return i.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!p&&u)return i.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var h={audio:!(!o||r.keepAudio)&&_,video:!(!s||r.keepVideo)&&I};V.debug("getUserMedia constraints",h),h.audio||h.video?navigator.mediaDevices.getUserMedia(h).then((function(t){i.consentDialog(!1),L(e,a,r,n,t)})).catch((function(e){i.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(i.consentDialog(!1),L(e,a,r,n,E))})).catch((function(e){i.consentDialog(!1),n.error(e)}))}else L(e,a,r,n)}function U(e,t){(t=t||{}).success="function"==typeof t.success?t.success:V.noop,t.error="function"==typeof t.error?t.error:B;var n=t.jsep,a=k[e];if(!a||!a.webrtcStuff)return V.warn("Invalid handle"),void t.error("Invalid handle");var r=a.webrtcStuff;if(n){if(!r.pc)return V.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.pc.setRemoteDescription(n).then((function(){if(V.log("Remote description accepted!"),r.remoteSdp=n.sdp,r.candidates&&r.candidates.length>0){for(var e=0;e<r.candidates.length;e++){var a=r.candidates[e];V.debug("Adding remote candidate:",a),a&&!0!==a.completed?r.pc.addIceCandidate(a):r.pc.addIceCandidate(V.endOfCandidates)}r.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function N(e,t){var n=k[e];if(!n||!n.webrtcStuff)return V.warn("Invalid handle"),0;var a=t?"remote":"local",r=n.webrtcStuff;return r.volume[a]||(r.volume[a]={value:0}),!r.pc.getStats||"chrome"!==V.webRTCAdapter.browserDetails.browser&&"safari"!==V.webRTCAdapter.browserDetails.browser?(V.warn("Getting the "+a+" volume unsupported by browser"),0):t&&!r.remoteStream?(V.warn("Remote stream unavailable"),0):t||r.myStream?r.volume[a].timer?r.volume[a].value:(V.log("Starting "+a+" volume monitor"),r.volume[a].timer=setInterval((function(){r.pc.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(t&&!e.remoteSource||!t&&"media-source"!==e.type||(r.volume[a].value=e.audioLevel?e.audioLevel:0))}))}))}),200),0):(V.warn("Local stream unavailable"),0)}function $(e,t){var n=k[e];if(!n||!n.webrtcStuff)return V.warn("Invalid handle"),!0;var a=n.webrtcStuff;return a.pc?a.myStream?t?a.myStream.getVideoTracks()&&0!==a.myStream.getVideoTracks().length?!a.myStream.getVideoTracks()[0].enabled:(V.warn("No video track"),!0):a.myStream.getAudioTracks()&&0!==a.myStream.getAudioTracks().length?!a.myStream.getAudioTracks()[0].enabled:(V.warn("No audio track"),!0):(V.warn("Invalid local MediaStream"),!0):(V.warn("Invalid PeerConnection"),!0)}function F(e,t,n){var a=k[e];if(!a||!a.webrtcStuff)return V.warn("Invalid handle"),!1;var r=a.webrtcStuff;return r.pc?r.myStream?t?r.myStream.getVideoTracks()&&0!==r.myStream.getVideoTracks().length?(r.myStream.getVideoTracks()[0].enabled=!n,!0):(V.warn("No video track"),!1):r.myStream.getAudioTracks()&&0!==r.myStream.getAudioTracks().length?(r.myStream.getAudioTracks()[0].enabled=!n,!0):(V.warn("No audio track"),!1):(V.warn("Invalid local MediaStream"),!1):(V.warn("Invalid PeerConnection"),!1)}function z(e){var t=k[e];if(!t||!t.webrtcStuff)return V.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return n.pc?n.pc.getStats?n.bitrate.timer?n.bitrate.value:(V.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var a=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"===V.webRTCAdapter.browserDetails.browser&&(a/=1e3);var r=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/a);"safari"===V.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),n.bitrate.value=r+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):(V.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"):"Invalid PeerConnection"}function B(e){V.error("WebRTC error:",e)}function W(e,a){V.log("Cleaning WebRTC stuff");var r=k[e];if(r){var i=r.webrtcStuff;if(i){if(!0===a){var o={janus:"hangup",transaction:V.randomString(12)};r.token&&(o.token=r.token),f&&(o.apisecret=f),V.debug("Sending hangup request (handle="+e+"):"),V.debug(o),t?(o.session_id=w,o.handle_id=e,n.send(JSON.stringify(o))):V.httpAPICall(s+"/"+w+"/"+e,{verb:"POST",withCredentials:m,body:o})}i.remoteStream=null,i.volume&&(i.volume.local&&i.volume.local.timer&&clearInterval(i.volume.local.timer),i.volume.remote&&i.volume.remote.timer&&clearInterval(i.volume.remote.timer)),i.volume={},i.bitrate.timer&&clearInterval(i.bitrate.timer),i.bitrate.timer=null,i.bitrate.bsnow=null,i.bitrate.bsbefore=null,i.bitrate.tsnow=null,i.bitrate.tsbefore=null,i.bitrate.value=null,!i.streamExternal&&i.myStream&&(V.log("Stopping local stream tracks"),V.stopAllTracks(i.myStream)),i.streamExternal=!1,i.myStream=null;try{i.pc.close()}catch(c){}i.pc=null,i.candidates=null,i.mySdp=null,i.remoteSdp=null,i.iceDone=!1,i.dataChannel={},i.dtmfSender=null,i.senderTransforms=null,i.receiverTransforms=null}r.oncleanup()}}function q(e){return V.debug("isAudioSendEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function J(e){return V.debug("isAudioRecvEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function H(e){return V.debug("isVideoSendEnabled:",e),!e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function G(e){return V.debug("isVideoRecvEnabled:",e),!e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}I(e),this.getServer=function(){return s},this.isConnected=function(){return y},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:V.noop,e.error="function"==typeof e.error?e.error:V.noop,e.reconnect=!0,I(e)},this.getSessionId=function(){return w},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:V.noop,e.error="function"==typeof e.error?e.error:V.noop,V.log("Getting info on Janus instance"),!y)return V.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=V.randomString(12),r={janus:"info",transaction:a};h&&(r.token=h);f&&(r.apisecret=f);if(t)return O[a]=function(t){V.log("Server info:"),V.debug(t),"server_info"!==t.janus&&V.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},void n.send(JSON.stringify(r));V.httpAPICall(s,{verb:"POST",withCredentials:m,body:r,success:function(t){V.log("Server info:"),V.debug(t),"server_info"!==t.janus&&V.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){V.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(i){!function(i){(i=i||{}).success="function"==typeof i.success?i.success:V.noop,i.error="function"==typeof i.error?i.error:V.noop;var o=!0===i.unload,c=!0;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(c=!0===i.notifyDestroyed);var l=!0===i.cleanupHandles;if(V.log("Destroying session "+w+" (unload="+o+")"),!w)return V.warn("No session to destroy"),i.success(),void(c&&e.destroyed());if(l)for(var d in k)R(d,{noRequest:!0});if(!y)return V.warn("Is the server down? (connected=false)"),w=null,void i.success();var u={janus:"destroy",transaction:V.randomString(12)};h&&(u.token=h);f&&(u.apisecret=f);if(o)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(s+"/"+w,JSON.stringify(u)),V.log("Destroyed session:"),w=null,y=!1,i.success(),void(c&&e.destroyed());if(t){u.session_id=w;var p=function(){for(var e in a)n.removeEventListener(e,a[e]);n.removeEventListener("message",g),n.removeEventListener("error",v),r&&clearTimeout(r),n.close()},g=function(t){var n=JSON.parse(t.data);n.session_id==u.session_id&&n.transaction==u.transaction&&(p(),i.success(),c&&e.destroyed())},v=function(t){p(),i.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",g),n.addEventListener("error",v),void(1===n.readyState?n.send(JSON.stringify(u)):v())}V.httpAPICall(s+"/"+w,{verb:"POST",withCredentials:m,body:u,success:function(t){V.log("Destroyed session:"),V.debug(t),w=null,y=!1,"success"!==t.janus&&V.error("Ooops: "+t.error.code+" "+t.error.reason),i.success(),c&&e.destroyed()},error:function(t,n){V.error(t+":",n),w=null,y=!1,i.success(),c&&e.destroyed()}})}(i)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:V.noop,e.error="function"==typeof e.error?e.error:V.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:V.noop,e.iceState="function"==typeof e.iceState?e.iceState:V.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:V.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:V.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:V.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:V.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:V.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:V.noop,e.ondata="function"==typeof e.ondata?e.ondata:V.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:V.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:V.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:V.noop,!y)return V.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=e.plugin;if(!a)return V.error("Invalid plugin"),void e.error("Invalid plugin");var r=e.opaqueId,i=e.token?e.token:h,o=V.randomString(12),c={janus:"attach",plugin:a,opaque_id:r,transaction:o};i&&(c.token=i);f&&(c.apisecret=f);if(t)return O[o]=function(t){if(V.debug(t),"success"!==t.janus)return V.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;V.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:i,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return F(n,!1,!0)},unmuteAudio:function(){return F(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return F(n,!0,!0)},unmuteVideo:function(){return F(n,!0,!1)},getBitrate:function(){return z(n)},send:function(e){T(n,e)},data:function(e){A(n,e)},dtmf:function(e){M(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){P(n,!0,e)},createAnswer:function(e){P(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){W(n,!0===e)},detach:function(e){R(n,e)}};k[n]=r,e.success(r)},c.session_id=w,void n.send(JSON.stringify(c));V.httpAPICall(s+"/"+w,{verb:"POST",withCredentials:m,body:c,success:function(t){if(V.debug(t),"success"!==t.janus)return V.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;V.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:i,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return F(n,!1,!0)},unmuteAudio:function(){return F(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return F(n,!0,!0)},unmuteVideo:function(){return F(n,!0,!1)},getBitrate:function(){return z(n)},send:function(e){T(n,e)},data:function(e){A(n,e)},dtmf:function(e){M(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){P(n,!0,e)},createAnswer:function(e){P(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){W(n,!0===e)},detach:function(e){R(n,e)}};k[n]=r,e.success(r)},error:function(t,n){V.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}V.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,a=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new a(e,t)},extension:e&&e.extension||L,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||M.a,httpAPICall:function(e,a){var r={method:a.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===a.verb&&(r.headers["Content-Type"]="application/json"),void 0!==a.withCredentials&&(r.credentials=!0===a.withCredentials?"include":a.withCredentials?a.withCredentials:"omit"),a.body&&(r.body=JSON.stringify(a.body));var i=t(e,r).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(a.timeout){var o=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:a.timeout})}),a.timeout)}));i=n.race([i,o])}return i.then((function(e){return e.ok?typeof a.success===typeof V.noop?e.json().then((function(e){a.success(e)})).catch((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof a.error===typeof V.noop&&a.error(e.message||"<< internal error >>",e)})),i}}},V.useOldDependencies=function(e){var t=e&&e.jQuery||A.a,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||L,webRTCAdapter:e&&e.adapter||M.a,httpAPICall:function(e,n){var a=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},r=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(a,r,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success===typeof V.noop&&n.success(e)},error:function(e,t,a){typeof n.error===typeof V.noop&&n.error(t,a)}}))}}},V.noop=function(){},V.dataChanDefaultLabel="JanusDataChannel",V.endOfCandidates=null,V.stopAllTracks=function(e){try{var t=e.getTracks(),n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;V.log(s),s&&s.stop()}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}catch(l){}},V.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:V.noop,V.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),V.trace=V.noop,V.debug=V.noop,V.vdebug=V.noop,V.log=V.noop,V.warn=V.noop,V.error=V.noop,!0===e.debug||"all"===e.debug)V.trace=console.trace.bind(console),V.debug=console.debug.bind(console),V.vdebug=console.debug.bind(console),V.log=console.log.bind(console),V.warn=console.warn.bind(console),V.error=console.error.bind(console);else if(Array.isArray(e.debug)){var t=!0,n=!1,a=void 0;try{for(var r,i=e.debug[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;switch(o){case"trace":V.trace=console.trace.bind(console);break;case"debug":V.debug=console.debug.bind(console);break;case"vdebug":V.vdebug=console.debug.bind(console);break;case"log":V.log=console.log.bind(console);break;case"warn":V.warn=console.warn.bind(console);break;case"error":V.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+o+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}}catch(b){n=!0,a=b}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}V.log("Initializing library");var s=e.dependencies||V.useDefaultDependencies();V.isArray=s.isArray,V.webRTCAdapter=s.webRTCAdapter,V.httpAPICall=s.httpAPICall,V.newWebSocket=s.newWebSocket,V.extension=s.extension,V.extension.init(),V.listDevices=function(e,t){e="function"==typeof e?e:V.noop,null==t&&(t={audio:!0,video:!0}),V.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){V.debug(n),e(n),V.stopAllTracks(t)}))})).catch((function(t){V.error(t),e([])})):(V.warn("navigator.mediaDevices unavailable"),e([]))},V.attachMediaStream=function(e,t){try{e.srcObject=t}catch(n){try{e.src=URL.createObjectURL(t)}catch(n){V.error("Error attaching stream to element")}}},V.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch(n){try{e.src=t.src}catch(n){V.error("Error reattaching stream to element")}}};var c=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",l=window["on"+c];if(window.addEventListener(c,(function(e){for(var t in V.log("Closing window"),V.sessions)V.sessions[t]&&V.sessions[t].destroyOnUnload&&(V.log("Destroying session "+t),V.sessions[t].destroy({unload:!0,notifyDestroyed:!1}));l&&"function"==typeof l&&l()})),V.safariVp8=!1,"safari"===V.webRTCAdapter.browserDetails.browser&&V.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){var d=!0,u=!1,m=void 0;try{for(var p,h=RTCRtpSender.getCapabilities("video").codecs[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value;if(f&&f.mimeType&&"video/vp8"===f.mimeType.toLowerCase()){V.safariVp8=!0;break}}}catch(b){u=!0,m=b}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}V.safariVp8?V.log("This version of Safari supports VP8"):V.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var g=new RTCPeerConnection({});g.createOffer({offerToReceiveVideo:!0}).then((function(e){V.safariVp8=-1!==e.sdp.indexOf("VP8"),V.safariVp8?V.log("This version of Safari supports VP8"):V.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),g.close(),g=null}))}if(V.unifiedPlan=!1,"firefox"===V.webRTCAdapter.browserDetails.browser&&V.webRTCAdapter.browserDetails.version>=59)V.unifiedPlan=!0;else if("chrome"===V.webRTCAdapter.browserDetails.browser&&V.webRTCAdapter.browserDetails.version>=72)V.unifiedPlan=!0;else if(window.RTCRtpTransceiver&&"currentDirection"in R.prototype){var v=new RTCPeerConnection;try{v.addTransceiver("audio"),V.unifiedPlan=!0}catch(y){}v.close()}else V.unifiedPlan=!1;V.initDone=!0,e.callback()}},V.isWebrtcSupported=function(){return!!window.RTCPeerConnection},V.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},V.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n};var P,U=V,N=n(7),$=(P={home:"\u062e\u0627\u0646\u0647",name:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc ",login:"\u0648\u0631\u0648\u062f",username:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc ",password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 ",password_confirmation:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",mobile:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 ",error:"\u062e\u0637\u0627",sign_in:"\u0648\u0631\u0648\u062f ",sign_up:"\u062b\u0628\u062a \u0646\u0627\u0645",back:"\u0628\u0627\u0632\u06af\u0634\u062a",signed_up_already:"\u062a\u0627 \u06a9\u0646\u0648\u0646 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u061f",new_advert:"\u062f\u0631\u062c \u0622\u06af\u0647\u06cc ",title:"\u0639\u0646\u0648\u0627\u0646",abstract:"\u0686\u06a9\u06cc\u062f\u0647",content:"\u0645\u062a\u0646",submit:"\u062b\u0628\u062a ",upload_from_gallery:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0627\u0632 \u06af\u0627\u0644\u0631\u06cc",welcome:"\u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f",sign_out:"\u062e\u0631\u0648\u062c",phone_number:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646",telegram_channel:"\u06a9\u0627\u0646\u0627\u0644 \u062a\u0644\u06af\u0631\u0627\u0645",instagram_page:"\u0635\u0641\u062d\u0647 \u0627\u06cc\u0646\u0633\u062a\u0627\u06af\u0631\u0627\u0645",address:"\u0622\u062f\u0631\u0633 ",email:"\u0627\u06cc\u0645\u06cc\u0644 ",contact_information:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062a\u0645\u0627\u0633 ",search:"\u062c\u0633\u062a\u062c\u0648 ",cancel:"\u0627\u0646\u0635\u0631\u0627\u0641",view:"\u0646\u0645\u0627\u06cc\u0634",edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634",delete:"\u062d\u0630\u0641",adverts_nes:"\u0639\u0646\u0648\u0627\u0646\u060c \u0645\u062a\u0646 \u0648 \u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a",my_pins:" \u0646\u0634\u0627\u0646 \u0634\u062f\u0647\u200c\u0647\u0627 ",pin:"\u0646\u0634\u0627\u0646 \u06a9\u0646",pinned:"\u0646\u0634\u0627\u0646 \u0634\u062f\u0647",message_to_seller:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",messages:"\u067e\u06cc\u0627\u0645 \u0647\u0627 ",send_message:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",province:"\u0627\u0633\u062a\u0627\u0646",city:"\u0634\u0647\u0631",website:"\u0648\u0628\u0633\u0627\u06cc\u062a",call:"\u062a\u0645\u0627\u0633 \u0628\u06af\u06cc\u0631\u06cc\u062f",ago:" \u0642\u0628\u0644",all_above:"\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0641\u0648\u0642",no_result:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f ",category:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc ",leg:"\u0645\u0633\u06cc\u0631",date:"\u062a\u0627\u0631\u06cc\u062e",time:"\u0632\u0645\u0627\u0646",numberOfPassngers:"\u062a\u0639\u062f\u0627\u062f \u0645\u0633\u0627\u0641\u0631\u0627\u0646 ",surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",fathername:"\u0646\u0627\u0645 \u067e\u062f\u0631",ssn:"\u06a9\u062f\u0645\u0644\u06cc",birthplace:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",pass_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",birthdate:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f",place_of_birth:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",required_fields:"\u0641\u06cc\u0644\u062f\u0647\u0627\u06cc \u0627\u062c\u0628\u0627\u0631\u06cc",en_father_name:"\u0646\u0627\u0645 \u067e\u062f\u0631 \u0644\u0627\u062a\u06cc\u0646",en_name:"\u0646\u0627\u0645 \u0644\u0627\u062a\u06cc\u0646",en_surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u0644\u0627\u062a\u06cc\u0646 ",passport_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",final_confirm:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0647\u0627\u06cc\u06cc ",document_form:"\u0641\u0631\u0645 \u0627\u0633\u0646\u0627\u062f ",save:"\u0630\u062e\u06cc\u0631\u0647",documents:"\u0627\u0633\u0646\u0627\u062f ",type:"\u0646\u0648\u0639",string:"\u0645\u062a\u0646 \u06a9\u0648\u062a\u0627\u0647",text:"\u0645\u062a\u0646 \u0628\u0644\u0646\u062f",select:"\u06af\u0632\u06cc\u0646\u0647",multiSelect:"\u0686\u0646\u062f \u06af\u0632\u06cc\u0646\u0647",table:"\u062c\u062f\u0648\u0644"},Object(N.a)(P,"date","\u062a\u0627\u0631\u06cc\u062e"),Object(N.a)(P,"refundable","\u0642\u0627\u0628\u0644 \u0627\u0639\u0627\u062f\u0647"),Object(N.a)(P,"yes","\u0628\u0644\u0647"),Object(N.a)(P,"no","\u062e\u06cc\u0631"),Object(N.a)(P,"commentable","\u0642\u0627\u0628\u0644 \u0646\u0638\u0631\u062f\u0647\u06cc"),Object(N.a)(P,"end_point","\u0646\u0642\u0637\u0647 \u067e\u0627\u06cc\u0627\u0646"),Object(N.a)(P,"start_point","\u0646\u0642\u0637\u0647 \u0634\u0631\u0648\u0639"),Object(N.a)(P,"votable","\u0631\u0627\u06cc \u06af\u06cc\u0631\u06cc"),Object(N.a)(P,"publishable","\u0642\u0627\u0628\u0644 \u0627\u0646\u062a\u0634\u0627\u0631"),Object(N.a)(P,"field_name","\u0646\u0627\u0645 \u0641\u06cc\u0644\u062f"),Object(N.a)(P,"add","\u0627\u0641\u0632\u0648\u062f\u0646 "),Object(N.a)(P,"remove","\u062d\u0630\u0641"),Object(N.a)(P,"auxiliary_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(P,"create_by","\u0627\u06cc\u062c\u0627\u062f \u0634\u062f\u0647 \u062a\u0648\u0633\u0637"),Object(N.a)(P,"list","\u0644\u06cc\u0633\u062a"),Object(N.a)(P,"workflows","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"auxiliary_records","\u0645\u0642\u0627\u062f\u06cc\u0631 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(P,"basic_table","\u062c\u062f\u0648\u0644 \u067e\u0627\u06cc\u0647"),Object(N.a)(P,"relation_table","\u062c\u062f\u0648\u0644 \u0631\u0627\u0628\u0637\u0647"),Object(N.a)(P,"auxiliary_table_form","\u0641\u0631\u0645 \u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc "),Object(N.a)(P,"Basic","\u067e\u0627\u06cc\u0647"),Object(N.a)(P,"Relation","\u0631\u0627\u0628\u0637\u0647 "),Object(N.a)(P,"Divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(P,"workflow_form","\u0641\u0631\u0645 \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(P,"submitting","\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644 ... "),Object(N.a)(P,"settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"),Object(N.a)(P,"receiving","\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a ..."),Object(N.a)(P,"workflow_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631 "),Object(N.a)(P,"auxiliary_table","\u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(P,"workflow","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(P,"actions","\u0639\u0645\u0644\u06cc\u0627\u062a"),Object(N.a)(P,"roles","\u0646\u0642\u0634 \u0647\u0627"),Object(N.a)(P,"divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(P,"enter_your_email","\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"enter_your_password","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f "),Object(N.a)(P,"enter_your_password_confirmation","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f "),Object(N.a)(P,"profiles","\u0627\u0641\u0631\u0627\u062f "),Object(N.a)(P,"firstname","\u0646\u0627\u0645"),Object(N.a)(P,"if_registered","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(P,"you_can_login","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"),Object(N.a)(P,"if_not_registered","\u0627\u06af\u0631 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(P,"you_can_sign_up","\u0686\u0646\u0627\u0646\u0686\u0647 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0627\u06cc\u0646\u062c\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f."),Object(N.a)(P,"new_assignment","\u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"posts","\u067e\u0633\u062a \u0647\u0627"),Object(N.a)(P,"bookmark","\u0646\u0634\u0627\u0646"),Object(N.a)(P,"like","\u0639\u0644\u0627\u0642\u0647"),Object(N.a)(P,"follow","\u062f\u0646\u0628\u0627\u0644"),Object(N.a)(P,"share","\u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(P,"social_acts","\u0639\u0645\u0644\u06af\u0631\u0647\u0627\u06cc \u0627\u062c\u062a\u0645\u0627\u0639\u06cc "),Object(N.a)(P,"channels","\u06a9\u0627\u0646\u0627\u0644 \u0647\u0627"),Object(N.a)(P,"close","\u0628\u0633\u062a\u0646"),Object(N.a)(P,"channel","\u06a9\u0627\u0646\u0627\u0644 "),Object(N.a)(P,"details","\u0634\u0631\u062d"),Object(N.a)(P,"Shoa","\u0634\u0639\u0627\u0639 "),Object(N.a)(P,"role","\u0646\u0642\u0634"),Object(N.a)(P,"Default","\u067e\u06cc\u0634 \u0641\u0631\u0636"),Object(N.a)(P,"NonDefault","\u063a\u06cc\u0631 \u067e\u06cc\u0634 \u0641\u0631\u0636 "),Object(N.a)(P,"value"," \u0645\u0642\u062f\u0627\u0631"),Object(N.a)(P,"true","\u0645\u062b\u0628\u062a"),Object(N.a)(P,"false","\u0645\u0646\u0641\u06cc"),Object(N.a)(P,"access_control_list","\u0644\u06cc\u0633\u062a \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(P,"access_control_form","\u0641\u0631\u0645 \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(P,"assignment_form","\u0641\u0631\u0645 \u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634"),Object(N.a)(P,"comment_form","\u0646\u0638\u0631 \u0628\u062f\u0647\u06cc\u062f"),Object(N.a)(P,"post_form","\u0641\u0631\u0645 \u067e\u0633\u062a"),Object(N.a)(P,"metas","\u067e\u06cc\u0634 \u062c\u062f\u0627\u0648\u0644"),Object(N.a)(P,"shoa","\u0634\u0639\u0627\u0639"),Object(N.a)(P,"form","\u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a"),Object(N.a)(P,"choose_image","\u0627\u0646\u062a\u062e\u0627\u0628 \u0639\u06a9\u0633"),Object(N.a)(P,"logout","\u062e\u0631\u0648\u062c"),Object(N.a)(P,"more","\u0628\u06cc\u0634\u062a\u0631 ..."),Object(N.a)(P,"social","\u0627\u062c\u062a\u0645\u0627\u0639\u06cc"),Object(N.a)(P,"courses","\u062f\u0631\u0648\u0633"),Object(N.a)(P,"discussions","\u06af\u0641\u062a\u06af\u0648 \u0647\u0627"),Object(N.a)(P,"exams","\u0622\u0632\u0645\u0648\u0646 \u0647\u0627 "),Object(N.a)(P,"public","\u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(P,"private","\u062e\u0635\u0648\u0635\u06cc "),Object(N.a)(P,"course_type","\u0646\u0648\u0639 \u062f\u0631\u0633"),Object(N.a)(P,"select_appropriate_title","\u0639\u0646\u0648\u0627\u0646\u06cc \u0645\u0646\u0627\u0633\u0628 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"write_appropriate_description","\u0634\u0631\u062d\u06cc \u0627\u0632 \u0627\u0647\u062f\u0627\u0641 \u0648 \u0631\u0648\u0634 \u0647\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(P,"description","\u0634\u0631\u062d "),Object(N.a)(P,"drag_or_browse","\u0641\u0627\u06cc\u0644 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0631\u0627 \u0627\u06cc\u0646\u062c\u0627 \u0628\u06cc\u0627\u0646\u062f\u0627\u0632\u06cc\u062f \u06cc\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"attachment","\u0641\u0627\u06cc\u0644 \u0647\u0627\u06cc \u067e\u06cc\u0648\u0633\u062a"),Object(N.a)(P,"tasks","\u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"start_date","\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639"),Object(N.a)(P,"deadline","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc"),Object(N.a)(P,"select_a_date","\u06cc\u06a9 \u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"incomplete_data","\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0631\u0627 \u062a\u06a9\u0645\u06cc\u0644 \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"alert","\u0647\u0634\u062f\u0627\u0631"),Object(N.a)(P,"deadline_time","\u0633\u0627\u0639\u062a"),Object(N.a)(P,"start_time","\u0633\u0627\u0639\u062a"),Object(N.a)(P,"select_a_time","\u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u0627\u0639\u062a"),Object(N.a)(P,"coworkers","\u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(P,"works","\u06a9\u0627\u0631\u0647\u0627 "),Object(N.a)(P,"dashboard","\u0645\u06cc\u0632\u06a9\u0627\u0631"),Object(N.a)(P,"tavan","\u062a\u0648\u0627\u0646"),Object(N.a)(P,"statuses","\u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(P,"status","\u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(P,"add_stauts","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(P,"select","\u0627\u0646\u062a\u062e\u0627\u0628"),Object(N.a)(P,"new","\u062c\u062f\u06cc\u062f"),Object(N.a)(P,"task","\u0648\u0638\u06cc\u0641\u0647"),Object(N.a)(P,"attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627"),Object(N.a)(P,"reports","\u0627\u0633\u0646\u0627\u062f \u0648 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(P,"tags","\u0628\u0631\u0686\u0633\u0628 \u0647\u0627"),Object(N.a)(P,"new_tag","\u0628\u0631\u0686\u0633\u0628 \u062c\u062f\u06cc\u062f "),Object(N.a)(P,"recent_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0627\u062e\u06cc\u0631"),Object(N.a)(P,"public_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(P,"sort_by","\u0645\u0631\u062a\u0628 \u0633\u0627\u0632\u06cc"),Object(N.a)(P,"by_title","\u0639\u0646\u0648\u0627\u0646"),Object(N.a)(P,"by_events","\u0631\u062e\u062f\u0627\u062f"),Object(N.a)(P,"deadline_near","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc \u0646\u0632\u062f\u06cc\u06a9"),Object(N.a)(P,"new_report","\u06af\u0632\u0627\u0631\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"new_comments","\u06af\u0641\u062a\u06af\u0648\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"Admin","\u0645\u062f\u06cc\u0631"),Object(N.a)(P,"Colleague","\u0647\u0645\u06a9\u0627\u0631"),Object(N.a)(P,"Observer","\u0646\u0627\u0638\u0631"),Object(N.a)(P,"Creator","\u0633\u0627\u0632\u0646\u062f\u0647"),Object(N.a)(P,"verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632"),Object(N.a)(P,"enter_verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(P,"your_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(P,"your_newest_works","\u062c\u062f\u06cc\u062f\u062a\u0631\u06cc\u0646 \u06a9\u0627\u0631\u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(P,"todo_list","\u062a\u0642\u0633\u06cc\u0645 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631"),Object(N.a)(P,"todo_participants","\u0627\u0641\u0631\u0627\u062f"),Object(N.a)(P,"new_todo_participants","\u0627\u0641\u0631\u0627\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"not_found","\u0686\u06cc\u0632\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),Object(N.a)(P,"are_you_sure","\u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f"),Object(N.a)(P,"Confirmer","\u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u0646\u062f\u0647"),Object(N.a)(P,"time_sheets","\u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(P,"morning_report","\u06af\u0632\u0627\u0631\u0634 \u067e\u06cc\u0634 \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(P,"afternoon_report","\u06af\u0632\u0627\u0631\u0634 \u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(P,"extra_report","\u06af\u0632\u0627\u0631\u0634 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0627\u0631\u06cc"),Object(N.a)(P,"write_appropriate_details","\u0634\u0631\u062d\u06cc \u06a9\u0627\u0645\u0644 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(P,"associations","\u0645\u0631\u062a\u0628\u0637 \u0628\u0627"),Object(N.a)(P,"sheet_date","\u062a\u0627\u0631\u06cc\u062e \u062c\u062f\u0648\u0644"),Object(N.a)(P,"recipients","\u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0646\u062f\u06af\u0627\u0646"),Object(N.a)(P,"sent_by_me","\u0627\u0631\u0633\u0627\u0644 \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(P,"sent_to_me","\u062f\u0631\u06cc\u0627\u0641\u062a \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(P,"priority","\u0644\u0648\u0644\u0648\u06cc\u062a"),Object(N.a)(P,"normal","\u0639\u0627\u062f\u06cc"),Object(N.a)(P,"high","\u0641\u0648\u0631\u06cc"),Object(N.a)(P,"urgent","\u0628\u0633\u06cc\u0627\u0631 \u0641\u0648\u0631\u06cc"),Object(N.a)(P,"archived","\u0622\u0631\u0634\u06cc\u0648 \u0634\u062f\u0647"),Object(N.a)(P,"write_archive_note","\u0645\u062a\u0646 \u062c\u0645\u0639 \u0628\u0646\u062f\u06cc \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u0622\u0631\u0634\u06cc\u0648 \u0633\u0627\u0632\u06cc \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(P,"user_groups","\u06af\u0631\u0648\u0647 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"),Object(N.a)(P,"user_settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0634\u062e\u0635\u06cc"),Object(N.a)(P,"add_involvement_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"remove_involvement_from_tasks","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"change_status_tasks","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"add_works_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06a9\u0627\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"add_reports_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"add_comments_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(P,"add_involvement_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"remove_involvement_from_works","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"change_status_works","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"add_todos_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"add_reports_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"add_comments_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(P,"add_involvement_to_todos","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631 \u0628\u0647 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(P,"remove_involvement_from_todos","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631 \u0627\u0632 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(P,"add_involvement_to_time_sheets","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0628\u0647 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(P,"remove_involvement_from_timesheets","\u062d\u0630\u0641 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0627\u0632 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(P,"notification_type","\u0634\u06cc\u0648\u0647 \u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(P,"mail_notification","\u0627\u06cc\u0645\u06cc\u0644"),Object(N.a)(P,"push_notification","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0648\u0628"),Object(N.a)(P,"sms","\u067e\u06cc\u0627\u0645\u06a9"),Object(N.a)(P,"if_someone_adds_you_youll_be_asked","\u0686\u0646\u0627\u0646\u0686\u0647 \u06a9\u0633\u06cc \u0634\u0645\u0627 \u0631\u0627 \u0628\u0647 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u06cc\u0627\u0641\u0632\u0627\u06cc\u062f \u0634\u0645\u0627 \u0628\u0627\u06cc\u062f \u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u06cc\u062f."),Object(N.a)(P,"previous_attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627\u06cc \u0642\u0628\u0644\u0627 \u0622\u067e\u0644\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(P,"cas","\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a \u0645\u0631\u06a9\u0632\u06cc"),Object(N.a)(P,"profile","\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"),Object(N.a)(P,"groups","\u06af\u0631\u0648\u0647\u0628\u0646\u062f\u06cc \u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(P,"confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0634\u062f\u0647"),Object(N.a)(P,"not_confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0646\u0634\u062f\u0647"),Object(N.a)(P,"blocked_list","\u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0645\u0633\u062f\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(P,"notifications","\u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(P,"privacy","\u062d\u0631\u06cc\u0645 \u062e\u0635\u0648\u0635\u06cc"),Object(N.a)(P,"add_comments_to_reports","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(P,"new_notifications","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0647\u0627\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"new_reports","\u0622\u062e\u0631\u06cc\u0646 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(P,"events_calendar","\u062a\u0642\u0648\u06cc\u0645 \u0631\u062e\u062f\u0627\u062f\u0647\u0627"),Object(N.a)(P,"to","\u0628\u0647"),Object(N.a)(P,"statusChanges","\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(P,"in_reply_to","\u062f\u0631 \u067e\u0627\u0633\u062e \u0628\u0647"),Object(N.a)(P,"avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(P,"number_of_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(P,"duration","\u0637\u0648\u0644 \u062c\u0644\u0633\u0647"),Object(N.a)(P,"kian","\u06a9\u06cc\u0627\u0646"),Object(N.a)(P,"attendances","\u062d\u0627\u0636\u0631\u06cc\u0646"),Object(N.a)(P,"attendance_duration","\u062f\u0642\u0627\u06cc\u0642 \u062d\u0636\u0648\u0631"),Object(N.a)(P,"utid","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(P,"attendance_percentage","\u062f\u0631\u0635\u062f \u062d\u0636\u0648\u0631"),Object(N.a)(P,"faculties","\u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(P,"total_assets","\u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(P,"id","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(P,"courses_most_quiz","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a"),Object(N.a)(P,"courses_most_resource","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u0646\u0627\u0628\u0639"),Object(N.a)(P,"courses_most_assignment","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0645\u0631\u06cc\u0646 \u0647\u0627"),Object(N.a)(P,"teacher","\u0645\u062f\u0631\u0633"),Object(N.a)(P,"courses_most_occ","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(P,"courses_most_ocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(P,"courses_most_activity","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(P,"bb_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(P,"adobe_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(P,"number_of_bb_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(P,"courses_most_bocc","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062c\u0644\u0633\u0647 \u062f\u0631 \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(P,"courses_most_bocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(P,"person_session","\u0646\u0641\u0631/\u062c\u0644\u0633\u0647"),Object(N.a)(P,"session","\u062c\u0644\u0633\u0647"),Object(N.a)(P,"bb_avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(P,"link","\u0644\u06cc\u0646\u06a9 \u062f\u0631\u0633 \u062f\u0631 \u0627\u06cc\u0644\u0631\u0646"),Object(N.a)(P,"sections","\u067e\u0631\u062f\u06cc\u0633 \u0647\u0627 \u0648 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(P,"facultyId","\u0634\u0646\u0627\u0633\u0647 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 "),Object(N.a)(P,"is_typing","\u062f\u0631\u062d\u0627\u0644 \u0646\u0648\u0634\u062a\u0646 \u0627\u0633\u062a"),Object(N.a)(P,"pass","\u0631\u0645\u0632"),Object(N.a)(P,"new_slide","\u0627\u0633\u0644\u0627\u06cc\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(P,"unshare","\u0639\u062f\u0645 \u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(P,"start_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u0631\u0648\u0634\u0646"),Object(N.a)(P,"end_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u062e\u0627\u0645\u0648\u0634"),Object(N.a)(P,"record","\u0636\u0628\u0637 \u062c\u0644\u0633\u0647"),Object(N.a)(P,"recording","\u062f\u0631 \u062d\u0627\u0644 \u0636\u0628\u0637"),Object(N.a)(P,"stop","\u0642\u0637\u0639"),Object(N.a)(P,"send","\u0627\u0631\u0633\u0627\u0644"),Object(N.a)(P,"chat","\u06af\u0641\u062a\u06af\u0648"),Object(N.a)(P,"write_here","\u0627\u06cc\u0646\u062c\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f..."),Object(N.a)(P,"frame_link","\u0622\u062f\u0631\u0633"),Object(N.a)(P,"user_count","\u062a\u0639\u062f\u0627\u062f \u062d\u0627\u0636\u0631\u06cc\u0646"),P),F=(a.Component,n(14)),z=n(46),B=n(224),W=(n(399),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={image:null},n.handleLoad=function(){n.setState({image:n.image})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage(),e.width!==this.props.width&&this.loadImage(),e.height!==this.props.height&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.crossOrigin="anonymous",this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return r.a.createElement(z.b,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,image:this.state.image,ref:function(t){e.imageNode=t}})}}]),t}(r.a.Component)),q=n(209),J=n(210),H=n.n(J),G=(a.Component,n(91)),K=n.n(G),Q=n(128),Y=n.n(Q),Z=n(211),X=n.n(Z),ee=(a.Component,n(29)),te=n(43),ne=(a.Component,n(180),a.Component,n(61)),ae=n.n(ne),re=n(212),ie=(a.Component,function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(p.a)(n)),n.throttle=n.throttle.bind(Object(p.a)(n)),n.send=n.send.bind(Object(p.a)(n)),n.state={lastTime:Date.now(),srcLink:null,counter:0},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;e.srcLink!==this.props.srcLink&&this.setState({counter:this.state.counter+1},(function(){console.log(t.state.counter)}))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"send",value:function(){this.state.srcLink&&(this.throttle(this.state.srcLink,"srcLink"),this.props.appendLink(this.state.srcLink),this.$$("#link-form").val(""),this.setState({counter:this.state.counter+1}))}},{key:"share",value:function(){var e=this;if(this.props.isAdmin)return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.p,null,r.a.createElement(c.q,{inputId:"link-form",label:$.frame_link,type:"text",placeholder:$.write_here,onChange:function(t){e.handleChange({srcLink:t.target.value})}})),r.a.createElement(c.e,{fill:!0,onClick:function(){return e.send()}},$.submit))}},{key:"header",value:function(){return this.props.isAdmin?r.a.createElement(c.i,null,this.share()):null}},{key:"render",value:function(){return r.a.createElement("iframe",{key:this.state.counter,class:"frame",height:"100%",width:"100%",src:"https://bayan.ut.ac.ir/live/embed/VGQow",frameborder:"0",allowfullscreen:"",title:"Wysiwyg Embedded Content"})}}]),t}(a.Component)),oe=(n(494),function(e){return r.a.createElement(c.v,{id:"main-page"},r.a.createElement(c.u,{title:$.home},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"}))),r.a.createElement(ie,{wsSend:e.wsSend,appendLink:e.appendLink,srcLink:e.srcLink,isAdmin:e.isAdmin}),r.a.createElement("div",{id:"mixedaudio"}))}),se=function(e){return r.a.createElement(c.v,null,r.a.createElement("div",{className:"icon-bar "},r.a.createElement("div",{className:"icon-circle"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M7 7h10v6a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3v-6"}),r.a.createElement("line",{x1:"9",y1:"3",x2:"9",y2:"7"}),r.a.createElement("line",{x1:"15",y1:"3",x2:"15",y2:"7"}),r.a.createElement("path",{d:"M12 16v2a2 2 0 0 0 2 2h3"}))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.ionActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.screenActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{className:e.screenActive?"fc-white":""},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("circle",{cx:"12",cy:"12",r:"1"}),r.a.createElement("circle",{cx:"12",cy:"12",r:"5"}),r.a.createElement("line",{x1:"15.9",y1:"20.11",x2:"15.9",y2:"20.12"}),r.a.createElement("line",{x1:"19.04",y1:"17.61",x2:"19.04",y2:"17.62"}),r.a.createElement("line",{x1:"20.77",y1:"14",x2:"20.77",y2:"14.01"}),r.a.createElement("line",{x1:"20.77",y1:"10",x2:"20.77",y2:"10.01"}),r.a.createElement("line",{x1:"19.04",y1:"6.39",x2:"19.04",y2:"6.4"}),r.a.createElement("line",{x1:"15.9",y1:"3.89",x2:"15.9",y2:"3.9"}),r.a.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"3.01"}),r.a.createElement("line",{x1:"8.1",y1:"3.89",x2:"8.1",y2:"3.9"}),r.a.createElement("line",{x1:"4.96",y1:"6.39",x2:"4.96",y2:"6.4"}),r.a.createElement("line",{x1:"3.23",y1:"10",x2:"3.23",y2:"10.01"}),r.a.createElement("line",{x1:"3.23",y1:"14",x2:"3.23",y2:"14.01"}),r.a.createElement("line",{x1:"4.96",y1:"17.61",x2:"4.96",y2:"17.62"}),r.a.createElement("line",{x1:"8.1",y1:"20.11",x2:"8.1",y2:"20.12"}),r.a.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"21.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement(c.e,{panelOpen:"left",className:e.chatActive?"fc-white mr--5":"mr--5",onClick:function(){return e.chatDeactive()},style:{textOverflow:"clip"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"}),r.a.createElement("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{onClick:function(){return e.logout()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M5.64 5.632a9 9 0 1 0 6.36 -2.632v7.714"}))))),r.a.createElement(c.p,{className:"fs-13 z-1 mb-80"}),r.a.createElement(c.p,{className:"fs-13 z-1"},function(){if(e.participants){var t=[];e.participants.map((function(n){n.display&&t.push(r.a.createElement(c.r,null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:n.userColor,"stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("circle",{cx:"12",cy:"7",r:"4"}),r.a.createElement("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})),r.a.createElement("span",null,n.display),function(e){return"talking"===e.current?r.a.createElement("div",{className:"right-icon-3"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M18 8a3 3 0 0 1 0 6"}),r.a.createElement("path",{d:"M10 8v11a1 1 0 0 1 -1 1h-1a1 1 0 0 1 -1 -1v-5"}),r.a.createElement("path",{d:"M12 8h0l4.524 -3.77a0.9 .9 0 0 1 1.476 .692v12.156a0.9 .9 0 0 1 -1.476 .692l-4.524 -3.77h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h8"}))):null}(n),function(t){if(t.uuid===e.userUUID&&e.isAdmin)return e.muted?r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2.002 -2a6.967 6.967 0 0 0 1.152 -3.85"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"})))):r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()},style:{color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"9",y:"2",width:"6",height:"11",rx:"3"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 14 0"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"}))))}(n),function(t){if(t.uuid===e.userUUID&&e.isAdmin)return r.a.createElement("div",{className:"right-icon-1"},e.ionPublishBtn())}(n),function(t){if(t.uuid===e.userUUID&&e.isAdmin)return r.a.createElement("div",{className:"right-icon-2"},e.screenPublishBtn())}(n)))}))}return t}()))},ce=n(219),le=n(52),de=n.n(le),ue=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).throttle=n.throttle.bind(Object(p.a)(n)),n.send=n.send.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.chatItems=n.chatItems.bind(Object(p.a)(n)),n.state={lastTime:Date.now(),content:null,item:null},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){e.chats!==this.props.chats&&console.log(this.props.chats)}},{key:"componentDidMount",value:function(){}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"send",value:function(){this.state.item&&(this.throttle(this.state.item,"chat"),this.props.appendChat(this.state.item),this.$$("#chat-form").val(""),this.props.chatDeactive())}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"chatItems",value:function(){var e=[];return this.props.chats.slice(0).reverse().map((function(t){e.push(r.a.createElement("div",{class:"item-content",style:{color:"black"}},r.a.createElement("div",{class:"item-inner"},r.a.createElement("div",{class:"item-title-row"},r.a.createElement("div",{class:"item-title",style:{fontSize:"10px"}},t.name),r.a.createElement("div",{class:"item-after",style:{color:"white"}},r.a.createElement("span",null,de()(t.time).fromNow()))),r.a.createElement("div",{class:"item-text mh-auto",style:{height:"auto",color:"black"}},t.content))))})),e}},{key:"render",value:function(){var e=this;return r.a.createElement(c.v,null,r.a.createElement("div",{className:"icon-bar "},r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M7 7h10v6a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3v-6"}),r.a.createElement("line",{x1:"9",y1:"3",x2:"9",y2:"7"}),r.a.createElement("line",{x1:"15",y1:"3",x2:"15",y2:"7"}),r.a.createElement("path",{d:"M12 16v2a2 2 0 0 0 2 2h3"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement(c.e,{panelOpen:"left",className:this.props.chatActive?"fc-white mr--5":"mr--5",onClick:function(){return e.props.chatDeactive()},style:{textOverflow:"clip"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"}),r.a.createElement("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{onClick:function(){return e.props.logout()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M5.64 5.632a9 9 0 1 0 6.36 -2.632v7.714"}))))),r.a.createElement(c.y,null,r.a.createElement(c.k,{className:"text-align-center",style:{marginTop:"15px"}},r.a.createElement(c.m,{type:"semicircle",value:this.props.userCounter/4e3,valueText:this.props.userCounter,valueTextColor:"#4d255a",borderColor:"#4d255a",labelText:$.user_count,labelTextColor:"#333"}))),r.a.createElement(c.p,{noHairlinesMd:!0,className:"fs-13 z-1 mb-40"},r.a.createElement(c.q,{inputId:"chat-form",label:$.chat,type:"textarea",placeholder:$.write_here,clearButton:!0,resizable:!0,onChange:function(t){e.handleChange({item:{content:t.target.value,name:e.props.name,time:Date.now(),uuid:Object(ce.v4)()}})}}),r.a.createElement(c.y,{className:"mt-10"},r.a.createElement(c.k,null),r.a.createElement(c.k,null),r.a.createElement(c.k,null,r.a.createElement(c.e,{fill:!0,onClick:function(){return e.send()}},$.send)))),r.a.createElement(c.p,{mediaList:!0,className:"fs-13 z-1"},this.chatItems()))}}]),t}(a.Component),me=function(e){function t(t){if(e.signingUp){if("name"==t)return r.a.createElement(c.q,{label:$.name,className:"fs-14",type:"text",placeholder:"Your username",value:e.name,onInput:function(t){e.handleChangeValue({name:t.target.value})}});if("passwordConfirmation"==t)return r.a.createElement(c.q,{label:$.password_confirmation,type:"text",className:"fs-14",placeholder:"Password Confirmation",value:e.passwordConfirmation,onInput:function(t){e.handleChangeValue({passwordConfirmation:t.target.value})}})}}return r.a.createElement(c.v,{loginScreen:!0},r.a.createElement(c.t,null," "),r.a.createElement(c.p,{form:!0},r.a.createElement(c.q,{label:$.username,className:"fs-14",type:"text",placeholder:"Your username",value:e.email,onInput:function(t){e.handleChangeValue({email:t.target.value})}}),t("name"),r.a.createElement(c.q,{label:$.password,type:"text",className:"fs-14",placeholder:"Password",value:e.password,onInput:function(t){e.handleChangeValue({password:t.target.value})}}),t("passwordConfirmation")),r.a.createElement(c.p,null,e.signingUp?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.sign_up),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.loginActive},$.you_can_login))):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.login),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.signUp},$.you_can_sign_up)))))},pe=(n(421),function(e){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.home},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"}))),r.a.createElement(c.B,{tabbar:!0,top:!0},r.a.createElement(c.o,{tabLink:"#tab-1",tabLinkActive:!0},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))),r.a.createElement(c.o,{tabLink:"#tab-2"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))),r.a.createElement(c.o,{tabLink:"#tab-3"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"})))),r.a.createElement(c.y,null))});var he=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),bbMeetingHistogram:null,meetingHistogram:null,hourMeetingHistogram:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_multiple_list",this.getList)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_multiple_list",this.getList)}},{key:"componentDidMount",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(j+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){console.log(e),v.dispatch({type:"MULTIPLE_LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}("/home",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=y.getMutipleList(),t=y.getKlass();e&&"Home"===t&&this.setState({meetingHistogram:e.meeting_histogram,hourMeetingHistogram:e.hour_meeting_histogram,bbMeetingHistogram:e.bb_meeting_histogram})}},{key:"render",value:function(){var e=this.state,t=e.meetingHistogram,n=e.bbMeetingHistogram,a=e.hourMeetingHistogram;return r.a.createElement(pe,{bbMeetingHistogram:n,meetingHistogram:t,hourMeetingHistogram:a})}}]),t}(a.Component),fe=(n(425),function(e){return e.profile?(console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.p,{className:"fs-12"},r.a.createElement(c.r,{key:"profile-show"+e.profile.id,title:e.profile.fullname,after:""},r.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))),r.a.createElement(c.f,null),r.a.createElement(c.f,null))):null}),ge=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getInstance=e.getInstance.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),profile:null,id:null,actuals:null,metas:null,channels:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"getInstance",value:function(){var e=y.getIntance(),t=y.getKlass();e&&"Profile"===t&&this.setState({profile:e,id:e.id})}},{key:"fab",value:function(){if(this.state.profile)return r.a.createElement(c.l,{href:"/profiles/"+this.state.profile.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},r.a.createElement(c.n,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),r.a.createElement(c.n,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state.profile;return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.profiles,backLink:$.back}),this.fab(),r.a.createElement(fe,{profile:e}))}}]),t}(a.Component),ve=n(42),be=n.n(ve),ye=(n(186),n(187),n(188),function(e){return e.profiles?r.a.createElement(c.p,{mediaList:!0},e.profiles.map((function(e){return r.a.createElement(c.r,{key:be.a.lib.WordArray.random(32),link:"/profiles/"+e.id,title:e.fullname,after:"",subtitle:"",text:""},r.a.createElement("img",{slot:"media",src:e.avatar,width:"40",height:"40"}))}))):r.a.createElement("ul",null)}),we=function(e){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.profiles,backLink:$.back},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"})),r.a.createElement(c.A,{inner:!1},r.a.createElement(c.z,{disableButtonText:$.cancel,placeholder:$.search,onChange:function(t){e.search({query:t.target.value})}}))),r.a.createElement(c.d,null),r.a.createElement(c.l,{href:"/profiles/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},r.a.createElement(c.n,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),r.a.createElement(c.n,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),r.a.createElement(ye,{profiles:e.profiles}))},ke=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(p.a)(e)),e.search=e.search.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),profiles:null,query:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){O("profiles",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState(e,(function(){O("profiles/search",t.state.page,{q:t.state.query},t.state.token)}))}},{key:"getList",value:function(){var e=y.getList(),t=y.getKlass();e&&"Profile"===t&&this.setState({profiles:e})}},{key:"render",value:function(){var e=this.state.profiles;return r.a.createElement(we,{profiles:e,search:this.search})}}]),t}(r.a.Component),Se=n(221),je=n.n(Se),Oe=function(e){return e.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.profile_info),r.a.createElement(c.g,null,r.a.createElement(c.p,null,r.a.createElement(c.q,{label:$.firstname,type:"text",placeholder:"...",defaultValue:e.name,onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.q,{label:$.surename,type:"text",placeholder:"...",defaultValue:e.surename,onInput:function(t){e.handleChange({surename:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.o,null),r.a.createElement(c.o,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.submit))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,r.a.createElement("img",{src:e.avatar,width:"40",height:"40"})),r.a.createElement(je.a,{withIcon:!0,buttonText:$.choose_image,onChange:e.onDrop,buttonClassName:"upload-btn",imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880}))):null},Ee=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.handleChangeValueFields=e.handleChangeValueFields.bind(Object(p.a)(e)),e.removeActual=e.removeActual.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.submitFields=e.submitFields.bind(Object(p.a)(e)),e.onDrop=e.onDrop.bind(Object(p.a)(e)),e.getList=e.getList.bind(Object(p.a)(e)),e.getList=e.getList.bind(Object(p.a)(e)),e.state={profile:{},metas:null,token:window.localStorage.getItem("token"),fields:[],name:"dd",surename:"",pictures:[],avatar:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_instance",this.getInstance),y.on("set_instance",this.getInstance),y.on("deleted_instance",this.getInstance),y.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_instance",this.getInstance),y.removeListener("set_instance",this.getInstance),y.removeListener("deleted_instance",this.getInstance),y.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){O("metas",this.state.page)}},{key:"onDrop",value:function(e){console.log(e[0]),E("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){I("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"submitFields",value:function(){_("actuals",{meta_id:this.state.metaId,content:this.state.fields},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"handleChangeValueFields",value:function(e,t,n){var a=this.state.fields;if(a.length>0)for(var r=0;r<a.length;r++)if(a[r].fid&&a[r].fid===e){var i=Object.assign({},this.state);i.fields[r]={fid:e,value:t,metaId:n},this.setState(i)}else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})});else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})})}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=y.getIntance(),t=y.getKlass();e&&"Profile"===t&&this.setState({metas:e.metas,profile:e})}},{key:"removeActual",value:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");k.a.get(j+"/"+e+"/delete?"+a,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"DELETE_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}("actuals",{uuid:e})}},{key:"getList",value:function(){var e=y.getList(),t=y.getKlass();e&&"Meta"===t&&this.setState({metas:e})}},{key:"render",value:function(){var e=this.state,t=(e.profile,e.metas),n=e.name,a=e.avatar,i=e.surename;return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(Oe,{name:n,avatar:a,surename:i,metas:t,onDrop:this.onDrop,removeActual:this.removeActual,submitFields:this.submitFields,submit:this.submit,editing:!0,handleChangeValueFields:this.handleChangeValueFields,handleChange:this.handleChangeValue}))}}]),t}(a.Component),Ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.onDrop=e.onDrop.bind(Object(p.a)(e)),e.state={name:null,surename:null,token:window.localStorage.getItem("token"),profile:null,id:null,pictures:[],avatar:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_instance",this.getInstance),y.on("set_instance",this.setInstance),y.on("file_posted",this.getInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_instance",this.getInstance),y.removeListener("set_instance",this.setInstance),y.removeListener("file_posted",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.$f7route.params.profileId&&C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"onDrop",value:function(e){console.log(e[0]),E("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){I("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=y.getIntance(),t=y.getKlass();e&&"Profile"===t&&this.setState({id:e.id,profile:e,name:e.name,surename:e.surename,avatar:e.avatar})}},{key:"render",value:function(){var e=this.state,t=e.profile,n=e.name,a=e.surename,i=e.avatar;return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(Oe,{profile:t,name:n,avatar:i,surename:a,onDrop:this.onDrop,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(a.Component);function _e(){var e=this;U.init({debug:"all",callback:function(){var t=new U({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),U.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){U.error("  -- Error attaching plugin...",e)},consentDialog:function(e){U.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){U.log("ICE state changed to "+e)},mediaState:function(e,t){U.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){U.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){U.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(U.debug("Event: "+a),a)if("joined"===a){if(t.id&&(e.setState({myid:t.id}),U.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){U.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!1},jsep:t})},error:function(e){U.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){var o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;e.addParticipant(r[i].id,r[i].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),U.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),U.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)U.warn("The room has been destroyed!");else if("event"===a){if(t.participants){r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;U.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")"),e.addParticipant(r[i].id,r[i].display)}}else if(t.error)return void t.error_code;if(t.leaving){var d=t.leaving;U.log("Participant left: "+d+" elements with ID #rp"+d+")")}}n&&(U.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(e){U.debug(" ::: Got a local stream :::",e)},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),U.attachMediaStream(document.getElementById("roomaudio"),t))},oncleanup:function(){U.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function Ie(){var e={request:"join",room:1234,display:this.state.fullname+" \xa7"+this.state.userUUID};this.state.mixertest.send({message:e})}function Te(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],role:"listener"})}),console.log("participant added:",n[1])}function xe(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}var De=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).sessionCreate=_e.bind(Object(p.a)(e)),e.registerUsername=Ie.bind(Object(p.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.addParticipant=Te.bind(Object(p.a)(e)),e.exisitingParticipant=xe.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+U.randomString(12),roomId:1234,webrtcUp:null,myusername:null,mixertest:null,myid:null,mystream:null,pin:null,userUUID:null,fullname:null,isOwner:!1,muted:!0,participants:[],room:null,notification:{},chats:[],panelOpen:!1},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("got_instance",this.getInstance),y.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("got_instance",this.getInstance),y.removeListener("set_instance",this.setInstance),window.removeEventListener("beforeunload",this.unPublishData)}},{key:"componentDidMount",value:function(){C("rooms",this.$f7route.params.roomId,this.state.token),window.addEventListener("beforeunload",this.unPublishData),window.innerWidth>960&&(this.setState({panelOpen:!0}),console.log(">960"));var e=this.$f7;console.log("props",e.panel.get("#panel-r"))}},{key:"submitParticipation",value:function(e){_("participations",{room_id:this.state.id,activity:e},this.state.token)}},{key:"getInstance",value:function(){var e=this,t=y.getIntance(),n=y.getKlass();t&&"Room"===n&&this.setState({room:t,id:t.id,roomId:t.room_id,pin:t.pin,fullname:t.user_fullname,title:t.title,isOwner:t.is_owner},(function(){return e.submitParticipation("joined")})),console.log(t)}},{key:"pageAfterIn",value:function(){this.sessionCreate()}},{key:"setInstance",value:function(){var e=this,t=y.getIntance(),n=y.getKlass();t&&"Participation"===n&&this.setState({userUUID:t.uuid},(function(){return e.pageAfterIn()})),console.log(t)}},{key:"render",value:function(){var e=this.state,t=(e.token,e.shortners,e.urls,e.publishedMicrophone,e.publishedCamera,e.publishedDesktop,e.feeds,e.muted,e.lowFeeds,e.requests,e.participants),n=(e.room,e.notification,e.chats,e.isOwner,e.roomId,e.panelOpen);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{participants:t,panelOpen:n}))}}]),t}(r.a.Component),Ae=n(222),Me=n.n(Ae),Re=function(e){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.sign_up},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,{className:"mh-auto"},r.a.createElement(c.p,null,r.a.createElement(c.q,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.o,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.e,{fill:!0,className:"fs-11 external f-color-black bg-teal",href:"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Ftavan.ut.ac.ir%2Fusers%2Fservice",animate:!1,ignoreCache:!0},$.cas," "),r.a.createElement(c.o,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},Le=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),email:"",password:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.$f7route.params.token&&_("users/validate_token",{},this.$f7route.params.token),this.state.token&&this.state.token.length>10&&_("users/validate_token",{},this.state.token)}},{key:"submit",value:function(){_("users/login",{email:this.state.email,password:this.state.password})}},{key:"setInstance",value:function(){var e=y.getKlass();"Login"===e&&this.$f7router.navigate("/verification/"+this.state.email),"Validate"===e&&(this.$f7router.navigate("/"),window.location.reload()),console.log(e)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Re,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ve=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={email:"",password:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){_("users/validate_token",{},this.$f7route.params.token)}},{key:"setInstance",value:function(){var e=y.getIntance();"Validate"===y.getKlass()?(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload()):(this.$f7router.navigate("/login_error/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Re,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Pe=function(e){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.sign_up},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.sign_up),r.a.createElement(c.g,null,r.a.createElement(c.p,null,r.a.createElement(c.q,{label:$.firstname+" *",placeholder:$.enter_your_name,type:"text",name:be.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.q,{label:$.surename+" *",placeholder:$.enter_your_surename,type:"text",name:be.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({surename:t.target.value})}}),r.a.createElement(c.q,{label:" * "+$.email,type:"email",validate:!0,placeholder:$.enter_your_email,className:"ltr",value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.o,{href:"/login/"},$.if_registered,"\xa0",$.you_can_login," "),r.a.createElement(c.o,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.sign_up))))},Ue=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={email:"",name:"",surename:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={email:this.state.email,name:this.state.name,surename:this.state.surename};if(this.state.email&&this.state.email.length>0&&this.state.name&&this.state.name.length>0&&this.state.surename&&this.state.surename.length>0)_("users/sign_up",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"setInstance",value:function(){"SignUp"===y.getKlass()&&(this.$$(".btn").show(),this.$f7router.navigate("/verification/"+this.state.email))}},{key:"handleChangeValue",value:function(e){this.setState(e),console.log(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Pe,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ne=function(e){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:$.verification},r.a.createElement(c.o,{panelOpen:"right"},r.a.createElement(c.n,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,null,r.a.createElement(c.p,null,r.a.createElement(c.q,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}),r.a.createElement(c.q,{label:$.verification_code,type:"text",placeholder:$.enter_verification_code,onInput:function(t){e.handleChange({verificationCode:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.o,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.o,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},$e=[{path:"/",component:he},{path:"/login/",component:Le},{path:"/sign_up/",component:Ue},{path:"/verification/:email",component:function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={verificationCode:"",email:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){y.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){y.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.setState({email:this.$f7route.params.email})}},{key:"submit",value:function(){_("users/verify",{verification_code:this.state.verificationCode})}},{key:"setInstance",value:function(){var e=y.getIntance(),t=y.getKlass();e&&"Verify"==t&&(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state,t=(e.username,e.email);return r.a.createElement(Ne,{submit:this.submit,email:t,handleChange:this.handleChangeValue})}}]),t}(r.a.Component)},{path:"/login_jwt/:token",component:Ve},{path:"/profiles/",component:ke},{path:"/profiles/:profileId/edit",component:Ce},{path:"/profiles/new",component:Ee},{path:"/profiles/:profileId",component:ge},{path:"/rooms/",component:Me.a},{path:"/rooms/:roomId",component:De},{path:"(.*)",component:function(){return r.a.createElement(c.v,null,r.a.createElement(c.u,{title:"Not found",backLink:"Back"}),r.a.createElement(c.b,{strong:!0},r.a.createElement("p",null,"Sorry"),r.a.createElement("p",null,"Requested content not found.")))}}];function Fe(){var e=this;U.init({debug:"all",callback:function(){var t=new U({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),U.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){U.error("  -- Error attaching plugin...",e)},consentDialog:function(e){U.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){U.log("ICE state changed to "+e)},mediaState:function(e,t){U.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){U.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){U.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(U.debug("Event: "+a),a)if(console.log(a,t),"talking"==a&&e.participantChangeStatus(t.id,"talking"),"stopped-talking"==a&&e.participantChangeStatus(t.id,"stopped-talking"),"joined"===a){if(t.id&&(e.setState({myid:t.id}),U.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){U.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!0},jsep:t})},error:function(e){U.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){var o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;console.log("%%%%%%%%",r[i]),e.addParticipant(r[i].id,r[i].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),U.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;console.log(">>>>>>",r[i]),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),U.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)U.warn("The room has been destroyed!");else if("event"===a){if(console.log("Participant...",t),t.participants){r=t.participants;for(var i in U.debug("Got a list of participants:",r),r){o=r[i].id,s=r[i].display,c=r[i].setup,l=r[i].muted;var d=r[i].talking;U.debug("  >> ["+o+"] "+s+" (setup="+c+", muted="+l+")"),console.log("%%%%%%%%",r),d&&console.log("%%%%%%%%",r[i].id,"is talking ..."),l&&e.participantChangeStatus(r[i].id,"stopped-talking"),e.addParticipant(r[i].id,r[i].display)}}else if(t.error)return void t.error_code;if(t.leaving){var u=t.leaving;e.removeParticipant(u),U.log("Participant left: "+u+" elements with ID #rp"+u+")")}}n&&(U.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(t){U.debug(" ::: Got a local stream :::",t),console.log("Local stream ******",t),console.log("Local stream ******",t.getTracks()),e.setState({localStream:t})},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),U.attachMediaStream(document.getElementById("roomaudio"),t),e.setState({remoteStream:t}))},oncleanup:function(){U.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function ze(){var e={request:"join",room:this.state.roomId,pin:this.state.pin,display:this.state.fullname+" \xa7"+this.state.userUUID+"\xa7"+this.state.userColor};this.state.mixertest.send({message:e}),this.setState({myId:this.state.mixertest.id})}function Be(e){this.setState({participants:this.state.participants.filter((function(t){return t.id!==e}))})}function We(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],userColor:n[2],role:"listener",current:"stopped-talking"})}),console.log("participant added:",n[1])}function qe(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}function Je(e){var t=this.state.participants.filter((function(t){return t.uuid===e}));return 0===t.length?"":t[0].display}function He(e,t){console.log(e,t);var n=this,a=n.state.participants;if(a.length>0)for(var r=0;r<a.length;r++)if(console.log(a[r].id),a[r].id==e){var i=Object.assign({},n.state);i.participants[r]={id:a[r].id,display:a[r].display,uuid:a[r].uuid,userColor:a[r].userColor,role:a[r].role,current:t},n.setState(i,(function(){return console.log(n.state.participants)}))}}function Ge(){this.state.mixertest.send({message:{request:"configure",muted:this.state.muted}}),this.participantChangeStatus(this.state.myId,"stopped-talking")}function Ke(){this.state.mixertest.send({message:{request:"unpublish"}})}function Qe(){var e=this,t=new te.IonSFUJSONRPCSignal(S.ionSignalServer);e.setState({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},signal:t},(function(){var t=new ee.Client(e.state.signal,e.state.config);e.setState({clientLocal:t},(function(){e.state.signal.onopen=function(){return e.state.clientLocal.join("room"+e.state.display)},e.state.clientLocal.ontrack=function(t,n){console.log("got track",t.id,"for stream",n.id),"video"===t.kind&&(t.onunmute=function(){0==e.state.streams.filter((function(e){return e.id===n.id})).length&&e.setState({streams:e.state.streams.concat(n),ionActive:!0},(function(){console.log("Streams are ...",e.state.streams)})),n.onremovetrack=function(){console.log("Stream owner left"),e.setState({streams:e.state.streams.filter((function(e){return e.id!==n.id}))},(function(){0!=e.state.streams.length||e.state.media||e.setState({ionActive:!1})})),e.$$("#remoteVideos").remove(),e.$$("#videos").append("<div id='remoteVideos'></div>")}})}}))}))}function Ye(){var e=this;ee.LocalStream.getUserMedia({resolution:"vga",video:!0,audio:!1}).then((function(t){e.setState({media:t,ionActive:!0});var n=document.createElement("video");n.srcObject=t,n.autoplay=!0,n.muted=!0,n.width="320",e.state.clientLocal.publish(t),console.log(t),e.$$("#remoteVideos").append(n),t.getVideoTracks()[0].onended=function(){e.ionUnPublish()}})).catch(console.error)}function Ze(){var e=this;if(this.state.streams)return this.state.streams.map((function(t){if(console.log("Attaching to stream ...",t),0==e.$$("#"+t.id).length){var n=document.createElement("video");n.srcObject=t,n.autoplay=!0,n.muted=!0,n.width="320",n.id=t.id,e.$$("#remoteVideos").append(n)}})),[]}function Xe(){var e=this;this.state.media.unpublish(),this.state.media.getTracks().forEach((function(e){return e.stop()})),this.$$("#remoteVideos").remove(this.state.media.id),this.$$("#videos").append("<div id='remoteVideos'></div>"),this.setState({media:null},(function(){0!=e.state.streams.length||e.state.media||e.setState({ionActive:!1})}))}function et(){var e=this;return e.state.media?r.a.createElement("a",{onClick:function(){return e.ionUnPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"1px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M15 11v-1l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -.675 .946"}),r.a.createElement("path",{d:"M10 6h3a2 2 0 0 1 2 2v3m0 4v1a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h1"})))):r.a.createElement("a",{fill:!0,onClick:function(){return e.ionStart()}},r.a.createElement("div",{style:{float:"right",paddingTop:"3px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"18",height:"18",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"}),r.a.createElement("line",{x1:"7",y1:"12",x2:"11",y2:"12"}),r.a.createElement("line",{x1:"9",y1:"10",x2:"9",y2:"14"}))))}function tt(e){var t=this;console.log(e.target.value),this.setState({display:e.target.value},(function(){console.log("Display:"+t.state.display)}))}function nt(){var e=this,t=new te.IonSFUJSONRPCSignal(S.ionSignalServer);e.setState({screenConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},screenSignal:t},(function(){var t=new ee.Client(e.state.screenSignal,e.state.screenConfig);e.setState({screenClientLocal:t},(function(){e.state.screenSignal.onopen=function(){return e.state.screenClientLocal.join("screen room")},e.state.screenClientLocal.ontrack=function(t,n){console.log("got track",t.id,"for stream",n.id),"video"===t.kind&&(t.onunmute=function(){0==e.state.screenStreams.filter((function(e){return e.id===n.id})).length&&e.setState({screenStreams:e.state.screenStreams.concat(n),screenActive:!0},(function(){})),n.onremovetrack=function(){console.log("Stream owner left"),e.setState({screenStreams:e.state.screenStreams.filter((function(e){return e.id!==n.id}))},(function(){0!=e.state.screenStreams.length||e.state.screenMedia||e.setState({screenActive:!1})})),e.$$("#remotes").remove(),e.$$("#screen").append("<div id='remotes'></div>")}})}}))}))}function at(){var e=this,t=this;ee.LocalStream.getDisplayMedia({resolution:"vga",frameRate:15,audio:!1}).then((function(n){console.log(n),e.setState({screenMedia:n,screenActive:!0});var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width=e.$$("#screen").width()-20,e.state.screenClientLocal.publish(n),e.$$("#remotes").append(a),n.getVideoTracks()[0].onended=function(){t.screenUnPublish()},t.scrollTo("#screen")})).catch(console.error)}function rt(){var e=this,t=this;if(this.state.screenStreams)return this.state.screenStreams.map((function(n){if(0==e.$$("#"+n.id).length){console.log("Going to show",n.id);var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width=e.$$("#screen").width()-20,a.id=n.id,e.$$("#remotes").append(a),t.scrollTo("#screen")}})),[]}function it(){var e=this;this.state.screenMedia.unpublish(),this.state.screenMedia.getTracks().forEach((function(e){return e.stop()})),this.$$("#remotes").remove(this.state.screenMedia.id),this.$$("#screen").append("<div id='remotes'></div>"),this.setState({screenMedia:null},(function(){0!=e.state.screenStreams.length||e.state.screenMedia||e.setState({screenActive:!1})}))}function ot(){var e=this;return this.state.screenMedia?r.a.createElement("a",{onClick:function(){return e.screenUnPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 8l4 -4m-4 0l4 4"})))):r.a.createElement("a",{fill:!0,onClick:function(){return e.screenStart()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))))}var st=n(223),ct=n.n(st).a.connect(S.socketIOServer,{transports:["websocket"],secure:!0,reconnect:!0,rejectUnauthorized:!1}),lt=(new f.w3cwebsocket(S.socketServer),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).setParticipants=e.setParticipants.bind(Object(p.a)(e)),e.sessionCreate=Fe.bind(Object(p.a)(e)),e.registerUsername=ze.bind(Object(p.a)(e)),e.participantChangeStatus=He.bind(Object(p.a)(e)),e.participantDisplay=Je.bind(Object(p.a)(e)),e.addParticipant=We.bind(Object(p.a)(e)),e.exisitingParticipant=qe.bind(Object(p.a)(e)),e.toggleMute=Ge.bind(Object(p.a)(e)),e.getJsonFromUrl=e.getJsonFromUrl.bind(Object(p.a)(e)),e.wsSend=e.wsSend.bind(Object(p.a)(e)),e.ionSessionCreate=Qe.bind(Object(p.a)(e)),e.ionStart=Ye.bind(Object(p.a)(e)),e.ionVideos=Ze.bind(Object(p.a)(e)),e.ionUnPublish=Xe.bind(Object(p.a)(e)),e.ionPublishBtn=et.bind(Object(p.a)(e)),e.ionDisplay=tt.bind(Object(p.a)(e)),e.screenSessionCreate=nt.bind(Object(p.a)(e)),e.screenStart=at.bind(Object(p.a)(e)),e.screenVideos=rt.bind(Object(p.a)(e)),e.screenUnPublish=it.bind(Object(p.a)(e)),e.screenPublishBtn=ot.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.login=e.login.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.newComerReset=e.newComerReset.bind(Object(p.a)(e)),e.toggleMicrophone=e.toggleMicrophone.bind(Object(p.a)(e)),e.uploader=e.uploader.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.recentUpload=e.recentUpload.bind(Object(p.a)(e)),e.revertUndo=e.revertUndo.bind(Object(p.a)(e)),e.revertTrash=e.revertTrash.bind(Object(p.a)(e)),e.exitAudioRoom=Ke.bind(Object(p.a)(e)),e.removeParticipant=Be.bind(Object(p.a)(e)),e.uploadedRecentlyReset=e.uploadedRecentlyReset.bind(Object(p.a)(e)),e.extractAction=e.extractAction.bind(Object(p.a)(e)),e.logout=e.logout.bind(Object(p.a)(e)),e.signUp=e.signUp.bind(Object(p.a)(e)),e.scrollTo=e.scrollTo.bind(Object(p.a)(e)),e.appendChat=e.appendChat.bind(Object(p.a)(e)),e.chatDeactive=e.chatDeactive.bind(Object(p.a)(e)),e.appendLink=e.appendLink.bind(Object(p.a)(e)),e.socketHandle=e.socketHandle.bind(Object(p.a)(e)),e.state={participants:[],token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+U.randomString(12),roomId:1187894,pin:"c13eab83262202c2840a",myId:null,isAdmin:!1,webrtcUp:null,myusername:null,mixertest:null,fullname:null,userUUID:null,line:null,currentTab:null,currentPoint:null,quillDelta:null,cursorRange:null,newCursor:null,client:null,clients:[],typing:null,loginScreenOpened:!0,username:"",pass:"",name:null,newComerLength:null,contentSync:null,wsConnected:!1,muted:!0,progressShow:!1,progress:null,upload:null,page:null,undoVector:null,trash:!1,userColor:K()({luminosity:"dark",hue:"random",alpha:.6}),uploadedRecently:!1,remoteStream:null,localStream:null,chats:[],action:null,signingUp:!1,email:null,password:null,passwordConfirmation:null,signal:null,config:null,clientLocal:null,streams:[],media:null,display:1,ionActive:!1,screenSignal:null,screenConfig:null,screenClientLocal:null,screenStreams:[],screenMedia:null,screenActive:!1,chatActive:!1,srcLink:null,converterCounter:0,userCounter:0},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setParticipants",value:function(){}},{key:"toggleMicrophone",value:function(){var e=this;ct.emit("test"),this.setState({muted:!this.state.muted},(function(){e.toggleMute()}))}},{key:"wsSend",value:function(e){this.state.userUUID&&this.state.roomId&&(e.room=this.state.roomId,e.sender=this.state.userUUID,ct.emit("message",e))}},{key:"componentDidMount",value:function(){var e=this;this.state.token&&this.state.token.length>10&&(_("users/validate_token",{},this.state.token),this.setState({loginScreenOpened:!1})),ct.on("connect",(function(){ct.emit("room",e.state.roomId)})),ct.on("message",(function(t){e.socketHandle(t),console.log(t)}))}},{key:"extractAction",value:function(){var e=this.getJsonFromUrl(this.$f7.view[0].history[0]);e&&e.action?this.setState({action:e.action}):this.setState({action:"room"})}},{key:"componentWillUnmount",value:function(){y.removeListener("set_instance",this.setInstance),y.removeListener("got_instance",this.getInstance)}},{key:"newComerReset",value:function(){this.setState({newComerLength:null})}},{key:"uploadedRecentlyReset",value:function(){this.setState({uploadedRecently:!1})}},{key:"logout",value:function(){this.setState({token:null}),setTimeout((function(){window.localStorage.removeItem("token"),window.location.replace("/")}),1e3)}},{key:"uploader",value:function(e){var t=this,n=this;console.log(e),n.setState({progressShow:!0},(function(){return console.log(t.state.progressShow)}));var a={onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);console.log(t),n.setState({progress:t})},headers:{"Content-Type":"application/json",Authorization:"bearer "+n.state.token}},r=new FormData;r.append("upload[attached_document]",e),r.append("upload[room_id]",1),k.a.post(S.server+"/uploads",r,a).then((function(e){n.setState({progressShow:!1,uploadedRecently:!0}),C("uploads/recent",1,t.state.token)})).catch((function(e){return n.setState({progressShow:!1})}))}},{key:"recentUpload",value:function(){console.log("recentUpload Called ..."),this.setState({progressShow:!0}),C("uploads/recent",1,this.state.token)}},{key:"revertUndo",value:function(){this.setState({undo:null})}},{key:"revertTrash",value:function(){this.setState({trash:!1})}},{key:"scrollTo",value:function(e){var t=this.$$(e).offset();this.$$(".page-content").scrollTop(t.top,350),console.log(">>>>>>>",t)}},{key:"appendChat",value:function(e){this.setState({chats:this.state.chats.concat(e)}),this.state.chatActive||this.setState({chatActive:!0})}},{key:"chatDeactive",value:function(){this.setState({chatActive:!1})}},{key:"appendLink",value:function(e){this.setState({srcLink:e})}},{key:"componentWillMount",value:function(){y.on("set_instance",this.setInstance),y.on("got_instance",this.getInstance)}},{key:"socketHandle",value:function(e){if(e.sender!==this.state.userUUID){var t=e;switch(t.type){case"room":console.log("client",t.c),this.setState({client:t.c});break;case"userCounter":this.setState({userCounter:t.c});break;case"srcLink":this.appendLink(t.c);break;case"chat":this.appendChat(t.c);break;case"page":this.setState({page:t.c});break;case"undo":this.setState({undoVector:t.c});break;case"trash":this.setState({trash:!0});break;case"newUpload":this.recentUpload();break;case"contentSync":this.setState({contentSync:t.c});break;case"newComer":console.log("newComer",t.c),this.setState({newComerLength:t.c});break;case"newCursor":this.setState({newCursor:t.c});break;case"typing":this.setState({typing:t.c});break;case"point":this.setState({currentPoint:t.c});break;case"quill":this.setState({quillDelta:t.c});break;case"cursor":this.setState({cursorRange:t.c});break;case"line":this.setState({line:t.c});break;case"tab":this.setState({currentTab:t.current})}}}},{key:"getJsonFromUrl",value:function(e){if(!e||!e.split("?")||!e.split("?")[1])return[];var t=e.split("?")[1],n={};return t.split("&").forEach((function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])})),n}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"login",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={name:this.state.name,user:{email:this.emailJoiner(this.state.email),password:this.state.password}};if(this.state.email&&this.state.email.length>0)this.state.signingUp?_("users/sign_up",e):_("users/login",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"emailJoiner",value:function(e){return this.validateEmail(e)?e:e+"@test.com"}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"signUp",value:function(){this.setState({signingUp:!0})}},{key:"setInstance",value:function(){var e=y.getKlass(),t=y.getIntance();!t||"SignUp"!==e&&"Login"!==e||(window.localStorage.setItem("token",t.token),window.location.reload()),"Validate"===e&&(console.log("registering name ..."),this.setState({name:t.name,fullname:t.name,userUUID:t.uuid},(function(){}))),console.log(t,e)}},{key:"getInstance",value:function(){var e=this,t=this,n=y.getIntance(),a=y.getKlass();n&&"Upload"===a&&this.setState({model:n},(function(){!n.converted&&t.state.converterCounter<10?(console.log("Cheking for conversion ..."),setTimeout((function(){return e.recentUpload()}),1e4),e.setState({converterCounter:t.state.converterCounter+1})):e.setState({progressShow:!1})})),n&&"Room"===a&&this.setState({roomId:n.room_id,pin:n.pin,isAdmin:n.is_admin},(function(){t.sessionCreate(),ct.emit("room",n.room_id.toString())})),console.log(n,a)}},{key:"currentPage",value:function(){}},{key:"render",value:function(){var e=this,t={id:"io.framework7.testapp",name:"Framework7",theme:"aurora",panel:{rightBreakpoint:960},view:{},routes:$e},n=this.state,a=n.line,i=n.currentTab,o=n.currentPoint,s=n.quillDelta,l=n.cursorRange,d=(n.clients,n.client),u=n.newCursor,m=n.typing,p=n.name,h=n.newComerLength,f=n.contentSync,g=n.muted,v=n.userUUID,b=n.progress,y=n.progressShow,w=n.upload,k=n.page,S=n.undoVector,j=n.trash,O=n.userColor,E=n.participants,C=n.uploadedRecently,_=n.remoteStream,I=n.localStream,T=n.chats,x=n.email,D=n.password,A=n.passwordConfirmation,M=n.signingUp,R=n.ionActive,L=n.screenActive,V=n.srcLink,P=n.isAdmin,U=n.chatActive,N=n.userCounter;return r.a.createElement(c.a,{params:t},r.a.createElement(c.w,{resizable:!0,right:!0,themeDark:!0},r.a.createElement(c.C,null,r.a.createElement(ue,{wsSend:this.wsSend,chats:T,appendChat:this.appendChat,userUUID:v,name:p,participantDisplay:this.participantDisplay,isAdmin:P,chatDeactive:this.chatDeactive,logout:this.logout,userCounter:N}))),r.a.createElement(c.w,{resizable:!0,left:!0,themeDark:!0},r.a.createElement(c.C,null,r.a.createElement(se,{participants:E,handleChangeValue:this.handleChangeValue,muted:g,userUUID:v,toggleMicrophone:this.toggleMicrophone,userColor:O,logout:this.logout,scrollTo:this.scrollTo,ionPublishBtn:this.ionPublishBtn,screenPublishBtn:this.screenPublishBtn,ionActive:R,screenActive:L,isAdmin:P,chatActive:U,chatDeactive:this.chatDeactive}))),r.a.createElement(c.C,{id:"main-view",url:"",pushState:!0,main:!0,className:"safe-areas"},r.a.createElement(oe,{wsSend:this.wsSend,line:a,currentTab:i,currentPoint:o,quillDelta:s,cursorRange:l,client:d,typing:m,newCursor:u,name:p,newComerLength:h,contentSync:f,newComerReset:this.newComerReset,uploader:this.uploader,progress:b,progressShow:y,upload:w,recentUpload:this.recentUpload,page:k,undoVector:S,revertUndo:this.revertUndo,trash:j,revertTrash:this.revertTrash,userColor:O,participants:E,userUUID:v,uploadedRecently:C,uploadedRecentlyReset:this.uploadedRecentlyReset,remoteStream:_,localStream:I,ionVideos:this.ionVideos,ionActive:R,screenVideos:this.screenVideos,screenActive:L,appendLink:this.appendLink,srcLink:V,isAdmin:P}),r.a.createElement(c.s,{className:"demo-login-screen",opened:this.state.loginScreenOpened,onLoginScreenClosed:function(){e.handleChangeValue({loginScreenOpened:!1})}},r.a.createElement(me,{email:x,handleChangeValue:this.handleChangeValue,name:p,password:D,passwordConfirmation:A,login:this.login,signUp:this.signUp,signingUp:M}))))}}]),t}(r.a.Component));n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)})),s.a.use(c.D),o.a.render(r.a.createElement(lt),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.1216d9c6.chunk.js.map