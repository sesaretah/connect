(window["webpackJsonpd1-react"]=window["webpackJsonpd1-react"]||[]).push([[0],{173:function(e,t){},175:function(e,t,n){e.exports=n(411)},403:function(e,t,n){},404:function(e,t,n){},405:function(e,t,n){},406:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),s=n(27),c=n(8),l=n(2),d=n(5),u=n(1),m=n(3),p=n(6),h=n(4),g=n(158),f=(n(184),n(159)),v=new(n(160).Dispatcher),b=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).list=[],e.multipleList=[],e.instance=null,e.klass=null,e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"listModel",value:function(e){this.list=[],this.klass=e.klass;for(var t=0,n=e.data.length;t<n;++t)this.list.push(e.data[t]),t===n-1&&this.emit("got_list");0==e.data.length&&this.emit("got_list")}},{key:"listMultipleModel",value:function(e){console.log(e),this.multipleList=e.data,this.klass=e.klass,this.emit("got_multiple_list")}},{key:"showIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("got_instance")}},{key:"setIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("set_instance")}},{key:"deleteIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("deleted_instance")}},{key:"postFile",value:function(e){console.log(e),this.klass=e.klass,this.instance=e.data,this.emit("file_posted")}},{key:"getIntance",value:function(){return this.instance}},{key:"getList",value:function(){return this.list}},{key:"getMutipleList",value:function(){return this.multipleList}},{key:"getListnKlass",value:function(){return[this.list,this.klass]}},{key:"getKlass",value:function(){return this.klass}},{key:"handleActions",value:function(e){switch(e.type){case"LIST_MODEL_SUCCESS":this.listModel(e.list);break;case"MULTIPLE_LIST_MODEL_SUCCESS":this.listMultipleModel(e.list);break;case"GET_INSTANCE_SUCCESS":this.showIntance(e.instance);break;case"DELETE_INSTANCE_SUCCESS":this.deleteIntance(e.instance);break;case"SET_INSTANCE_SUCCESS":this.setIntance(e.instance);break;case"POST_FILE_SUCCESS":this.postFile(e.instance)}}}]),t}(f.EventEmitter));v.register(b.handleActions.bind(b));var w=b,y=n(28),k=n.n(y),S={server:"/v1",socketServer:"wss://kaarafarinan.ir:8080",ionSignalServer:"wss://kaarafarinan.ir:7000/ws",janusServer:"https://kaarafarinan.ir:8089/janus"},j=S.server;function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(j+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){v.dispatch({type:"LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}function O(e,t,n,a){var r=j+"/"+e+"/"+t,o=new FormData;o.append("profile[avatar]",n),o.append("profile[id]",t);var i={headers:{"content-type":"multipart/form-data",Authorization:"bearer "+a}};Object(y.put)(r,o,i).then((function(e){v.dispatch({type:"POST_FILE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function C(e,t,n){k.a.get(j+"/"+e+"/"+t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"GET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function _(e,t,n){k.a.post(j+"/"+e+"/",t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function x(e,t,n){k.a.put(j+"/"+e+"/"+t.id,t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}var T=n(102),I=(n(413),T.initializeApp({apiKey:"AIzaSyAbQ1NDkKB_E_SbfgHY3w-esVWhjwj9DeE",authDomain:"tavan-e768d.firebaseapp.com",databaseURL:"https://tavan-e768d.firebaseio.com",projectId:"tavan-e768d",storageBucket:"tavan-e768d.appspot.com",messagingSenderId:"498708095861",appId:"1:498708095861:web:00428b1330b24e1eece93c",measurementId:"G-55DLXZ4VZY"}));T.messaging.isSupported()&&I.messaging().usePublicVapidKey("BGtSQdySGVQOeOwFha6rSVdmtfIUo_V33Eq-RTRb5kUNLvvwM7AVGCLtChjnGlD50fudRx8D4Aw-7br71Qfefrc");n(114);var D=n(17),M=n.n(D),A=n(105),R=window.RTCRtpTransceiver;L.sessions={},L.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||L.extension.isInstalled()}return!0};var P={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var a=new Error("NavigatorUserMediaError");a.name="You cancelled the request for permission, giving up...",n(a)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function L(e){if((e=e||{}).success="function"==typeof e.success?e.success:L.noop,e.error="function"==typeof e.error?e.error:L.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:L.noop,!L.initDone)return e.error("Library not initialized"),{};if(!L.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(L.log("Library initialized: "+L.initDone),!e.server)return e.error("Invalid server url"),{};var t=!1,n=null,a={},r=null,o=null,i=0,s=e.server;L.isArray(s)?(L.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,o=e.server,L.debug(o)):0===s.indexOf("ws")?(t=!0,L.log("Using WebSockets to contact Janus: "+s)):(t=!1,L.log("Using REST API to contact Janus: "+s));var c=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],l=e.iceTransportPolicy,d=e.bundlePolicy,u=!0===e.ipv6,m=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(m=!0===e.withCredentials);var p=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(p=e.max_poll_events),p<1&&(p=1);var h=null;void 0!==e.token&&null!==e.token&&(h=e.token);var g=null;void 0!==e.apisecret&&null!==e.apisecret&&(g=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var f=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(f=e.keepAlivePeriod),isNaN(f)&&(f=25e3);var v=6e4;function b(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);var w=!1,y=null,k={},S=this,j=0,E={};function O(){if(null!=y)if(L.debug("Long poll..."),w){var t=s+"/"+y+"?rid="+(new Date).getTime();p&&(t=t+"&maxev="+p),h&&(t=t+"&token="+encodeURIComponent(h)),g&&(t=t+"&apisecret="+encodeURIComponent(g)),L.httpAPICall(t,{verb:"GET",withCredentials:m,success:C,timeout:v,error:function(t,n){if(L.error(t+":",n),++j>3)return w=!1,void e.error("Lost connection to the server (is it down?)");O()}})}else L.warn("Is the server down? (connected=false)")}function C(e,a){if(j=0,t||void 0===y||null===y||!0===a||O(),t||!L.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){if(!(c=e.sender))return void L.warn("Missing sender...");if(!(d=k[c]))return void L.debug("This handle is not attached to this session");var r=e.candidate;L.debug("Got a trickled candidate on session "+y),L.debug(r);var o=d.webrtcStuff;o.pc&&o.remoteSdp?(L.debug("Adding remote candidate:",r),r&&!0!==r.completed?o.pc.addIceCandidate(r):o.pc.addIceCandidate(L.endOfCandidates)):(L.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),o.candidates||(o.candidates=[]),o.candidates.push(r),L.debug(o.candidates))}else{if("webrtcup"===e.janus)return L.debug("Got a webrtcup event on session "+y),L.debug(e),(c=e.sender)?(d=k[c])?void d.webrtcState(!0):void L.debug("This handle is not attached to this session"):void L.warn("Missing sender...");if("hangup"===e.janus){if(L.debug("Got a hangup event on session "+y),L.debug(e),!(c=e.sender))return void L.warn("Missing sender...");if(!(d=k[c]))return void L.debug("This handle is not attached to this session");d.webrtcState(!1,e.reason),d.hangup()}else if("detached"===e.janus){if(L.debug("Got a detached event on session "+y),L.debug(e),!(c=e.sender))return void L.warn("Missing sender...");if(!(d=k[c]))return;d.detached=!0,d.ondetached(),d.detach()}else if("media"===e.janus){if(L.debug("Got a media event on session "+y),L.debug(e),!(c=e.sender))return void L.warn("Missing sender...");if(!(d=k[c]))return void L.debug("This handle is not attached to this session");d.mediaState(e.type,e.receiving)}else if("slowlink"===e.janus){if(L.debug("Got a slowlink event on session "+y),L.debug(e),!(c=e.sender))return void L.warn("Missing sender...");if(!(d=k[c]))return void L.debug("This handle is not attached to this session");d.slowLink(e.uplink,e.lost)}else{if("error"===e.janus){var i,s;if(L.error("Ooops: "+e.error.code+" "+e.error.reason),L.debug(e),i=e.transaction)(s=E[i])&&s(e),delete E[i];return}if("event"===e.janus){var c;if(L.debug("Got a plugin event on session "+y),L.debug(e),!(c=e.sender))return void L.warn("Missing sender...");var l=e.plugindata;if(!l)return void L.warn("Missing plugindata...");L.debug("  -- Event is coming from "+c+" ("+l.plugin+")");var d,u=l.data;if(L.debug(u),!(d=k[c]))return void L.warn("This handle is not attached to this session");var m=e.jsep;m&&(L.debug("Handling SDP as well..."),L.debug(m));var p=d.onmessage;p?(L.debug("Notifying application..."),p(u,m)):L.debug("No provided notification callback")}else{if("timeout"===e.janus)return L.error("Timeout on session "+y),L.debug(e),void(t&&n.close(3504,"Gateway timeout"));L.warn("Unknown message/event  '"+e.janus+"' on session "+y),L.debug(e)}}}else L.debug("Got a success on session "+y),L.debug(e),(i=e.transaction)&&((s=E[i])&&s(e),delete E[i]);else L.debug("Got an ack on session "+y),L.debug(e),(i=e.transaction)&&((s=E[i])&&s(e),delete E[i]);else L.debug("Got info on the Janus instance"),L.debug(e),(i=e.transaction)&&((s=E[i])&&s(e),delete E[i]);else L.vdebug("Got a keepalive on session "+y);else for(var h=0;h<e.length;h++)C(e[h],!0)}function _(){if(s&&t&&w){r=setTimeout(_,f);var e={janus:"keepalive",session_id:y,transaction:L.randomString(12)};h&&(e.token=h),g&&(e.apisecret=g),n.send(JSON.stringify(e))}}function x(c){var l=L.randomString(12),d={janus:"create",transaction:l};if(c.reconnect&&(w=!1,d.janus="claim",d.session_id=y,n&&(n.onopen=null,n.onerror=null,n.onclose=null,r&&(clearTimeout(r),r=null))),h&&(d.token=h),g&&(d.apisecret=g),!s&&L.isArray(o)&&(0===(s=o[i]).indexOf("ws")?(t=!0,L.log("Server #"+(i+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,L.log("Server #"+(i+1)+": trying REST API to contact Janus ("+s+")"))),t)for(var u in n=L.newWebSocket(s,"janus-protocol"),a={error:function(){if(L.error("Error connecting to the Janus WebSockets server... "+s),L.isArray(o)&&!c.reconnect)return++i===o.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){x(c)}),200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){E[l]=function(e){if(L.debug(e),"success"!==e.janus)return L.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);r=setTimeout(_,f),w=!0,y=e.session_id?e.session_id:e.data.id,c.reconnect?L.log("Claimed session: "+y):L.log("Created session: "+y),L.sessions[y]=S,c.success()},n.send(JSON.stringify(d))},message:function(e){C(JSON.parse(e.data))},close:function(){s&&w&&(w=!1,e.error("Lost connection to the server (is it down?)"))}})n.addEventListener(u,a[u]);else L.httpAPICall(s,{verb:"POST",withCredentials:m,body:d,success:function(e){if(L.debug(e),"success"!==e.janus)return L.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);w=!0,y=e.session_id?e.session_id:e.data.id,c.reconnect?L.log("Claimed session: "+y):L.log("Created session: "+y),L.sessions[y]=S,O(),c.success()},error:function(e,t){if(L.error(e+":",t),L.isArray(o)&&!c.reconnect)return++i===o.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){x(c)}),200));""===t?c.error(e+": Is the server down?"):c.error(e+": "+t)}})}function T(e,a){if((a=a||{}).success="function"==typeof a.success?a.success:L.noop,a.error="function"==typeof a.error?a.error:L.noop,!w)return L.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var r=k[e];if(!r||!r.webrtcStuff)return L.warn("Invalid handle"),void a.error("Invalid handle");var o=a.message,i=a.jsep,c=L.randomString(12),l={janus:"message",body:o,transaction:c};if(r.token&&(l.token=r.token),g&&(l.apisecret=g),i&&(l.jsep={type:i.type,sdp:i.sdp},i.e2ee&&(l.jsep.e2ee=!0),"hml"!==i.rid_order&&"lmh"!==i.rid_order||(l.jsep.rid_order=i.rid_order)),L.debug("Sending message to plugin (handle="+e+"):"),L.debug(l),t)return l.session_id=y,l.handle_id=e,E[c]=function(e){if(L.debug("Message sent!"),L.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return L.warn("Request succeeded, but missing plugindata..."),void a.success();L.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return L.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(L.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(L.error("Unknown error"),a.error("Unknown error"))},void n.send(JSON.stringify(l));L.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:l,success:function(e){if(L.debug("Message sent!"),L.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return L.warn("Request succeeded, but missing plugindata..."),void a.success();L.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return L.debug(n),void a.success(n)}"ack"===e.janus?a.success():e.error?(L.error("Ooops: "+e.error.code+" "+e.error.reason),a.error(e.error.code+" "+e.error.reason)):(L.error("Unknown error"),a.error("Unknown error"))},error:function(e,t){L.error(e+":",t),a.error(e+": "+t)}})}function I(e,a){if(w){var r=k[e];if(r&&r.webrtcStuff){var o={janus:"trickle",candidate:a,transaction:L.randomString(12)};if(r.token&&(o.token=r.token),g&&(o.apisecret=g),L.vdebug("Sending trickle candidate (handle="+e+"):"),L.vdebug(o),t)return o.session_id=y,o.handle_id=e,void n.send(JSON.stringify(o));L.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:o,success:function(e){L.vdebug("Candidate sent!"),L.vdebug(e),"ack"===e.janus||L.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){L.error(e+":",t)}})}else L.warn("Invalid handle")}else L.warn("Is the server down? (connected=false)")}function D(e,t,n,a,r){var o=k[e];if(o&&o.webrtcStuff){var i=o.webrtcStuff;if(i.pc){var s=function(e){L.log("Received state change on data channel:",e);var t=e.target.label,n=e.target.protocol,a=i.dataChannel[t]?i.dataChannel[t].readyState:"null";if(L.log("State change on <"+t+"> data channel: "+a),"open"===a){if(i.dataChannel[t].pending&&i.dataChannel[t].pending.length>0){L.log("Sending pending messages on <"+t+">:",i.dataChannel[t].pending.length);var r=!0,s=!1,c=void 0;try{for(var l,d=i.dataChannel[t].pending[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var u=l.value;L.log("Sending data on data channel <"+t+">"),L.debug(u),i.dataChannel[t].send(u)}}catch(m){s=!0,c=m}finally{try{r||null==d.return||d.return()}finally{if(s)throw c}}i.dataChannel[t].pending=[]}o.ondataopen(t,n)}};if(a)i.dataChannel[t]=a;else{var c={ordered:!0};n&&(c.protocol=n),i.dataChannel[t]=i.pc.createDataChannel(t,c)}i.dataChannel[t].onmessage=function(e){L.log("Received message on data channel:",e);var t=e.target.label;o.ondata(e.data,t)},i.dataChannel[t].onopen=s,i.dataChannel[t].onclose=s,i.dataChannel[t].onerror=function(e){L.error("Got error on data channel:",e)},i.dataChannel[t].pending=[],r&&i.dataChannel[t].pending.push(r)}else L.warn("Invalid PeerConnection")}else L.warn("Invalid handle")}function M(e,t){(t=t||{}).success="function"==typeof t.success?t.success:L.noop,t.error="function"==typeof t.error?t.error:L.noop;var n=k[e];if(!n||!n.webrtcStuff)return L.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff,r=t.text||t.data;if(!r)return L.warn("Invalid data"),void t.error("Invalid data");var o=t.label?t.label:L.dataChanDefaultLabel;return a.dataChannel[o]?"open"!==a.dataChannel[o].readyState?(a.dataChannel[o].pending.push(r),void t.success()):(L.log("Sending data on data channel <"+o+">"),L.debug(r),a.dataChannel[o].send(r),void t.success()):(D(e,o,t.protocol,!1,r,t.protocol),void t.success())}function A(e,t){(t=t||{}).success="function"==typeof t.success?t.success:L.noop,t.error="function"==typeof t.error?t.error:L.noop;var n=k[e];if(!n||!n.webrtcStuff)return L.warn("Invalid handle"),void t.error("Invalid handle");var a=n.webrtcStuff;if(!a.dtmfSender){if(a.pc){var r=a.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return L.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");a.dtmfSender=r.dtmf,a.dtmfSender&&(L.log("Created DTMF Sender"),a.dtmfSender.ontonechange=function(e){L.debug("Sent DTMF tone: "+e.tone)})}if(!a.dtmfSender)return L.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var o=t.dtmf;if(!o)return L.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var i=o.tones;if(!i)return L.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var s="number"===typeof o.duration?o.duration:500,c="number"===typeof o.gap?o.gap:50;L.debug("Sending DTMF string "+i+" (duration "+s+"ms, gap "+c+"ms)"),a.dtmfSender.insertDTMF(i,s,c),t.success()}function R(e,a){(a=a||{}).success="function"==typeof a.success?a.success:L.noop,a.error="function"==typeof a.error?a.error:L.noop;var r=!0===a.noRequest;L.log("Destroying handle "+e+" (only-locally="+r+")"),W(e);var o=k[e];if(!o||o.detached)return delete k[e],void a.success();if(r)return delete k[e],void a.success();if(!w)return L.warn("Is the server down? (connected=false)"),void a.error("Is the server down? (connected=false)");var i={janus:"detach",transaction:L.randomString(12)};if(o.token&&(i.token=o.token),g&&(i.apisecret=g),t)return i.session_id=y,i.handle_id=e,n.send(JSON.stringify(i)),delete k[e],void a.success();L.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:i,success:function(t){L.log("Destroyed handle:"),L.debug(t),"success"!==t.janus&&L.error("Ooops: "+t.error.code+" "+t.error.reason),delete k[e],a.success()},error:function(t,n){L.error(t+":",n),delete k[e],a.success()}})}function P(e,t,n,a,r){var o=k[e];if(!o||!o.webrtcStuff)return L.warn("Invalid handle"),a.stream||L.stopAllTracks(r),void a.error("Invalid handle");var i=o.webrtcStuff;L.debug("streamsDone:",r),r&&(L.debug("  -- Audio tracks:",r.getAudioTracks()),L.debug("  -- Video tracks:",r.getVideoTracks()));var s=!1;if(i.myStream&&n.update&&!i.streamExternal){if((!n.update&&q(n)||n.update&&(n.addAudio||n.replaceAudio))&&r.getAudioTracks()&&r.getAudioTracks().length)if(i.myStream.addTrack(r.getAudioTracks()[0]),L.unifiedPlan){L.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]);var m=null;if((w=i.pc.getTransceivers())&&w.length>0){var p=!0,h=!1,g=void 0;try{for(var f,v=w[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){if((_=f.value).sender&&_.sender.track&&"audio"===_.sender.track.kind||_.receiver&&_.receiver.track&&"audio"===_.receiver.track.kind){m=_;break}}}catch(R){h=!0,g=R}finally{try{p||null==v.return||v.return()}finally{if(h)throw g}}}m&&m.sender?m.sender.replaceTrack(r.getAudioTracks()[0]):i.pc.addTrack(r.getAudioTracks()[0],r)}else L.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]),i.pc.addTrack(r.getAudioTracks()[0],r);if((!n.update&&J(n)||n.update&&(n.addVideo||n.replaceVideo))&&r.getVideoTracks()&&r.getVideoTracks().length)if(i.myStream.addTrack(r.getVideoTracks()[0]),L.unifiedPlan){L.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]);var w,y=null;if((w=i.pc.getTransceivers())&&w.length>0){var S=!0,j=!1,E=void 0;try{for(var O,C=w[Symbol.iterator]();!(S=(O=C.next()).done);S=!0){var _;if((_=O.value).sender&&_.sender.track&&"video"===_.sender.track.kind||_.receiver&&_.receiver.track&&"video"===_.receiver.track.kind){y=_;break}}}catch(R){j=!0,E=R}finally{try{S||null==C.return||C.return()}finally{if(j)throw E}}}y&&y.sender?y.sender.replaceTrack(r.getVideoTracks()[0]):i.pc.addTrack(r.getVideoTracks()[0],r)}else L.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]),i.pc.addTrack(r.getVideoTracks()[0],r)}else i.myStream=r,s=!0;if(!i.pc){var x={iceServers:c,iceTransportPolicy:l,bundlePolicy:d};"chrome"===L.webRTCAdapter.browserDetails.browser&&(x.sdpSemantics=L.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var T={optional:[{DtlsSrtpKeyAgreement:!0}]};if(u&&T.optional.push({googIPv6:!0}),a.rtcConstraints&&"object"===typeof a.rtcConstraints)for(var M in L.debug("Adding custom PeerConnection constraints:",a.rtcConstraints),a.rtcConstraints)T.optional.push(a.rtcConstraints[M]);"edge"===L.webRTCAdapter.browserDetails.browser&&(x.bundlePolicy="max-bundle"),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&(a.senderTransforms||a.receiverTransforms)&&(i.senderTransforms=a.senderTransforms,i.receiverTransforms=a.receiverTransforms,x.forceEncodedAudioInsertableStreams=!0,x.forceEncodedVideoInsertableStreams=!0,x.encodedInsertableStreams=!0),L.log("Creating PeerConnection"),L.debug(T),i.pc=new RTCPeerConnection(x,T),L.debug(i.pc),i.pc.getStats&&(i.volume={},i.bitrate.value="0 kbits/sec"),L.log("Preparing local SDP and gathering candidates (trickle="+i.trickle+")"),i.pc.oniceconnectionstatechange=function(e){i.pc&&o.iceState(i.pc.iceConnectionState)},i.pc.onicecandidate=function(t){if(!t.candidate||"edge"===L.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)L.log("End of candidates."),i.iceDone=!0,!0===i.trickle?I(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:L.noop,t.error="function"==typeof t.error?t.error:L.noop;var n=k[e];if(!n||!n.webrtcStuff)return void L.warn("Invalid handle, not sending anything");var a=n.webrtcStuff;if(L.log("Sending offer/answer SDP..."),!a.mySdp)return void L.warn("Local SDP instance is invalid, not sending anything...");a.mySdp={type:a.pc.localDescription.type,sdp:a.pc.localDescription.sdp},!1===a.trickle&&(a.mySdp.trickle=!1);L.debug(t),a.sdpSent=!0,t.success(a.mySdp)}(e,a);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===i.trickle&&I(e,n)}},i.pc.ontrack=function(e){if(L.log("Handling Remote Track"),L.debug(e),e.streams&&(i.remoteStream=e.streams[0],o.onremotestream(i.remoteStream),!e.track.onended)){if(i.receiverTransforms){var t=null;RTCRtpSender.prototype.createEncodedStreams?t=e.receiver.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===e.track.kind&&i.receiverTransforms.audio?t=e.receiver.createEncodedAudioStreams():"video"===e.track.kind&&i.receiverTransforms.video&&(t=e.receiver.createEncodedVideoStreams())),t&&(console.log(t),t.readableStream&&t.writableStream?t.readableStream.pipeThrough(i.receiverTransforms[e.track.kind]).pipeTo(t.writableStream):t.readable&&t.writable&&t.readable.pipeThrough(i.receiverTransforms[e.track.kind]).pipeTo(t.writable))}var n=null;L.log("Adding onended callback to track:",e.track),e.track.onended=function(e){L.log("Remote track removed:",e),i.remoteStream&&(clearTimeout(n),i.remoteStream.removeTrack(e.target),o.onremotestream(i.remoteStream))},e.track.onmute=function(e){L.log("Remote track muted:",e),i.remoteStream&&null==n&&(n=setTimeout((function(){L.log("Removing remote track"),i.remoteStream&&(i.remoteStream.removeTrack(e.target),o.onremotestream(i.remoteStream)),n=null}),2520))},e.track.onunmute=function(e){if(L.log("Remote track flowing again:",e),null!=n)clearTimeout(n),n=null;else try{i.remoteStream.addTrack(e.target),o.onremotestream(i.remoteStream)}catch(t){L.error(t)}}}}}if(s&&r){L.log("Adding local stream");var A=!0===a.simulcast2;r.getTracks().forEach((function(e){L.log("Adding local track:",e);var t=null;if(A&&"audio"!==e.kind){L.log("Enabling rid-based simulcasting:",e);var n=b(a.simulcastMaxBitrates),o=i.pc.addTransceiver(e,{direction:"sendrecv",streams:[r],sendEncodings:a.sendEncodings||[{rid:"h",active:!0,maxBitrate:n.high},{rid:"m",active:!0,maxBitrate:n.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:n.low,scaleResolutionDownBy:4}]});o&&(t=o.sender)}else t=i.pc.addTrack(e,r);if(t&&i.senderTransforms){var s=null;RTCRtpSender.prototype.createEncodedStreams?s=t.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===t.track.kind&&i.senderTransforms.audio?s=t.createEncodedAudioStreams():"video"===t.track.kind&&i.senderTransforms.video&&(s=t.createEncodedVideoStreams())),s&&(console.log(s),s.readableStream&&s.writableStream?s.readableStream.pipeThrough(i.senderTransforms[t.track.kind]).pipeTo(s.writableStream):s.readable&&s.writable&&s.readable.pipeThrough(i.senderTransforms[t.track.kind]).pipeTo(s.writable))}}))}(function(e){if(L.debug("isDataEnabled:",e),"edge"===L.webRTCAdapter.browserDetails.browser)return L.warn("Edge doesn't support data channels yet"),!1;return void 0!==e&&null!==e&&!0===e.data})(n)&&!i.dataChannel[L.dataChanDefaultLabel]&&(L.log("Creating default data channel"),D(e,L.dataChanDefaultLabel,null,!1),i.pc.ondatachannel=function(t){L.log("Data channel created by Janus:",t),D(e,t.channel.label,t.channel.protocol,t.channel)}),i.myStream&&o.onlocalstream(i.myStream),t?i.pc.setRemoteDescription(t).then((function(){if(L.log("Remote description accepted!"),i.remoteSdp=t.sdp,i.candidates&&i.candidates.length>0){for(var r=0;r<i.candidates.length;r++){var o=i.candidates[r];L.debug("Adding remote candidate:",o),o&&!0!==o.completed?i.pc.addIceCandidate(o):i.pc.addIceCandidate(L.endOfCandidates)}i.candidates=[]}!function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:L.noop,n.error="function"==typeof n.error?n.error:L.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:L.noop;var a=k[e];if(!a||!a.webrtcStuff)return L.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,o=!0===n.simulcast;o?L.log("Creating answer (iceDone="+r.iceDone+", simulcast="+o+")"):L.log("Creating answer (iceDone="+r.iceDone+")");var i=null;if(L.unifiedPlan){i={};var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var p,h=l[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind?s||(s=g):(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind)&&(c||(c=g))}}catch(R){u=!0,m=R}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}var f=q(t),v=H(t);if(f||v){if(f&&v){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",L.log("Setting audio transceiver to sendrecv:",s)}catch(C){L.error(C)}}else if(f&&!v)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",L.log("Setting audio transceiver to sendonly:",s))}catch(C){L.error(C)}else if(!f&&v)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",L.log("Setting audio transceiver to recvonly:",s)}catch(C){L.error(C)}else s=r.pc.addTransceiver("audio",{direction:"recvonly"}),L.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",L.log("Setting audio transceiver to inactive:",s)}catch(C){L.error(C)}var w=J(t),y=G(t);if(w||y){if(w&&y){if(c)try{c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",L.log("Setting video transceiver to sendrecv:",c)}catch(C){L.error(C)}}else if(w&&!y){if(c)try{c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",L.log("Setting video transceiver to sendonly:",c)}catch(C){L.error(C)}}else if(!w&&y)if(c)try{c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",L.log("Setting video transceiver to recvonly:",c)}catch(C){L.error(C)}else c=r.pc.addTransceiver("video",{direction:"recvonly"}),L.log("Adding recvonly video transceiver:",c)}else if(t.removeVideo&&c)try{c.setDirection?c.setDirection("inactive"):c.direction="inactive",L.log("Setting video transceiver to inactive:",c)}catch(C){L.error(C)}}else i="firefox"===L.webRTCAdapter.browserDetails.browser||"edge"===L.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:H(t),offerToReceiveVideo:G(t)}:{mandatory:{OfferToReceiveAudio:H(t),OfferToReceiveVideo:G(t)}};L.debug(i);var S=J(t);if(S&&o&&"firefox"===L.webRTCAdapter.browserDetails.browser){L.log("Enabling Simulcasting for Firefox (RID)");var j=r.pc.getSenders()[1];L.log(j);var E=j.getParameters();L.log(E);var O=b(n.simulcastMaxBitrates);j.setParameters({encodings:n.sendEncodings||[{rid:"h",active:!0,maxBitrate:O.high},{rid:"m",active:!0,maxBitrate:O.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:O.low,scaleResolutionDownBy:4}]})}r.pc.createAnswer(i).then((function(e){L.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,L.log("Setting local description"),S&&o&&("chrome"===L.webRTCAdapter.browserDetails.browser?L.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==L.webRTCAdapter.browserDetails.browser&&L.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=i,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):L.log("Waiting for all candidates...")}),n.error)}(e,n,a)}),a.error):function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:L.noop,n.error="function"==typeof n.error?n.error:L.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:L.noop;var a=k[e];if(!a||!a.webrtcStuff)return L.warn("Invalid handle"),void n.error("Invalid handle");var r=a.webrtcStuff,o=!0===n.simulcast;o?L.log("Creating offer (iceDone="+r.iceDone+", simulcast="+o+")"):L.log("Creating offer (iceDone="+r.iceDone+")");var i={};if(L.unifiedPlan){var s=null,c=null,l=r.pc.getTransceivers();if(l&&l.length>0){var d=!0,u=!1,m=void 0;try{for(var p,h=l[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind?s||(s=g):(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind)&&(c||(c=g))}}catch(R){u=!0,m=R}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}var f=q(t),v=H(t);f||v?f&&v?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",L.log("Setting audio transceiver to sendrecv:",s)):f&&!v?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",L.log("Setting audio transceiver to sendonly:",s)):!f&&v&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",L.log("Setting audio transceiver to recvonly:",s)):(s=r.pc.addTransceiver("audio",{direction:"recvonly"}),L.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",L.log("Setting audio transceiver to inactive:",s));var w=J(t),y=G(t);w||y?w&&y?c&&(c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",L.log("Setting video transceiver to sendrecv:",c)):w&&!y?c&&(c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",L.log("Setting video transceiver to sendonly:",c)):!w&&y&&(c?(c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",L.log("Setting video transceiver to recvonly:",c)):(c=r.pc.addTransceiver("video",{direction:"recvonly"}),L.log("Adding recvonly video transceiver:",c))):t.removeVideo&&c&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive",L.log("Setting video transceiver to inactive:",c))}else i.offerToReceiveAudio=H(t),i.offerToReceiveVideo=G(t);!0===n.iceRestart&&(i.iceRestart=!0);L.debug(i);var S=J(t);if(S&&o&&"firefox"===L.webRTCAdapter.browserDetails.browser){L.log("Enabling Simulcasting for Firefox (RID)");var j=r.pc.getSenders().find((function(e){return"video"===e.track.kind}));if(j){var E=j.getParameters();E||(E={});var O=b(n.simulcastMaxBitrates);E.encodings=n.sendEncodings||[{rid:"h",active:!0,maxBitrate:O.high},{rid:"m",active:!0,maxBitrate:O.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:O.low,scaleResolutionDownBy:4}],j.setParameters(E)}}r.pc.createOffer(i).then((function(e){L.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,L.log("Setting local description"),S&&o&&("chrome"===L.webRTCAdapter.browserDetails.browser||"safari"===L.webRTCAdapter.browserDetails.browser?(L.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=function(e){for(var t=e.split("\r\n"),n=!1,a=[-1],r=[-1],o=null,i=null,s=null,c=null,l=-1,d=0;d<t.length;d++){if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){var u=t[d].match(/a=ssrc-group:FID (\d+) (\d+)/);if(u)a[0]=u[1],r[0]=u[2],t.splice(d,1),d--;else{if(a[0]){if((h=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(o=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(i=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=h[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!=t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0){l=-1,n=!1;for(d=0;d<t.length;d++){var m;if(m=t[d].match(/m=(\w+) */)){if("video"===m[1]){if(!(a[0]<0)){l=d;break}n=!0}else if(a[0]>-1){l=d;break}}else if(n){if(a[0]<0){var p=t[d].match(/a=ssrc:(\d+)/);if(p){a[0]=p[1],t.splice(d,1),d--;continue}}else{var h;if((h=t[d].match("a=ssrc:"+a[0]+" cname:(.+)"))&&(o=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" msid:(.+)"))&&(i=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[d].match("a=ssrc:"+a[0]+" label:(.+)"))&&(c=h[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+a[0])){t.splice(d,1),d--;continue}}0!==t[d].length||(t.splice(d,1),d--)}}}if(a[0]<0)return L.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;l<0&&(l=t.length);a[1]=Math.floor(4294967295*Math.random()),a[2]=Math.floor(4294967295*Math.random()),r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random());for(d=0;d<a.length;d++)o&&(t.splice(l,0,"a=ssrc:"+a[d]+" cname:"+o),l++),i&&(t.splice(l,0,"a=ssrc:"+a[d]+" msid:"+i),l++),s&&(t.splice(l,0,"a=ssrc:"+a[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+a[d]+" label:"+c),l++),o&&(t.splice(l,0,"a=ssrc:"+r[d]+" cname:"+o),l++),i&&(t.splice(l,0,"a=ssrc:"+r[d]+" msid:"+i),l++),s&&(t.splice(l,0,"a=ssrc:"+r[d]+" mslabel:"+s),l++),c&&(t.splice(l,0,"a=ssrc:"+r[d]+" label:"+c),l++);t.splice(l,0,"a=ssrc-group:FID "+a[2]+" "+r[2]),t.splice(l,0,"a=ssrc-group:FID "+a[1]+" "+r[1]),t.splice(l,0,"a=ssrc-group:FID "+a[0]+" "+r[0]),t.splice(l,0,"a=ssrc-group:SIM "+a[0]+" "+a[1]+" "+a[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e}(e.sdp)):"firefox"!==L.webRTCAdapter.browserDetails.browser&&L.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=i,r.iceDone||r.trickle?((r.senderTransforms||r.receiverTransforms)&&(e.e2ee=!0),n.success(e)):L.log("Waiting for all candidates...")}),n.error)}(e,n,a)}function V(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:L.noop,n.error="function"==typeof n.error?n.error:z;var a=n.jsep;if(t&&a)return L.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!a||!a.type||!a.sdp))return L.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media="object"===typeof n.media&&n.media?n.media:{audio:!0,video:!0};var r=n.media,o=k[e];if(!o||!o.webrtcStuff)return L.warn("Invalid handle"),void n.error("Invalid handle");var i,s=o.webrtcStuff;if(s.trickle=(i=n.trickle,L.debug("isTrickleEnabled:",i),!1!==i),s.pc){if(L.log("Updating existing media session"),r.update=!0,n.stream)n.stream!==s.myStream&&L.log("Renegotiation involves a new external stream");else{if(r.addAudio){if(r.keepAudio=!1,r.replaceAudio=!1,r.removeAudio=!1,r.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return L.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else r.removeAudio?(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!1,r.audioSend=!1):r.replaceAudio&&(r.keepAudio=!1,r.addAudio=!1,r.removeAudio=!1,r.audioSend=!0);if(s.myStream&&s.myStream.getAudioTracks()&&0!==s.myStream.getAudioTracks().length?!q(r)||r.removeAudio||r.replaceAudio||(r.keepAudio=!0):(r.replaceAudio&&(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!0,r.audioSend=!0),q(r)&&(r.keepAudio=!1,r.addAudio=!0)),r.addVideo){if(r.keepVideo=!1,r.replaceVideo=!1,r.removeVideo=!1,r.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return L.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else r.removeVideo?(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!1,r.videoSend=!1):r.replaceVideo&&(r.keepVideo=!1,r.addVideo=!1,r.removeVideo=!1,r.videoSend=!0);s.myStream&&s.myStream.getVideoTracks()&&0!==s.myStream.getVideoTracks().length?!J(r)||r.removeVideo||r.replaceVideo||(r.keepVideo=!0):(r.replaceVideo&&(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!0,r.videoSend=!0),J(r)&&(r.keepVideo=!1,r.addVideo=!0)),r.addData&&(r.data=!0)}if(q(r)&&r.keepAudio&&J(r)&&r.keepVideo)return o.consentDialog(!1),void P(e,a,r,n,s.myStream)}else r.update=!1,r.keepAudio=!1,r.keepVideo=!1;if(r.update&&!s.streamExternal){if(r.removeAudio||r.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var c=s.myStream.getAudioTracks()[0];L.log("Removing audio track:",c),s.myStream.removeTrack(c);try{c.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var l=!0;if(r.replaceAudio&&L.unifiedPlan&&(l=!1),l){var d=!0,u=!1,m=void 0;try{for(var p,h=s.pc.getSenders()[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;g&&g.track&&"audio"===g.track.kind&&(L.log("Removing audio sender:",g),s.pc.removeTrack(g))}}catch(B){u=!0,m=B}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}}}}if(r.removeVideo||r.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){var f=s.myStream.getVideoTracks()[0];L.log("Removing video track:",f),s.myStream.removeTrack(f);try{f.stop()}catch($){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var v=!0;if(r.replaceVideo&&L.unifiedPlan&&(v=!1),v){var b=!0,w=!1,y=void 0;try{for(var S,j=s.pc.getSenders()[Symbol.iterator]();!(b=(S=j.next()).done);b=!0){var E=S.value;E&&E.track&&"video"===E.track.kind&&(L.log("Removing video sender:",E),s.pc.removeTrack(E))}}catch(B){w=!0,y=B}finally{try{b||null==j.return||j.return()}finally{if(w)throw y}}}}}}if(n.stream){var O=n.stream;return L.log("MediaStream provided by the application"),L.debug(O),r.update&&s.myStream&&s.myStream!==n.stream&&!s.streamExternal&&(L.stopAllTracks(s.myStream),s.myStream=null),s.streamExternal=!0,o.consentDialog(!1),void P(e,a,r,n,O)}if(q(r)||J(r)){if(!L.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var C={mandatory:{},optional:[]};o.consentDialog(!0);var _=q(r);_&&r&&"object"===typeof r.audio&&(_=r.audio);var x=J(r);if(x&&r){var T=!0===n.simulcast,I=!0===n.simulcast2;if(!T&&!I||a||r.video||(r.video="hires"),r.video&&"screen"!=r.video&&"window"!=r.video)if("object"===typeof r.video)x=r.video;else{var D=0,M=0;"lowres"===r.video?(M=240,240,D=320):"lowres-16:9"===r.video?(M=180,180,D=320):"hires"===r.video||"hires-16:9"===r.video||"hdres"===r.video?(M=720,720,D=1280):"fhdres"===r.video?(M=1080,1080,D=1920):"4kres"===r.video?(M=2160,2160,D=3840):"stdres"===r.video?(M=480,480,D=640):"stdres-16:9"===r.video?(M=360,360,D=640):(L.log("Default video setting is stdres 4:3"),M=480,480,D=640),L.log("Adding media constraint:",r.video),x={height:{ideal:M},width:{ideal:D}},L.log("Adding video constraint:",x)}else if("screen"===r.video||"window"===r.video){var A=function(t,i){o.consentDialog(!1),t?n.error(t):P(e,a,r,n,i)},R=function(e,t,n){L.log("Adding media constraint (screen capture)"),L.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){o.consentDialog(!1),t(e)}))};if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return C.video={},r.screenshareFrameRate&&(C.video.frameRate=r.screenshareFrameRate),r.screenshareHeight&&(C.video.height=r.screenshareHeight),r.screenshareWidth&&(C.video.width=r.screenshareWidth),C.audio=r.captureDesktopAudio,void navigator.mediaDevices.getDisplayMedia(C).then((function(t){o.consentDialog(!1),q(r)&&!r.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(o){t.addTrack(o.getAudioTracks()[0]),P(e,a,r,n,t)})):P(e,a,r,n,t)}),(function(e){o.consentDialog(!1),n.error(e)}));if("chrome"===L.webRTCAdapter.browserDetails.browser){var V=L.webRTCAdapter.browserDetails.version,U=33;window.navigator.userAgent.match("Linux")&&(U=35),V>=26&&V<=U?(C={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate,chromeMediaSource:"screen"}},audio:q(r)&&!r.keepAudio},R(C,A)):L.extension.getScreen((function(e,t){if(e)return o.consentDialog(!1),n.error(e);(C={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=t,R(C,A,q(r)&&!r.keepAudio)}))}else if("firefox"===L.webRTCAdapter.browserDetails.browser){if(!(L.webRTCAdapter.browserDetails.version>=33)){var N=new Error("NavigatorUserMediaError");return N.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",o.consentDialog(!1),void n.error(N)}C={video:{mozMediaSource:r.video,mediaSource:r.video},audio:q(r)&&!r.keepAudio},R(C,(function(e,t){if(A(e,t),!e)var n=t.currentTime,a=window.setInterval((function(){t||window.clearInterval(a),t.currentTime==n&&(window.clearInterval(a),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}r&&"screen"===r.video||navigator.mediaDevices.enumerateDevices().then((function(t){var i=t.some((function(e){return"audioinput"===e.kind})),s=function(e){if(L.debug("isScreenSendEnabled:",e),!e)return!1;if("object"!==typeof e.video||"object"!==typeof e.video.mandatory)return!1;var t=e.video.mandatory;if(t.chromeMediaSource)return"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource;if(t.mozMediaSource)return"window"===t.mozMediaSource||"screen"===t.mozMediaSource;if(t.mediaSource)return"window"===t.mediaSource||"screen"===t.mediaSource;return!1}(r)||t.some((function(e){return"videoinput"===e.kind})),c=q(r),l=J(r),d=function(e){return L.debug("isAudioSendRequired:",e),!!e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}(r),u=function(e){return L.debug("isVideoSendRequired:",e),!!e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}(r);if(c||l||d||u){var m=!!c&&i,p=!!l&&s;if(!m&&!p)return o.consentDialog(!1),n.error("No capture device found"),!1;if(!m&&d)return o.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!p&&u)return o.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var h={audio:!(!i||r.keepAudio)&&_,video:!(!s||r.keepVideo)&&x};L.debug("getUserMedia constraints",h),h.audio||h.video?navigator.mediaDevices.getUserMedia(h).then((function(t){o.consentDialog(!1),P(e,a,r,n,t)})).catch((function(e){o.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(o.consentDialog(!1),P(e,a,r,n,O))})).catch((function(e){o.consentDialog(!1),n.error(e)}))}else P(e,a,r,n)}function U(e,t){(t=t||{}).success="function"==typeof t.success?t.success:L.noop,t.error="function"==typeof t.error?t.error:z;var n=t.jsep,a=k[e];if(!a||!a.webrtcStuff)return L.warn("Invalid handle"),void t.error("Invalid handle");var r=a.webrtcStuff;if(n){if(!r.pc)return L.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.pc.setRemoteDescription(n).then((function(){if(L.log("Remote description accepted!"),r.remoteSdp=n.sdp,r.candidates&&r.candidates.length>0){for(var e=0;e<r.candidates.length;e++){var a=r.candidates[e];L.debug("Adding remote candidate:",a),a&&!0!==a.completed?r.pc.addIceCandidate(a):r.pc.addIceCandidate(L.endOfCandidates)}r.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function N(e,t){var n=k[e];if(!n||!n.webrtcStuff)return L.warn("Invalid handle"),0;var a=t?"remote":"local",r=n.webrtcStuff;return r.volume[a]||(r.volume[a]={value:0}),!r.pc.getStats||"chrome"!==L.webRTCAdapter.browserDetails.browser&&"safari"!==L.webRTCAdapter.browserDetails.browser?(L.warn("Getting the "+a+" volume unsupported by browser"),0):t&&!r.remoteStream?(L.warn("Remote stream unavailable"),0):t||r.myStream?r.volume[a].timer?r.volume[a].value:(L.log("Starting "+a+" volume monitor"),r.volume[a].timer=setInterval((function(){r.pc.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(t&&!e.remoteSource||!t&&"media-source"!==e.type||(r.volume[a].value=e.audioLevel?e.audioLevel:0))}))}))}),200),0):(L.warn("Local stream unavailable"),0)}function $(e,t){var n=k[e];if(!n||!n.webrtcStuff)return L.warn("Invalid handle"),!0;var a=n.webrtcStuff;return a.pc?a.myStream?t?a.myStream.getVideoTracks()&&0!==a.myStream.getVideoTracks().length?!a.myStream.getVideoTracks()[0].enabled:(L.warn("No video track"),!0):a.myStream.getAudioTracks()&&0!==a.myStream.getAudioTracks().length?!a.myStream.getAudioTracks()[0].enabled:(L.warn("No audio track"),!0):(L.warn("Invalid local MediaStream"),!0):(L.warn("Invalid PeerConnection"),!0)}function B(e,t,n){var a=k[e];if(!a||!a.webrtcStuff)return L.warn("Invalid handle"),!1;var r=a.webrtcStuff;return r.pc?r.myStream?t?r.myStream.getVideoTracks()&&0!==r.myStream.getVideoTracks().length?(r.myStream.getVideoTracks()[0].enabled=!n,!0):(L.warn("No video track"),!1):r.myStream.getAudioTracks()&&0!==r.myStream.getAudioTracks().length?(r.myStream.getAudioTracks()[0].enabled=!n,!0):(L.warn("No audio track"),!1):(L.warn("Invalid local MediaStream"),!1):(L.warn("Invalid PeerConnection"),!1)}function F(e){var t=k[e];if(!t||!t.webrtcStuff)return L.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return n.pc?n.pc.getStats?n.bitrate.timer?n.bitrate.value:(L.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var a=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"===L.webRTCAdapter.browserDetails.browser&&(a/=1e3);var r=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/a);"safari"===L.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),n.bitrate.value=r+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):(L.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"):"Invalid PeerConnection"}function z(e){L.error("WebRTC error:",e)}function W(e,a){L.log("Cleaning WebRTC stuff");var r=k[e];if(r){var o=r.webrtcStuff;if(o){if(!0===a){var i={janus:"hangup",transaction:L.randomString(12)};r.token&&(i.token=r.token),g&&(i.apisecret=g),L.debug("Sending hangup request (handle="+e+"):"),L.debug(i),t?(i.session_id=y,i.handle_id=e,n.send(JSON.stringify(i))):L.httpAPICall(s+"/"+y+"/"+e,{verb:"POST",withCredentials:m,body:i})}o.remoteStream=null,o.volume&&(o.volume.local&&o.volume.local.timer&&clearInterval(o.volume.local.timer),o.volume.remote&&o.volume.remote.timer&&clearInterval(o.volume.remote.timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null,!o.streamExternal&&o.myStream&&(L.log("Stopping local stream tracks"),L.stopAllTracks(o.myStream)),o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(c){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null,o.senderTransforms=null,o.receiverTransforms=null}r.oncleanup()}}function q(e){return L.debug("isAudioSendEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function H(e){return L.debug("isAudioRecvEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function J(e){return L.debug("isVideoSendEnabled:",e),!e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function G(e){return L.debug("isVideoRecvEnabled:",e),!e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}x(e),this.getServer=function(){return s},this.isConnected=function(){return w},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:L.noop,e.error="function"==typeof e.error?e.error:L.noop,e.reconnect=!0,x(e)},this.getSessionId=function(){return y},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:L.noop,e.error="function"==typeof e.error?e.error:L.noop,L.log("Getting info on Janus instance"),!w)return L.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=L.randomString(12),r={janus:"info",transaction:a};h&&(r.token=h);g&&(r.apisecret=g);if(t)return E[a]=function(t){L.log("Server info:"),L.debug(t),"server_info"!==t.janus&&L.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},void n.send(JSON.stringify(r));L.httpAPICall(s,{verb:"POST",withCredentials:m,body:r,success:function(t){L.log("Server info:"),L.debug(t),"server_info"!==t.janus&&L.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){L.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(o){!function(o){(o=o||{}).success="function"==typeof o.success?o.success:L.noop,o.error="function"==typeof o.error?o.error:L.noop;var i=!0===o.unload,c=!0;void 0!==o.notifyDestroyed&&null!==o.notifyDestroyed&&(c=!0===o.notifyDestroyed);var l=!0===o.cleanupHandles;if(L.log("Destroying session "+y+" (unload="+i+")"),!y)return L.warn("No session to destroy"),o.success(),void(c&&e.destroyed());if(l)for(var d in k)R(d,{noRequest:!0});if(!w)return L.warn("Is the server down? (connected=false)"),y=null,void o.success();var u={janus:"destroy",transaction:L.randomString(12)};h&&(u.token=h);g&&(u.apisecret=g);if(i)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(s+"/"+y,JSON.stringify(u)),L.log("Destroyed session:"),y=null,w=!1,o.success(),void(c&&e.destroyed());if(t){u.session_id=y;var p=function(){for(var e in a)n.removeEventListener(e,a[e]);n.removeEventListener("message",f),n.removeEventListener("error",v),r&&clearTimeout(r),n.close()},f=function(t){var n=JSON.parse(t.data);n.session_id==u.session_id&&n.transaction==u.transaction&&(p(),o.success(),c&&e.destroyed())},v=function(t){p(),o.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",f),n.addEventListener("error",v),void(1===n.readyState?n.send(JSON.stringify(u)):v())}L.httpAPICall(s+"/"+y,{verb:"POST",withCredentials:m,body:u,success:function(t){L.log("Destroyed session:"),L.debug(t),y=null,w=!1,"success"!==t.janus&&L.error("Ooops: "+t.error.code+" "+t.error.reason),o.success(),c&&e.destroyed()},error:function(t,n){L.error(t+":",n),y=null,w=!1,o.success(),c&&e.destroyed()}})}(o)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:L.noop,e.error="function"==typeof e.error?e.error:L.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:L.noop,e.iceState="function"==typeof e.iceState?e.iceState:L.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:L.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:L.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:L.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:L.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:L.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:L.noop,e.ondata="function"==typeof e.ondata?e.ondata:L.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:L.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:L.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:L.noop,!w)return L.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var a=e.plugin;if(!a)return L.error("Invalid plugin"),void e.error("Invalid plugin");var r=e.opaqueId,o=e.token?e.token:h,i=L.randomString(12),c={janus:"attach",plugin:a,opaque_id:r,transaction:i};o&&(c.token=o);g&&(c.apisecret=g);if(t)return E[i]=function(t){if(L.debug(t),"success"!==t.janus)return L.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;L.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return B(n,!1,!0)},unmuteAudio:function(){return B(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return B(n,!0,!0)},unmuteVideo:function(){return B(n,!0,!1)},getBitrate:function(){return F(n)},send:function(e){T(n,e)},data:function(e){M(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(n,!0,e)},createAnswer:function(e){V(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){W(n,!0===e)},detach:function(e){R(n,e)}};k[n]=r,e.success(r)},c.session_id=y,void n.send(JSON.stringify(c));L.httpAPICall(s+"/"+y,{verb:"POST",withCredentials:m,body:c,success:function(t){if(L.debug(t),"success"!==t.janus)return L.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;L.log("Created handle: "+n);var r={session:S,plugin:a,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return a},getVolume:function(){return N(n,!0)},getRemoteVolume:function(){return N(n,!0)},getLocalVolume:function(){return N(n,!1)},isAudioMuted:function(){return $(n,!1)},muteAudio:function(){return B(n,!1,!0)},unmuteAudio:function(){return B(n,!1,!1)},isVideoMuted:function(){return $(n,!0)},muteVideo:function(){return B(n,!0,!0)},unmuteVideo:function(){return B(n,!0,!1)},getBitrate:function(){return F(n)},send:function(e){T(n,e)},data:function(e){M(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(n,!0,e)},createAnswer:function(e){V(n,!1,e)},handleRemoteJsep:function(e){U(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){W(n,!0===e)},detach:function(e){R(n,e)}};k[n]=r,e.success(r)},error:function(t,n){L.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}L.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,a=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new a(e,t)},extension:e&&e.extension||P,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||A.a,httpAPICall:function(e,a){var r={method:a.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===a.verb&&(r.headers["Content-Type"]="application/json"),void 0!==a.withCredentials&&(r.credentials=!0===a.withCredentials?"include":a.withCredentials?a.withCredentials:"omit"),a.body&&(r.body=JSON.stringify(a.body));var o=t(e,r).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(a.timeout){var i=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:a.timeout})}),a.timeout)}));o=n.race([o,i])}return o.then((function(e){return e.ok?typeof a.success===typeof L.noop?e.json().then((function(e){a.success(e)})).catch((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof a.error===typeof L.noop&&a.error(e.message||"<< internal error >>",e)})),o}}},L.useOldDependencies=function(e){var t=e&&e.jQuery||M.a,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||P,webRTCAdapter:e&&e.adapter||A.a,httpAPICall:function(e,n){var a=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},r=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(a,r,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success===typeof L.noop&&n.success(e)},error:function(e,t,a){typeof n.error===typeof L.noop&&n.error(t,a)}}))}}},L.noop=function(){},L.dataChanDefaultLabel="JanusDataChannel",L.endOfCandidates=null,L.stopAllTracks=function(e){try{var t=e.getTracks(),n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;L.log(s),s&&s.stop()}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}catch(l){}},L.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:L.noop,L.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),L.trace=L.noop,L.debug=L.noop,L.vdebug=L.noop,L.log=L.noop,L.warn=L.noop,L.error=L.noop,!0===e.debug||"all"===e.debug)L.trace=console.trace.bind(console),L.debug=console.debug.bind(console),L.vdebug=console.debug.bind(console),L.log=console.log.bind(console),L.warn=console.warn.bind(console),L.error=console.error.bind(console);else if(Array.isArray(e.debug)){var t=!0,n=!1,a=void 0;try{for(var r,o=e.debug[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;switch(i){case"trace":L.trace=console.trace.bind(console);break;case"debug":L.debug=console.debug.bind(console);break;case"vdebug":L.vdebug=console.debug.bind(console);break;case"log":L.log=console.log.bind(console);break;case"warn":L.warn=console.warn.bind(console);break;case"error":L.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+i+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}}catch(b){n=!0,a=b}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}L.log("Initializing library");var s=e.dependencies||L.useDefaultDependencies();L.isArray=s.isArray,L.webRTCAdapter=s.webRTCAdapter,L.httpAPICall=s.httpAPICall,L.newWebSocket=s.newWebSocket,L.extension=s.extension,L.extension.init(),L.listDevices=function(e,t){e="function"==typeof e?e:L.noop,null==t&&(t={audio:!0,video:!0}),L.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){L.debug(n),e(n),L.stopAllTracks(t)}))})).catch((function(t){L.error(t),e([])})):(L.warn("navigator.mediaDevices unavailable"),e([]))},L.attachMediaStream=function(e,t){try{e.srcObject=t}catch(n){try{e.src=URL.createObjectURL(t)}catch(n){L.error("Error attaching stream to element")}}},L.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch(n){try{e.src=t.src}catch(n){L.error("Error reattaching stream to element")}}};var c=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",l=window["on"+c];if(window.addEventListener(c,(function(e){for(var t in L.log("Closing window"),L.sessions)L.sessions[t]&&L.sessions[t].destroyOnUnload&&(L.log("Destroying session "+t),L.sessions[t].destroy({unload:!0,notifyDestroyed:!1}));l&&"function"==typeof l&&l()})),L.safariVp8=!1,"safari"===L.webRTCAdapter.browserDetails.browser&&L.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){var d=!0,u=!1,m=void 0;try{for(var p,h=RTCRtpSender.getCapabilities("video").codecs[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;if(g&&g.mimeType&&"video/vp8"===g.mimeType.toLowerCase()){L.safariVp8=!0;break}}}catch(b){u=!0,m=b}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}L.safariVp8?L.log("This version of Safari supports VP8"):L.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var f=new RTCPeerConnection({});f.createOffer({offerToReceiveVideo:!0}).then((function(e){L.safariVp8=-1!==e.sdp.indexOf("VP8"),L.safariVp8?L.log("This version of Safari supports VP8"):L.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),f.close(),f=null}))}if(L.unifiedPlan=!1,"firefox"===L.webRTCAdapter.browserDetails.browser&&L.webRTCAdapter.browserDetails.version>=59)L.unifiedPlan=!0;else if("chrome"===L.webRTCAdapter.browserDetails.browser&&L.webRTCAdapter.browserDetails.version>=72)L.unifiedPlan=!0;else if(window.RTCRtpTransceiver&&"currentDirection"in R.prototype){var v=new RTCPeerConnection;try{v.addTransceiver("audio"),L.unifiedPlan=!0}catch(w){}v.close()}else L.unifiedPlan=!1;L.initDone=!0,e.callback()}},L.isWebrtcSupported=function(){return!!window.RTCPeerConnection},L.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},L.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n};var V,U=L,N=n(7),$=(V={home:"\u062e\u0627\u0646\u0647",name:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc ",login:"\u0648\u0631\u0648\u062f",username:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc ",password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 ",password_confirmation:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",mobile:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 ",error:"\u062e\u0637\u0627",sign_in:"\u0648\u0631\u0648\u062f ",sign_up:"\u062b\u0628\u062a \u0646\u0627\u0645",back:"\u0628\u0627\u0632\u06af\u0634\u062a",signed_up_already:"\u062a\u0627 \u06a9\u0646\u0648\u0646 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u061f",new_advert:"\u062f\u0631\u062c \u0622\u06af\u0647\u06cc ",title:"\u0639\u0646\u0648\u0627\u0646",abstract:"\u0686\u06a9\u06cc\u062f\u0647",content:"\u0645\u062a\u0646",submit:"\u062b\u0628\u062a ",upload_from_gallery:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0627\u0632 \u06af\u0627\u0644\u0631\u06cc",welcome:"\u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f",sign_out:"\u062e\u0631\u0648\u062c",phone_number:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646",telegram_channel:"\u06a9\u0627\u0646\u0627\u0644 \u062a\u0644\u06af\u0631\u0627\u0645",instagram_page:"\u0635\u0641\u062d\u0647 \u0627\u06cc\u0646\u0633\u062a\u0627\u06af\u0631\u0627\u0645",address:"\u0622\u062f\u0631\u0633 ",email:"\u0627\u06cc\u0645\u06cc\u0644 ",contact_information:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062a\u0645\u0627\u0633 ",search:"\u062c\u0633\u062a\u062c\u0648 ",cancel:"\u0627\u0646\u0635\u0631\u0627\u0641",view:"\u0646\u0645\u0627\u06cc\u0634",edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634",delete:"\u062d\u0630\u0641",adverts_nes:"\u0639\u0646\u0648\u0627\u0646\u060c \u0645\u062a\u0646 \u0648 \u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a",my_pins:" \u0646\u0634\u0627\u0646 \u0634\u062f\u0647\u200c\u0647\u0627 ",pin:"\u0646\u0634\u0627\u0646 \u06a9\u0646",pinned:"\u0646\u0634\u0627\u0646 \u0634\u062f\u0647",message_to_seller:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",messages:"\u067e\u06cc\u0627\u0645 \u0647\u0627 ",send_message:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",province:"\u0627\u0633\u062a\u0627\u0646",city:"\u0634\u0647\u0631",website:"\u0648\u0628\u0633\u0627\u06cc\u062a",call:"\u062a\u0645\u0627\u0633 \u0628\u06af\u06cc\u0631\u06cc\u062f",ago:" \u0642\u0628\u0644",all_above:"\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0641\u0648\u0642",no_result:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f ",category:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc ",leg:"\u0645\u0633\u06cc\u0631",date:"\u062a\u0627\u0631\u06cc\u062e",time:"\u0632\u0645\u0627\u0646",numberOfPassngers:"\u062a\u0639\u062f\u0627\u062f \u0645\u0633\u0627\u0641\u0631\u0627\u0646 ",surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",fathername:"\u0646\u0627\u0645 \u067e\u062f\u0631",ssn:"\u06a9\u062f\u0645\u0644\u06cc",birthplace:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",pass_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",birthdate:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f",place_of_birth:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",required_fields:"\u0641\u06cc\u0644\u062f\u0647\u0627\u06cc \u0627\u062c\u0628\u0627\u0631\u06cc",en_father_name:"\u0646\u0627\u0645 \u067e\u062f\u0631 \u0644\u0627\u062a\u06cc\u0646",en_name:"\u0646\u0627\u0645 \u0644\u0627\u062a\u06cc\u0646",en_surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u0644\u0627\u062a\u06cc\u0646 ",passport_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",final_confirm:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0647\u0627\u06cc\u06cc ",document_form:"\u0641\u0631\u0645 \u0627\u0633\u0646\u0627\u062f ",save:"\u0630\u062e\u06cc\u0631\u0647",documents:"\u0627\u0633\u0646\u0627\u062f ",type:"\u0646\u0648\u0639",string:"\u0645\u062a\u0646 \u06a9\u0648\u062a\u0627\u0647",text:"\u0645\u062a\u0646 \u0628\u0644\u0646\u062f",select:"\u06af\u0632\u06cc\u0646\u0647",multiSelect:"\u0686\u0646\u062f \u06af\u0632\u06cc\u0646\u0647",table:"\u062c\u062f\u0648\u0644"},Object(N.a)(V,"date","\u062a\u0627\u0631\u06cc\u062e"),Object(N.a)(V,"refundable","\u0642\u0627\u0628\u0644 \u0627\u0639\u0627\u062f\u0647"),Object(N.a)(V,"yes","\u0628\u0644\u0647"),Object(N.a)(V,"no","\u062e\u06cc\u0631"),Object(N.a)(V,"commentable","\u0642\u0627\u0628\u0644 \u0646\u0638\u0631\u062f\u0647\u06cc"),Object(N.a)(V,"end_point","\u0646\u0642\u0637\u0647 \u067e\u0627\u06cc\u0627\u0646"),Object(N.a)(V,"start_point","\u0646\u0642\u0637\u0647 \u0634\u0631\u0648\u0639"),Object(N.a)(V,"votable","\u0631\u0627\u06cc \u06af\u06cc\u0631\u06cc"),Object(N.a)(V,"publishable","\u0642\u0627\u0628\u0644 \u0627\u0646\u062a\u0634\u0627\u0631"),Object(N.a)(V,"field_name","\u0646\u0627\u0645 \u0641\u06cc\u0644\u062f"),Object(N.a)(V,"add","\u0627\u0641\u0632\u0648\u062f\u0646 "),Object(N.a)(V,"remove","\u062d\u0630\u0641"),Object(N.a)(V,"auxiliary_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"create_by","\u0627\u06cc\u062c\u0627\u062f \u0634\u062f\u0647 \u062a\u0648\u0633\u0637"),Object(N.a)(V,"list","\u0644\u06cc\u0633\u062a"),Object(N.a)(V,"workflows","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"auxiliary_records","\u0645\u0642\u0627\u062f\u06cc\u0631 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"basic_table","\u062c\u062f\u0648\u0644 \u067e\u0627\u06cc\u0647"),Object(N.a)(V,"relation_table","\u062c\u062f\u0648\u0644 \u0631\u0627\u0628\u0637\u0647"),Object(N.a)(V,"auxiliary_table_form","\u0641\u0631\u0645 \u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc "),Object(N.a)(V,"Basic","\u067e\u0627\u06cc\u0647"),Object(N.a)(V,"Relation","\u0631\u0627\u0628\u0637\u0647 "),Object(N.a)(V,"Divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(V,"workflow_form","\u0641\u0631\u0645 \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(V,"submitting","\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644 ... "),Object(N.a)(V,"settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"),Object(N.a)(V,"receiving","\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a ..."),Object(N.a)(V,"workflow_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631 "),Object(N.a)(V,"auxiliary_table","\u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(N.a)(V,"workflow","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(N.a)(V,"actions","\u0639\u0645\u0644\u06cc\u0627\u062a"),Object(N.a)(V,"roles","\u0646\u0642\u0634 \u0647\u0627"),Object(N.a)(V,"divan","\u062f\u06cc\u0648\u0627\u0646"),Object(N.a)(V,"enter_your_email","\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"enter_your_password","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f "),Object(N.a)(V,"enter_your_password_confirmation","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f "),Object(N.a)(V,"profiles","\u0627\u0641\u0631\u0627\u062f "),Object(N.a)(V,"firstname","\u0646\u0627\u0645"),Object(N.a)(V,"if_registered","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(V,"you_can_login","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"),Object(N.a)(V,"if_not_registered","\u0627\u06af\u0631 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(N.a)(V,"you_can_sign_up","\u0686\u0646\u0627\u0646\u0686\u0647 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u060c \u0627\u06cc\u0646\u062c\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f."),Object(N.a)(V,"new_assignment","\u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"posts","\u067e\u0633\u062a \u0647\u0627"),Object(N.a)(V,"bookmark","\u0646\u0634\u0627\u0646"),Object(N.a)(V,"like","\u0639\u0644\u0627\u0642\u0647"),Object(N.a)(V,"follow","\u062f\u0646\u0628\u0627\u0644"),Object(N.a)(V,"share","\u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(V,"social_acts","\u0639\u0645\u0644\u06af\u0631\u0647\u0627\u06cc \u0627\u062c\u062a\u0645\u0627\u0639\u06cc "),Object(N.a)(V,"channels","\u06a9\u0627\u0646\u0627\u0644 \u0647\u0627"),Object(N.a)(V,"close","\u0628\u0633\u062a\u0646"),Object(N.a)(V,"channel","\u06a9\u0627\u0646\u0627\u0644 "),Object(N.a)(V,"details","\u0634\u0631\u062d"),Object(N.a)(V,"Shoa","\u0634\u0639\u0627\u0639 "),Object(N.a)(V,"role","\u0646\u0642\u0634"),Object(N.a)(V,"Default","\u067e\u06cc\u0634 \u0641\u0631\u0636"),Object(N.a)(V,"NonDefault","\u063a\u06cc\u0631 \u067e\u06cc\u0634 \u0641\u0631\u0636 "),Object(N.a)(V,"value"," \u0645\u0642\u062f\u0627\u0631"),Object(N.a)(V,"true","\u0645\u062b\u0628\u062a"),Object(N.a)(V,"false","\u0645\u0646\u0641\u06cc"),Object(N.a)(V,"access_control_list","\u0644\u06cc\u0633\u062a \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(V,"access_control_form","\u0641\u0631\u0645 \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(N.a)(V,"assignment_form","\u0641\u0631\u0645 \u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634"),Object(N.a)(V,"comment_form","\u0646\u0638\u0631 \u0628\u062f\u0647\u06cc\u062f"),Object(N.a)(V,"post_form","\u0641\u0631\u0645 \u067e\u0633\u062a"),Object(N.a)(V,"metas","\u067e\u06cc\u0634 \u062c\u062f\u0627\u0648\u0644"),Object(N.a)(V,"shoa","\u0634\u0639\u0627\u0639"),Object(N.a)(V,"form","\u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a"),Object(N.a)(V,"choose_image","\u0627\u0646\u062a\u062e\u0627\u0628 \u0639\u06a9\u0633"),Object(N.a)(V,"logout","\u062e\u0631\u0648\u062c"),Object(N.a)(V,"more","\u0628\u06cc\u0634\u062a\u0631 ..."),Object(N.a)(V,"social","\u0627\u062c\u062a\u0645\u0627\u0639\u06cc"),Object(N.a)(V,"courses","\u062f\u0631\u0648\u0633"),Object(N.a)(V,"discussions","\u06af\u0641\u062a\u06af\u0648 \u0647\u0627"),Object(N.a)(V,"exams","\u0622\u0632\u0645\u0648\u0646 \u0647\u0627 "),Object(N.a)(V,"public","\u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(V,"private","\u062e\u0635\u0648\u0635\u06cc "),Object(N.a)(V,"course_type","\u0646\u0648\u0639 \u062f\u0631\u0633"),Object(N.a)(V,"select_appropriate_title","\u0639\u0646\u0648\u0627\u0646\u06cc \u0645\u0646\u0627\u0633\u0628 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"write_appropriate_description","\u0634\u0631\u062d\u06cc \u0627\u0632 \u0627\u0647\u062f\u0627\u0641 \u0648 \u0631\u0648\u0634 \u0647\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"description","\u0634\u0631\u062d "),Object(N.a)(V,"drag_or_browse","\u0641\u0627\u06cc\u0644 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0631\u0627 \u0627\u06cc\u0646\u062c\u0627 \u0628\u06cc\u0627\u0646\u062f\u0627\u0632\u06cc\u062f \u06cc\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"attachment","\u0641\u0627\u06cc\u0644 \u0647\u0627\u06cc \u067e\u06cc\u0648\u0633\u062a"),Object(N.a)(V,"tasks","\u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"start_date","\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639"),Object(N.a)(V,"deadline","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc"),Object(N.a)(V,"select_a_date","\u06cc\u06a9 \u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"incomplete_data","\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0631\u0627 \u062a\u06a9\u0645\u06cc\u0644 \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"alert","\u0647\u0634\u062f\u0627\u0631"),Object(N.a)(V,"deadline_time","\u0633\u0627\u0639\u062a"),Object(N.a)(V,"start_time","\u0633\u0627\u0639\u062a"),Object(N.a)(V,"select_a_time","\u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u0627\u0639\u062a"),Object(N.a)(V,"coworkers","\u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(V,"works","\u06a9\u0627\u0631\u0647\u0627 "),Object(N.a)(V,"dashboard","\u0645\u06cc\u0632\u06a9\u0627\u0631"),Object(N.a)(V,"tavan","\u062a\u0648\u0627\u0646"),Object(N.a)(V,"statuses","\u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(V,"status","\u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(V,"add_stauts","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"),Object(N.a)(V,"select","\u0627\u0646\u062a\u062e\u0627\u0628"),Object(N.a)(V,"new","\u062c\u062f\u06cc\u062f"),Object(N.a)(V,"task","\u0648\u0638\u06cc\u0641\u0647"),Object(N.a)(V,"attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627"),Object(N.a)(V,"reports","\u0627\u0633\u0646\u0627\u062f \u0648 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"tags","\u0628\u0631\u0686\u0633\u0628 \u0647\u0627"),Object(N.a)(V,"new_tag","\u0628\u0631\u0686\u0633\u0628 \u062c\u062f\u06cc\u062f "),Object(N.a)(V,"recent_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0627\u062e\u06cc\u0631"),Object(N.a)(V,"public_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0639\u0645\u0648\u0645\u06cc"),Object(N.a)(V,"sort_by","\u0645\u0631\u062a\u0628 \u0633\u0627\u0632\u06cc"),Object(N.a)(V,"by_title","\u0639\u0646\u0648\u0627\u0646"),Object(N.a)(V,"by_events","\u0631\u062e\u062f\u0627\u062f"),Object(N.a)(V,"deadline_near","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc \u0646\u0632\u062f\u06cc\u06a9"),Object(N.a)(V,"new_report","\u06af\u0632\u0627\u0631\u0634 \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"new_comments","\u06af\u0641\u062a\u06af\u0648\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"Admin","\u0645\u062f\u06cc\u0631"),Object(N.a)(V,"Colleague","\u0647\u0645\u06a9\u0627\u0631"),Object(N.a)(V,"Observer","\u0646\u0627\u0638\u0631"),Object(N.a)(V,"Creator","\u0633\u0627\u0632\u0646\u062f\u0647"),Object(N.a)(V,"verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632"),Object(N.a)(V,"enter_verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(N.a)(V,"your_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(V,"your_newest_works","\u062c\u062f\u06cc\u062f\u062a\u0631\u06cc\u0646 \u06a9\u0627\u0631\u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(N.a)(V,"todo_list","\u062a\u0642\u0633\u06cc\u0645 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631"),Object(N.a)(V,"todo_participants","\u0627\u0641\u0631\u0627\u062f"),Object(N.a)(V,"new_todo_participants","\u0627\u0641\u0631\u0627\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"not_found","\u0686\u06cc\u0632\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),Object(N.a)(V,"are_you_sure","\u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f"),Object(N.a)(V,"Confirmer","\u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u0646\u062f\u0647"),Object(N.a)(V,"time_sheets","\u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"morning_report","\u06af\u0632\u0627\u0631\u0634 \u067e\u06cc\u0634 \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(V,"afternoon_report","\u06af\u0632\u0627\u0631\u0634 \u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"),Object(N.a)(V,"extra_report","\u06af\u0632\u0627\u0631\u0634 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0627\u0631\u06cc"),Object(N.a)(V,"write_appropriate_details","\u0634\u0631\u062d\u06cc \u06a9\u0627\u0645\u0644 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"associations","\u0645\u0631\u062a\u0628\u0637 \u0628\u0627"),Object(N.a)(V,"sheet_date","\u062a\u0627\u0631\u06cc\u062e \u062c\u062f\u0648\u0644"),Object(N.a)(V,"recipients","\u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0646\u062f\u06af\u0627\u0646"),Object(N.a)(V,"sent_by_me","\u0627\u0631\u0633\u0627\u0644 \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"sent_to_me","\u062f\u0631\u06cc\u0627\u0641\u062a \u0634\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"priority","\u0644\u0648\u0644\u0648\u06cc\u062a"),Object(N.a)(V,"normal","\u0639\u0627\u062f\u06cc"),Object(N.a)(V,"high","\u0641\u0648\u0631\u06cc"),Object(N.a)(V,"urgent","\u0628\u0633\u06cc\u0627\u0631 \u0641\u0648\u0631\u06cc"),Object(N.a)(V,"archived","\u0622\u0631\u0634\u06cc\u0648 \u0634\u062f\u0647"),Object(N.a)(V,"write_archive_note","\u0645\u062a\u0646 \u062c\u0645\u0639 \u0628\u0646\u062f\u06cc \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u0622\u0631\u0634\u06cc\u0648 \u0633\u0627\u0632\u06cc \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(N.a)(V,"user_groups","\u06af\u0631\u0648\u0647 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"),Object(N.a)(V,"user_settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0634\u062e\u0635\u06cc"),Object(N.a)(V,"add_involvement_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"remove_involvement_from_tasks","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"change_status_tasks","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_works_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06a9\u0627\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_reports_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_comments_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(N.a)(V,"add_involvement_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"remove_involvement_from_works","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"change_status_works","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_todos_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_reports_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_comments_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(N.a)(V,"add_involvement_to_todos","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631 \u0628\u0647 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(V,"remove_involvement_from_todos","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631 \u0627\u0632 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(N.a)(V,"add_involvement_to_time_sheets","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0628\u0647 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"remove_involvement_from_timesheets","\u062d\u0630\u0641 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0627\u0632 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(N.a)(V,"notification_type","\u0634\u06cc\u0648\u0647 \u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(V,"mail_notification","\u0627\u06cc\u0645\u06cc\u0644"),Object(N.a)(V,"push_notification","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0648\u0628"),Object(N.a)(V,"sms","\u067e\u06cc\u0627\u0645\u06a9"),Object(N.a)(V,"if_someone_adds_you_youll_be_asked","\u0686\u0646\u0627\u0646\u0686\u0647 \u06a9\u0633\u06cc \u0634\u0645\u0627 \u0631\u0627 \u0628\u0647 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u06cc\u0627\u0641\u0632\u0627\u06cc\u062f \u0634\u0645\u0627 \u0628\u0627\u06cc\u062f \u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u06cc\u062f."),Object(N.a)(V,"previous_attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627\u06cc \u0642\u0628\u0644\u0627 \u0622\u067e\u0644\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(V,"cas","\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a \u0645\u0631\u06a9\u0632\u06cc"),Object(N.a)(V,"profile","\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"),Object(N.a)(V,"groups","\u06af\u0631\u0648\u0647\u0628\u0646\u062f\u06cc \u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(N.a)(V,"confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0634\u062f\u0647"),Object(N.a)(V,"not_confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0646\u0634\u062f\u0647"),Object(N.a)(V,"blocked_list","\u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0645\u0633\u062f\u0648\u062f \u0634\u062f\u0647"),Object(N.a)(V,"notifications","\u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(N.a)(V,"privacy","\u062d\u0631\u06cc\u0645 \u062e\u0635\u0648\u0635\u06cc"),Object(N.a)(V,"add_comments_to_reports","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"new_notifications","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0647\u0627\u06cc \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"new_reports","\u0622\u062e\u0631\u06cc\u0646 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(N.a)(V,"events_calendar","\u062a\u0642\u0648\u06cc\u0645 \u0631\u062e\u062f\u0627\u062f\u0647\u0627"),Object(N.a)(V,"to","\u0628\u0647"),Object(N.a)(V,"statusChanges","\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(N.a)(V,"in_reply_to","\u062f\u0631 \u067e\u0627\u0633\u062e \u0628\u0647"),Object(N.a)(V,"avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"number_of_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"duration","\u0637\u0648\u0644 \u062c\u0644\u0633\u0647"),Object(N.a)(V,"kian","\u06a9\u06cc\u0627\u0646"),Object(N.a)(V,"attendances","\u062d\u0627\u0636\u0631\u06cc\u0646"),Object(N.a)(V,"attendance_duration","\u062f\u0642\u0627\u06cc\u0642 \u062d\u0636\u0648\u0631"),Object(N.a)(V,"utid","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(V,"attendance_percentage","\u062f\u0631\u0635\u062f \u062d\u0636\u0648\u0631"),Object(N.a)(V,"faculties","\u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"total_assets","\u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(V,"id","\u0634\u0646\u0627\u0633\u0647"),Object(N.a)(V,"courses_most_quiz","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a"),Object(N.a)(V,"courses_most_resource","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u0646\u0627\u0628\u0639"),Object(N.a)(V,"courses_most_assignment","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0645\u0631\u06cc\u0646 \u0647\u0627"),Object(N.a)(V,"teacher","\u0645\u062f\u0631\u0633"),Object(N.a)(V,"courses_most_occ","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"courses_most_ocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"courses_most_activity","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0645\u062c\u0645\u0648\u0639 \u0641\u0639\u0627\u0644\u06cc\u062a"),Object(N.a)(V,"bb_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"adobe_meetings","\u062c\u0644\u0633\u0627\u062a \u0627\u062f\u0648\u0628\u06cc"),Object(N.a)(V,"number_of_bb_meetings","\u062a\u0639\u062f\u0627\u062f \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"courses_most_bocc","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u062c\u0644\u0633\u0647 \u062f\u0631 \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"courses_most_bocd","\u062f\u0631\u0648\u0633 \u0628\u0627 \u0628\u06cc\u0634\u062a\u0631\u06cc\u0646 \u0632\u0645\u0627\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"person_session","\u0646\u0641\u0631/\u062c\u0644\u0633\u0647"),Object(N.a)(V,"session","\u062c\u0644\u0633\u0647"),Object(N.a)(V,"bb_avarage","\u0645\u06cc\u0627\u0646\u06af\u06cc\u0646 \u062c\u0644\u0633\u0627\u062a \u0627\u062a\u0627\u0642 \u062a\u0639\u0627\u0645\u0644"),Object(N.a)(V,"link","\u0644\u06cc\u0646\u06a9 \u062f\u0631\u0633 \u062f\u0631 \u0627\u06cc\u0644\u0631\u0646"),Object(N.a)(V,"sections","\u067e\u0631\u062f\u06cc\u0633 \u0647\u0627 \u0648 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 \u0647\u0627"),Object(N.a)(V,"facultyId","\u0634\u0646\u0627\u0633\u0647 \u062f\u0627\u0646\u0634\u06a9\u062f\u0647 "),Object(N.a)(V,"is_typing","\u062f\u0631\u062d\u0627\u0644 \u0646\u0648\u0634\u062a\u0646 \u0627\u0633\u062a"),Object(N.a)(V,"pass","\u0631\u0645\u0632"),Object(N.a)(V,"new_slide","\u0627\u0633\u0644\u0627\u06cc\u062f \u062c\u062f\u06cc\u062f"),Object(N.a)(V,"unshare","\u0639\u062f\u0645 \u0627\u0634\u062a\u0631\u0627\u06a9"),Object(N.a)(V,"start_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u0631\u0648\u0634\u0646"),Object(N.a)(V,"end_camera","\u062f\u0648\u0631\u0628\u06cc\u0646 \u062e\u0627\u0645\u0648\u0634"),Object(N.a)(V,"record","\u0636\u0628\u0637 \u062c\u0644\u0633\u0647"),Object(N.a)(V,"recording","\u062f\u0631 \u062d\u0627\u0644 \u0636\u0628\u0637"),Object(N.a)(V,"stop","\u0642\u0637\u0639"),Object(N.a)(V,"send","\u0627\u0631\u0633\u0627\u0644"),Object(N.a)(V,"chat","\u06af\u0641\u062a\u06af\u0648"),Object(N.a)(V,"write_here","\u0627\u06cc\u0646\u062c\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f..."),V),B=(a.Component,n(11)),F=n(35),z=n(174),W=(n(349),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={image:null},n.handleLoad=function(){n.setState({image:n.image})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage(),e.width!==this.props.width&&this.loadImage(),e.height!==this.props.height&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.crossOrigin="anonymous",this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return r.a.createElement(F.b,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,image:this.state.image,ref:function(t){e.imageNode=t}})}}]),t}(r.a.Component)),q=n(167),H=n(168),J=n.n(H),G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleMouseDown=function(e){n.setState({isDrawing:!0}),console.log(n.getRelativePointerPosition(e.target.getStage())),console.log(e.target.getStage().getPointerPosition());var t=n.getRelativePointerPosition(e.target.getStage()),a=n.state.tool,r=Math.random().toString(36).substring(7),o={tool:a,color:n.state.color,vectorId:r,points:[t.x,t.y]};n.setState({lines:n.state.lines.concat(o),vectorId:n.state.vectorId.concat(r)},(function(){n.throttle(o,"line"),console.log(o)}))},n.handleMouseMove=function(e){if(n.state.pointerEnabled){var t=n.getRelativePointerPosition(e.target.getStage()),a={uuid:n.props.userUUID,x:t.x,y:t.y};return n.updateMovement(a),void n.throttle(a,"point")}if(n.state.isDrawing){e.target.getStage();var r=n.getRelativePointerPosition(e.target.getStage()),o=n.state.lines[n.state.lines.length-1];o.points=o.points.concat([r.x,r.y]),n.state.lines.splice(n.state.lines.length-1,1,o),n.setState({lines:n.state.lines.concat()},(function(){n.throttle(n.state.lines,"line")}))}},n.handleMouseUp=function(){n.setState({isDrawing:!1})},n.handleMouseDown=n.handleMouseDown.bind(Object(p.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(p.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(p.a)(n)),n.fitStageIntoParentContainer=n.fitStageIntoParentContainer.bind(Object(p.a)(n)),n.getRelativePointerPosition=n.getRelativePointerPosition.bind(Object(p.a)(n)),n.stage=r.a.createRef(),n.layer=r.a.createRef(),n.imageLayer=r.a.createRef(),n.throttle=n.throttle.bind(Object(p.a)(n)),n.pointer=n.pointer.bind(Object(p.a)(n)),n.handleClick=n.handleClick.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleClose=n.handleClose.bind(Object(p.a)(n)),n.undo=n.undo.bind(Object(p.a)(n)),n.removeLatestLine=n.removeLatestLine.bind(Object(p.a)(n)),n.trash=n.trash.bind(Object(p.a)(n)),n.updateMovement=n.updateMovement.bind(Object(p.a)(n)),n.togglePointer=n.togglePointer.bind(Object(p.a)(n)),n.loadImage=n.loadImage.bind(Object(p.a)(n)),n.recorder=n.recorder.bind(Object(p.a)(n)),n.stopRecording=n.stopRecording.bind(Object(p.a)(n)),n.recordBtn=n.recordBtn.bind(Object(p.a)(n)),n.arrows=n.arrows.bind(Object(p.a)(n)),n.state={tool:"pen",lines:[],isDrawing:!1,baseWidth:800,baseHeight:600,width:800,height:600,scale:4/3,scaleX:1,scaleY:1,lastTime:Date.now(),pointer:{x:100,y:100},currentPage:0,color:"#22194D",displayColorPicker:!1,upload:null,vectorId:[],pointers:[],pointerEnabled:!0,uploadedHeigth:1e3,ratio:.75,db:null,recording:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.line!==this.props.line&&this.setState({lines:this.state.lines.concat(this.props.line)}),e.participants!==this.props.participants&&(console.log("ZZZZZZZZ",this.props.participants),this.props.participants.map((function(e){var n=t.state.pointers.filter((function(t){return t.uuid===e.uuid}));0!==n.length&&e.userColor===n.userColor||t.setState({pointers:t.state.pointers.concat({uuid:e.uuid,color:e.userColor,x:0,y:0})},(function(){}))}))),e.undoVector!==this.props.undoVector&&this.props.undoVector&&(this.removeLatestLine(this.props.undoVector),this.props.revertUndo()),e.trash!==this.props.trash&&this.props.trash&&(this.applyTrash(),this.props.revertTrash()),e.upload!==this.props.upload&&this.props.upload.converted){var n=this.props.upload.dimensions[this.state.currentPage],a=n.h/n.w;console.log("><><><><",n.h,n.w),this.setState({currentPage:0,upload:this.props.upload,ratio:a}),this.props.uploadedRecently&&(this.throttle({currentPage:this.state.currentPage,uuid:this.props.upload.uuid},"newUpload"),this.props.uploadedRecentlyReset())}e.page!==this.props.page&&(this.props.page.uuid==this.state.upload.uuid?this.setState({currentPage:this.props.page.currentPage}):(console.log("Calling recentUpload ..."),this.props.recentUpload())),e.currentPoint!==this.props.currentPoint&&this.updateMovement(this.props.currentPoint)}},{key:"updateMovement",value:function(e){for(var t=this.state.pointers,n=0;n<t.length;n++)if(t[n].uuid===e.uuid){var a=Object.assign({},this.state);a.pointers[n]={uuid:t[n].uuid,color:t[n].color,x:e.x,y:e.y},this.setState(a)}}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"pointer",value:function(e,t){return r.a.createElement(F.a,{x:e,y:t,radius:2,fill:"green"})}},{key:"componentDidMount",value:function(){this.layer.current.getCanvas()._canvas.id="main-canvas",window.db={},window.db=new q.a("VideosDB"),window.db.version(2).stores({videos:"++id,session,blob"}),window.addEventListener("resize",this.fitStageIntoParentContainer),this.$$("#board").css({height:this.$$("#uploaded").height()}),console.log(">>>>>>>>>>>>",this.$$("#uploaded"))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.fitStageIntoParentContainer)}},{key:"fitStageIntoParentContainer",value:function(){var e=this,t=this.$$("#board").width(),n=this.$$("#board").height(),a=Math.min(t/this.state.width,n/this.state.height);window.innerWidth<1090&&(this.setState({scale:a}),this.setState({width:this.$$("#board").width(),height:this.$$("#board").width()*this.state.ratio},(function(){e.stage.current.width(e.$$("#board").width()),console.log(e.state.width,e.state.height),e.stage.current.height(e.$$("#board").width()*e.state.ratio),e.stage.current.scale({x:a,y:a}),e.stage.current.draw()}))),window.innerWidth>1090&&(this.setState({scale:a}),this.setState({width:800,height:800*this.state.ratio},(function(){e.stage.current.width(800),e.stage.current.height(800*e.state.ratio),e.stage.current.scale({x:a,y:a}),e.stage.current.draw()})))}},{key:"getRelativePointerPosition",value:function(e){var t=e.getAbsoluteTransform().copy();t.invert();var n=e.getStage().getPointerPosition();return t.point(n)}},{key:"progress",value:function(){var e=this;return this.props.progressShow||this.props.upload&&!this.props.upload.converted?r.a.createElement(c.w,{color:"red"}):r.a.createElement("div",{class:"upload-btn"},r.a.createElement("label",{for:"file-input"},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),r.a.createElement("line",{x1:"9",y1:"12",x2:"15",y2:"12"}),r.a.createElement("line",{x1:"12",y1:"9",x2:"12",y2:"15"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"90px"}},$.new_slide)),r.a.createElement("input",{id:"file-input",className:"file-input",type:"file",name:"resume",accept:"application/pdf",onInput:function(t){e.props.uploader(t.target.files[0]),e.setState({upload:null})}}))}},{key:"uploaded",value:function(){if(this.state.upload)return r.a.createElement("img",{src:"http://localhost:3001/"+this.state.upload.uuid+"/x-"+this.enumerator(this.state.currentPage)+".jpg",class:"b-radius-0 ",id:"uploaded",width:this.state.width+"px"})}},{key:"enumerator",value:function(e){return e<10?"000"+e.toString():10<=e<100?"00"+e.toString():100<=e<1e3?"0"+e.toString():void 0}},{key:"arrows",value:function(){var e=this;if(this.props.upload)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.previousPage()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"10",y2:"12"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"16",y2:"16"}),r.a.createElement("line",{x1:"20",y1:"12",x2:"16",y2:"8"}),r.a.createElement("line",{x1:"4",y1:"4",x2:"4",y2:"20"})))),r.a.createElement("div",{style:{marginTop:"-4px"}},this.state.currentPage+1,"/",this.props.upload.pages),r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.nextPage()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"14",y2:"12"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"8",y2:"16"}),r.a.createElement("line",{x1:"4",y1:"12",x2:"8",y2:"8"}),r.a.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"20"})))))}},{key:"nextPage",value:function(){var e=this;this.props.upload&&this.props.upload.pages&&this.props.upload.pages>this.state.currentPage&&this.setState({currentPage:this.state.currentPage+1},(function(){e.throttle({currentPage:e.state.currentPage,uuid:e.props.upload.uuid},"page")}))}},{key:"previousPage",value:function(){var e=this;this.props.upload&&this.props.upload.pages&&this.props.upload.pages>this.state.currentPage&&this.state.currentPage>0&&this.setState({currentPage:this.state.currentPage-1},(function(){e.throttle({currentPage:e.state.currentPage,uuid:e.props.upload.uuid},"page")}))}},{key:"handleClick",value:function(e){console.log(e),this.setState({displayColorPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function(e){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e,t){console.log(e,t),this.setState({color:e.hex,pointerEnabled:!1})}},{key:"undo",value:function(){var e=this.state.vectorId[this.state.vectorId.length-1];this.throttle(e,"undo"),this.removeLatestLine(e),this.setState({vectorId:this.state.vectorId.filter((function(t){return t!==e}))})}},{key:"removeLatestLine",value:function(e){this.state.lines.length>0&&this.setState({lines:this.state.lines.filter((function(t){return t.vectorId!==e}))})}},{key:"trash",value:function(){this.throttle(null,"trash"),this.setState({lines:[]})}},{key:"applyTrash",value:function(){this.setState({lines:[]})}},{key:"pointers",value:function(){var e=[];return this.state.pointers.map((function(t){e.push(r.a.createElement(F.a,{x:t.x,y:t.y,radius:5,fill:t.color}))})),e}},{key:"togglePointer",value:function(){this.setState({pointerEnabled:!this.state.pointerEnabled})}},{key:"loadImage",value:function(){if(this.state.upload)return r.a.createElement(W,{src:"http://localhost:3001/"+this.state.upload.uuid+"/x-"+this.enumerator(this.state.currentPage)+".jpg",width:this.state.width,height:this.state.width*this.state.ratio})}},{key:"recorder",value:function(){console.log("Record started");var e=this.layer.current.getCanvas()._canvas;window.recorder={};var t=new J.a([this.props.localStream,this.props.remoteStream]);console.log(t.getMixedStream());var n=new MediaStream([].concat(Object(B.a)(e.captureStream(5).getTracks()),Object(B.a)(t.getMixedStream().getTracks())));window.recorder=new MediaRecorder(n);var a=[];window.recorder.ondataavailable=function(e){e.data.size&&a.push(e.data)},window.recorder.onstop=function(){var e=new Blob(a,{type:"video/mp4"});URL.createObjectURL(e);window.db.videos.add({blob:e}).then((function(){console.log("Blob Stored ...")})).catch((function(e){alert("Error: "+(e.stack||e))}))},window.recorder.start(),this.setState({recording:!0})}},{key:"stageDrawer",value:function(){}},{key:"stopRecording",value:function(){window.recorder.stop(),this.setState({recording:!1})}},{key:"recordBtn",value:function(){var e=this;return this.state.recording?r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.stopRecording()}},r.a.createElement("div",{style:{float:"left"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"5",y:"5",width:"14",height:"14",rx:"2"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"125px"}},r.a.createElement(c.w,{color:"multi",size:15,style:{marginLeft:"2px"}}),$.recording,"...",$.stop))):r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.recorder()}},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),r.a.createElement("circle",{cx:"12",cy:"14",r:"2"}),r.a.createElement("polyline",{points:"14 4 14 8 8 8 8 4"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"90px"}},$.record)))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,null,r.a.createElement(c.i,null,r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.togglePointer()}},this.state.pointerEnabled?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("path",{d:"M14.828 9.172a4 4 0 0 1 0 5.656"}),r.a.createElement("path",{d:"M17.657 6.343a8 8 0 0 1 0 11.314"}),r.a.createElement("path",{d:"M9.168 14.828a4 4 0 0 1 0 -5.656"}),r.a.createElement("path",{d:"M6.337 17.657a8 8 0 0 1 0 -11.314"})):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M14.828 9.172a4 4 0 0 1 1.172 2.828"}),r.a.createElement("path",{d:"M17.657 6.343a8 8 0 0 1 1.635 8.952"}),r.a.createElement("path",{d:"M9.168 14.828a4 4 0 0 1 0 -5.656"}),r.a.createElement("path",{d:"M6.337 17.657a8 8 0 0 1 0 -11.314"}))),r.a.createElement("a",{onClick:this.handleClick},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"}),r.a.createElement("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"}))),this.state.displayColorPicker?r.a.createElement("div",{style:{position:"absolute",zIndex:"1000"}},r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:this.handleClose}),r.a.createElement(z.a,{onChange:this.handleChange})):null,r.a.createElement("a",{onClick:function(){return e.undo()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1"}))),r.a.createElement("a",{onClick:function(){return e.trash()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),r.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),r.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),r.a.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),r.a.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})))),this.recordBtn(),this.progress()),r.a.createElement(c.g,{id:"board",className:"flex-center",style:{alignItems:"normal",height:this.state.uploadedHeigth}},r.a.createElement("div",{style:{position:"absolute"}}),r.a.createElement(F.e,{width:this.state.width+2,height:this.state.width*this.state.ratio+2,onMouseDown:this.handleMouseDown,onMousemove:this.handleMouseMove,onMouseup:this.handleMouseUp,ref:this.stage},r.a.createElement(F.c,{ref:this.layer},this.loadImage(),this.pointers(),this.state.lines.map((function(e,t){return r.a.createElement(F.d,{key:t,points:e.points,stroke:e.color,strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"})}))))),r.a.createElement(c.h,{className:"board-footer"},this.arrows())),r.a.createElement("div",{id:"vid"}))}}]),t}(a.Component),K=n(73),Z=n.n(K),Y=n(104),Q=n.n(Y),X=n(169),ee=n.n(X),te=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).textChangeHandler=n.textChangeHandler.bind(Object(p.a)(n)),n.selectionChangeHandler=n.selectionChangeHandler.bind(Object(p.a)(n)),n.debounce=n.debounce.bind(Object(p.a)(n)),n.throttle=n.throttle.bind(Object(p.a)(n)),n.setContent=n.setContent.bind(Object(p.a)(n)),n.setCursor=n.setCursor.bind(Object(p.a)(n)),n.typingNow=n.typingNow.bind(Object(p.a)(n)),n.showTyping=n.showTyping.bind(Object(p.a)(n)),n.constructCursor=n.constructCursor.bind(Object(p.a)(n)),n.state={textLatency:500,cursorLatency:1e3,lastTime:Date.now(),curserName:null,curserColor:n.props.userColor,cursor:null,delta:null,quill:null,range:null,clients:[{id:"self",color:Z()()}],cursors:[],isTypying:null},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this;(e.quillDelta!==this.props.quillDelta&&this.setState({delta:this.props.quillDelta},(function(){n.setContent(n.state.quill,t.props.quillDelta)})),e.typing!==this.props.typing&&n.typingNow(n.props.typing),e.contentSync!==this.props.contentSync&&n.state.quill.setContents(this.props.contentSync),this.props.newComerLength&&this.props.newComerLength<n.state.quill.getLength()&&(console.log(this.props.newComerLength,n.state.quill.getLength()),setTimeout((function(){return n.throttle(n.state.quill.getContents(),"contentSync")}),3e3),this.props.newComerReset()),e.name!==this.props.name&&n.setState({curserName:this.props.name},(function(){n.constructCursor(t.state.curserName,t.state.curserColor),setTimeout((function(){return n.throttle(n.state.quill.getLength(),"newComer")}),3e3)})),e.client,this.props.client,e.cursorRange!==this.props.cursorRange)&&(console.log(this.props.cursorRange),console.log(this.state.cursor),n.state.cursor._cursors&&(this.state.cursor._cursors[this.props.cursorRange.name]?n.setCursor(this.props.cursorRange.name,this.props.cursorRange.range):n.constructCursor(this.props.cursorRange.name,this.props.cursorRange.color)));e.newCursor!==this.props.newCursor&&(0==n.state.clients.filter((function(e){return e.name===t.props.newCursor.name})).length&&n.constructCursor(this.props.newCursor.name,this.props.newCursor.color))}},{key:"constructCursor",value:function(e,t){var n=this.state.quill.getModule("cursors");n.createCursor(e,e,t),this.state.quill.on("selection-change",this.selectionChangeHandler(n)),this.setState({cursor:n})}},{key:"componentDidMount",value:function(){Q.a.register("modules/cursors",ee.a);var e=new Q.a("#editor-one",{theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],[{header:[1,2,!1]}]],cursors:{transformOnTextChange:!0}}});e.format("direction","rtl"),e.format("align","right"),this.setState({quill:e});var t=e.getModule("cursors");this.setState({cursor:t}),e.on("text-change",this.textChangeHandler(e))}},{key:"setContent",value:function(e,t){e.updateContents(t)}},{key:"setCursor",value:function(e,t){this.state.cursor.moveCursor(e,t)}},{key:"typingNow",value:function(e){var t=this;console.log(e.name+" is Typing"),console.log(this.state.quill.getLength()),this.setState({isTypying:e.name}),setTimeout((function(){return t.setState({isTypying:null})}),2e3)}},{key:"showTyping",value:function(){if(this.state.isTypying)return r.a.createElement("span",null,this.state.isTypying," "," "+$.is_typing)}},{key:"textChangeHandler",value:function(e){var t=this;return function(e,n,a){"user"===a&&(t.props.wsSend({type:"quill",c:e}),t.throttle({name:t.state.curserName,rnd:Math.random().toString(36).substring(4)},"typing"))}}},{key:"debounce",value:function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];var i=this,s=function(){n=null,e.apply(i,r)};clearTimeout(n),n=setTimeout(s,t)}}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"selectionChangeHandler",value:function(e){var t=this,n=t.debounce(a,500);return function(e,t,r){"user"===r?a(e):n(e)};function a(e){t.props.wsSend({type:"cursor",c:{range:e,name:t.state.curserName,color:t.state.curserColor}})}}},{key:"render",value:function(){return r.a.createElement(c.f,null,r.a.createElement(c.i,null),r.a.createElement(c.g,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{clclassNameass:"editor"},r.a.createElement("br",null),r.a.createElement("div",{id:"editor-one"})))),r.a.createElement(c.h,{className:"editor-footer"},this.showTyping()))}}]),t}(a.Component),ne=n(32),ae=n(47),re=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).start=n.start.bind(Object(p.a)(n)),n.videos=n.videos.bind(Object(p.a)(n)),n.unPublish=n.unPublish.bind(Object(p.a)(n)),n.publishBtn=n.publishBtn.bind(Object(p.a)(n)),n.state={signal:null,config:null,clientLocal:null,streams:[],media:null},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){}},{key:"componentDidMount",value:function(){var e=this,t=new ae.IonSFUJSONRPCSignal(S.ionSignalServer);this.setState({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},signal:t},(function(){var t=new ne.Client(e.state.signal,e.state.config);e.setState({clientLocal:t},(function(){e.state.signal.onopen=function(){return e.state.clientLocal.join("test session")},e.state.clientLocal.ontrack=function(t,n){console.log("got track",t.id,"for stream",n.id),"video"===t.kind&&(t.onunmute=function(){e.setState({streams:e.state.streams.concat(n)}),n.onremovetrack=function(){console.log("Stream owner left"),e.setState({streams:e.state.streams.filter((function(e){return e.id!==n.id}))}),e.$$("#remotes").remove(),e.$$("#screen").append("<div id='remotes'></div>")}})}}))}))}},{key:"start",value:function(){var e=this,t=this;ne.LocalStream.getDisplayMedia({resolution:"vga",audio:!1}).then((function(n){console.log(n),e.setState({media:n});var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width=e.$$("#screen").width()-20,e.state.clientLocal.publish(n),e.$$("#remotes").append(a),n.getVideoTracks()[0].onended=function(){t.unPublish()}})).catch(console.error)}},{key:"videos",value:function(){var e=this;if(this.state.streams)return this.state.streams.map((function(t){if(0==e.$$("#"+t.id).length){var n=document.createElement("video");n.srcObject=t,n.autoplay=!0,n.muted=!0,n.width=e.$$("#screen").width()-20,e.$$("#remotes").append(n)}})),[]}},{key:"unPublish",value:function(){this.state.media.unpublish(),this.state.media.getTracks().forEach((function(e){return e.stop()})),this.$$("#remotes").remove(this.state.media.id),this.$$("#screen").append("<div id='remotes'></div>"),this.setState({media:null})}},{key:"publishBtn",value:function(){var e=this;return this.state.media?r.a.createElement(c.e,{onClick:function(){return e.unPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 8l4 -4m-4 0l4 4"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"90px"}},$.unshare)):r.a.createElement(c.e,{fill:!0,onClick:function(){return e.start()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"70px"}},$.share))}},{key:"render",value:function(){return r.a.createElement(c.f,null,r.a.createElement(c.i,null,this.publishBtn()),r.a.createElement(c.g,{id:"screen"},this.videos(),r.a.createElement("div",{id:"remotes"})))}}]),t}(a.Component),oe=(n(152),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).start=n.start.bind(Object(p.a)(n)),n.videos=n.videos.bind(Object(p.a)(n)),n.unPublish=n.unPublish.bind(Object(p.a)(n)),n.publishBtn=n.publishBtn.bind(Object(p.a)(n)),n.display=n.display.bind(Object(p.a)(n)),n.state={signal:null,config:null,clientLocal:null,streams:[],media:null,display:Math.floor(4*Math.random())+1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){}},{key:"componentDidMount",value:function(){var e=this,t=new ae.IonSFUJSONRPCSignal(S.ionSignalServer);this.setState({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},signal:t},(function(){var t=new ne.Client(e.state.signal,e.state.config);e.setState({clientLocal:t},(function(){e.state.signal.onopen=function(){return e.state.clientLocal.join("room"+e.state.display)},e.state.clientLocal.ontrack=function(t,n){console.log("got track",t.id,"for stream",n.id),"video"===t.kind&&(t.onunmute=function(){0==e.state.streams.filter((function(e){return e.id===n.id})).length&&e.setState({streams:e.state.streams.concat(n)},(function(){console.log("Streams are ...",e.state.streams)})),n.onremovetrack=function(){console.log("Stream owner left"),e.setState({streams:e.state.streams.filter((function(e){return e.id!==n.id}))}),e.$$("#remoteVideos").remove(),e.$$("#videos").append("<div id='remoteVideos'></div>")}})}}))}))}},{key:"start",value:function(){var e=this,t=this;ne.LocalStream.getUserMedia({resolution:"vga",video:!0,audio:!1}).then((function(n){e.setState({media:n});var a=document.createElement("video");a.srcObject=n,a.autoplay=!0,a.muted=!0,a.width="320",e.state.clientLocal.publish(n),e.$$("#remoteVideos").append(a),n.getVideoTracks()[0].onended=function(){t.unPublish()}})).catch(console.error)}},{key:"videos",value:function(){var e=this;if(this.state.streams)return this.state.streams.map((function(t){if(console.log("Attaching to stream ...",t),0==e.$$("#"+t.id).length){var n=document.createElement("video");n.srcObject=t,n.autoplay=!0,n.muted=!0,n.width="320",n.id=t.id,e.$$("#remoteVideos").append(n)}})),[]}},{key:"unPublish",value:function(){this.state.media.unpublish(),this.state.media.getTracks().forEach((function(e){return e.stop()})),this.$$("#remoteVideos").remove(this.state.media.id),this.$$("#videos").append("<div id='remoteVideos'></div>"),this.setState({media:null})}},{key:"publishBtn",value:function(){var e=this;return this.state.media?r.a.createElement(c.e,{onClick:function(){return e.unPublish()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M15 11v-1l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -.675 .946"}),r.a.createElement("path",{d:"M10 6h3a2 2 0 0 1 2 2v3m0 4v1a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h1"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"93px"}},$.end_camera)):r.a.createElement(c.e,{fill:!0,onClick:function(){return e.start()}},r.a.createElement("div",{style:{float:"right",paddingTop:"5px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"}),r.a.createElement("line",{x1:"7",y1:"12",x2:"11",y2:"12"}),r.a.createElement("line",{x1:"9",y1:"10",x2:"9",y2:"14"}))),r.a.createElement("div",{style:{marginTop:"0px",width:"90px"}},$.start_camera))}},{key:"display",value:function(e){var t=this;console.log(e.target.value),this.setState({display:e.target.value},(function(){console.log("Display:"+t.state.display)}))}},{key:"render",value:function(){return r.a.createElement(c.f,null,r.a.createElement(c.i,null,this.publishBtn(),this.state.display),r.a.createElement(c.g,{id:"videos"},this.videos(),r.a.createElement("div",{id:"remoteVideos"})))}}]),t}(a.Component)),ie=n(46),se=n.n(ie),ce=n(170),le=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getVideos=n.getVideos.bind(Object(p.a)(n)),n.videos=n.videos.bind(Object(p.a)(n)),n.state={videos:[]},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){}},{key:"componentDidMount",value:function(){this.getVideos()}},{key:"getVideos",value:function(){var e=Object(ce.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({videos:[]}),e.next=3,window.db.videos.toArray();case 3:t=e.sent,console.log("Saved videos....",t),this.setState({videos:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"videos",value:function(){var e=this,t=this;this.state.videos&&this.state.videos.map((function(n){if(0!==n.blob.size&&0==e.$$("#saved-"+n.id).length){var a=URL.createObjectURL(n.blob),r=document.createElement("video");r.width=320,r.src=a,r.type="video/webm",r.id="saved-"+n.id,r.controls=!0,console.log(r),t.$$("#saved-videos").append(r)}}))}},{key:"render",value:function(){return r.a.createElement(c.f,null,r.a.createElement(c.i,null),r.a.createElement(c.g,{id:"saved-videos"},this.videos()))}}]),t}(a.Component),de=function(e){function t(t){var n=!1;return e.currentTab==t&&(n=!0),e.currentTab||"tab-1"!=t||(n=!0),n}return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.home},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.C,{tabbar:!0,top:!0},r.a.createElement(c.n,{tabLink:"#tab-1",tabLinkActive:t("tab-1"),onClick:function(){return e.wsSend({type:"tab",current:"tab-1"})}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))),r.a.createElement(c.n,{tabLink:"#tab-2",tabLinkActive:t("tab-2"),onClick:function(){return e.wsSend({type:"tab",current:"tab-2"})}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),r.a.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),r.a.createElement("line",{x1:"9",y1:"9",x2:"10",y2:"9"}),r.a.createElement("line",{x1:"9",y1:"13",x2:"15",y2:"13"}),r.a.createElement("line",{x1:"9",y1:"17",x2:"15",y2:"17"}))),r.a.createElement(c.n,{tabLink:"#tab-3",tabLinkActive:t("tab-3"),onClick:function(){return e.wsSend({type:"tab",current:"tab-3"})}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))),r.a.createElement(c.n,{tabLink:"#tab-4",tabLinkActive:t("tab-4"),onClick:function(){return e.wsSend({type:"tab",current:"tab-4"})}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"}))),r.a.createElement(c.n,{tabLink:"#tab-5",tabLinkActive:t("tab-5"),onClick:function(){return e.wsSend({type:"tab",current:"tab-5"})}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),r.a.createElement("circle",{cx:"12",cy:"14",r:"2"}),r.a.createElement("polyline",{points:"14 4 14 8 8 8 8 4"})))),r.a.createElement(c.B,null,r.a.createElement(c.A,{id:"tab-1",tabActive:t("tab-1")},r.a.createElement(G,{wsSend:e.wsSend,line:e.line,currentPoint:e.currentPoint,uploader:e.uploader,progress:e.progress,progressShow:e.progressShow,upload:e.upload,recentUpload:e.recentUpload,page:e.page,undoVector:e.undoVector,revertUndo:e.revertUndo,revertTrash:e.revertTrash,trash:e.trash,userColor:e.userColor,participants:e.participants,userUUID:e.userUUID,uploadedRecently:e.uploadedRecently,uploadedRecentlyReset:e.uploadedRecentlyReset,remoteStream:e.remoteStream,localStream:e.localStream})),r.a.createElement(c.A,{id:"tab-2",tabActive:t("tab-2")},r.a.createElement(te,{wsSend:e.wsSend,quillDelta:e.quillDelta,cursorRange:e.cursorRange,client:e.client,typing:e.typing,name:e.name,newCursor:e.newCursor,newComerLength:e.newComerLength,contentSync:e.contentSync,newComerReset:e.newComerReset,userColor:e.userColor})),r.a.createElement(c.A,{id:"tab-3",tabActive:t("tab-3")},r.a.createElement(re,null)),r.a.createElement(c.A,{id:"tab-4",tabActive:t("tab-4")},r.a.createElement(oe,null)),r.a.createElement(c.A,{id:"tab-5",tabActive:t("tab-5")},r.a.createElement(le,null))),r.a.createElement("div",{id:"mixedaudio"}))},ue=function(e){return r.a.createElement(c.u,null,r.a.createElement("div",{className:"icon-bar "},r.a.createElement("div",{className:"icon-circle"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M7 7h10v6a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3v-6"}),r.a.createElement("line",{x1:"9",y1:"3",x2:"9",y2:"7"}),r.a.createElement("line",{x1:"15",y1:"3",x2:"15",y2:"7"}),r.a.createElement("path",{d:"M12 16v2a2 2 0 0 0 2 2h3"}))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement(c.e,{panelOpen:"left",className:"fc-white mr--5"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1"}),r.a.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"}),r.a.createElement("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"}),r.a.createElement("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"})))),r.a.createElement("div",{className:"icon-circle"},r.a.createElement("a",{onClick:function(){return e.logout()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M5.64 5.632a9 9 0 1 0 6.36 -2.632v7.714"}))))),r.a.createElement(c.o,{className:"fs-13 z-1 mb-80"}),r.a.createElement(c.o,{className:"fs-13 z-1"},function(){if(e.participants){var t=[];e.participants.map((function(n){n.display&&t.push(r.a.createElement(c.q,null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:n.userColor,"stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("circle",{cx:"12",cy:"7",r:"4"}),r.a.createElement("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})),r.a.createElement("span",null,n.display),function(t){if(t.uuid===e.userUUID)return e.muted?r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.a.createElement("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2.002 -2a6.967 6.967 0 0 0 1.152 -3.85"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"})))):r.a.createElement("div",{className:"right-icon"},r.a.createElement("a",{onClick:function(){return e.toggleMicrophone()},style:{color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("rect",{x:"9",y:"2",width:"6",height:"11",rx:"3"}),r.a.createElement("path",{d:"M5 10a7 7 0 0 0 14 0"}),r.a.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"}))))}(n)))}))}return t}()))},me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).throttle=n.throttle.bind(Object(p.a)(n)),n.send=n.send.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.chatItems=n.chatItems.bind(Object(p.a)(n)),n.state={lastTime:Date.now(),content:null},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){e.chats!==this.props.chats&&console.log(this.props.chats)}},{key:"componentDidMount",value:function(){}},{key:"throttle",value:function(e,t){var n=this;Date.now()-this.state.lastTime>100&&this.setState({lastTime:Date.now()},(function(){n.props.wsSend({type:t,c:e})}))}},{key:"send",value:function(){this.state.content&&this.throttle(this.state.content,"chat")}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"chatItems",value:function(){var e=[];return this.props.chats.map((function(t){e.push(r.a.createElement(c.q,{title:"Facebook",after:"17:14",text:t}))})),e}},{key:"render",value:function(){var e=this;return r.a.createElement(c.u,null,r.a.createElement(c.o,{noHairlinesMd:!0},r.a.createElement(c.p,{label:$.chat,type:"textarea",placeholder:$.write_here,onChange:function(t){e.handleChange({content:t.target.value})}})),r.a.createElement(c.x,null,r.a.createElement(c.k,null),r.a.createElement(c.k,null),r.a.createElement(c.k,null,r.a.createElement(c.e,{fill:!0,onClick:function(){return e.send()}},$.send))),r.a.createElement(c.o,{mediaList:!0},this.chatItems()))}}]),t}(a.Component),pe=function(e){function t(t){if(e.signingUp){if("name"==t)return r.a.createElement(c.p,{label:$.name,className:"fs-14",type:"text",placeholder:"Your username",value:e.name,onInput:function(t){e.handleChangeValue({name:t.target.value})}});if("passwordConfirmation"==t)return r.a.createElement(c.p,{label:$.password_confirmation,type:"text",className:"fs-14",placeholder:"Password Confirmation",value:e.passwordConfirmation,onInput:function(t){e.handleChangeValue({passwordConfirmation:t.target.value})}})}}return r.a.createElement(c.u,{loginScreen:!0},r.a.createElement(c.s,null," "),r.a.createElement(c.o,{form:!0},r.a.createElement(c.p,{label:$.email,className:"fs-14",type:"text",placeholder:"Your email",value:e.email,onInput:function(t){e.handleChangeValue({email:t.target.value})}}),t("name"),r.a.createElement(c.p,{label:$.password,type:"text",className:"fs-14",placeholder:"Password",value:e.password,onInput:function(t){e.handleChangeValue({password:t.target.value})}}),t("passwordConfirmation")),r.a.createElement(c.o,null,e.signingUp?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.sign_up),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.loginActive},$.you_can_login))):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{fill:!0,onClick:e.login},$.login),r.a.createElement(c.c,null,r.a.createElement("a",{onClick:e.signUp},$.you_can_sign_up)))))},he=(n(363),function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.home},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.C,{tabbar:!0,top:!0},r.a.createElement(c.n,{tabLink:"#tab-1",tabLinkActive:!0},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),r.a.createElement("path",{d:"M16 7h4"}),r.a.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))),r.a.createElement(c.n,{tabLink:"#tab-2"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"}),r.a.createElement("line",{x1:"7",y1:"20",x2:"17",y2:"20"}),r.a.createElement("line",{x1:"9",y1:"16",x2:"9",y2:"20"}),r.a.createElement("line",{x1:"15",y1:"16",x2:"15",y2:"20"}),r.a.createElement("path",{d:"M17 4h4v4"}),r.a.createElement("path",{d:"M16 9l5 -5"}))),r.a.createElement(c.n,{tabLink:"#tab-3"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),r.a.createElement("rect",{x:"3",y:"6",width:"12",height:"12",rx:"2"})))),r.a.createElement(c.x,null))});var ge=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),bbMeetingHistogram:null,meetingHistogram:null,hourMeetingHistogram:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_multiple_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_multiple_list",this.getList)}},{key:"componentDidMount",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&");k.a.get(j+"/"+e+"?page="+t+"&"+r,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){console.log(e),v.dispatch({type:"MULTIPLE_LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}("/home",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=w.getMutipleList(),t=w.getKlass();e&&"Home"===t&&this.setState({meetingHistogram:e.meeting_histogram,hourMeetingHistogram:e.hour_meeting_histogram,bbMeetingHistogram:e.bb_meeting_histogram})}},{key:"render",value:function(){var e=this.state,t=e.meetingHistogram,n=e.bbMeetingHistogram,a=e.hourMeetingHistogram;return r.a.createElement(he,{bbMeetingHistogram:n,meetingHistogram:t,hourMeetingHistogram:a})}}]),t}(a.Component),fe=(n(367),function(e){return e.profile?(console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.o,{className:"fs-12"},r.a.createElement(c.q,{key:"profile-show"+e.profile.id,title:e.profile.fullname,after:""},r.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))),r.a.createElement(c.f,null),r.a.createElement(c.f,null))):null}),ve=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getInstance=e.getInstance.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),profile:null,id:null,actuals:null,metas:null,channels:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({profile:e,id:e.id})}},{key:"fab",value:function(){if(this.state.profile)return r.a.createElement(c.l,{href:"/profiles/"+this.state.profile.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},r.a.createElement(c.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),r.a.createElement(c.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state.profile;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profiles,backLink:$.back}),this.fab(),r.a.createElement(fe,{profile:e}))}}]),t}(a.Component),be=n(31),we=n.n(be),ye=(n(155),n(156),n(157),function(e){return e.profiles?r.a.createElement(c.o,{mediaList:!0},e.profiles.map((function(e){return r.a.createElement(c.q,{key:we.a.lib.WordArray.random(32),link:"/profiles/"+e.id,title:e.fullname,after:"",subtitle:"",text:""},r.a.createElement("img",{slot:"media",src:e.avatar,width:"40",height:"40"}))}))):r.a.createElement("ul",null)}),ke=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profiles,backLink:$.back},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"})),r.a.createElement(c.z,{inner:!1},r.a.createElement(c.y,{disableButtonText:$.cancel,placeholder:$.search,onChange:function(t){e.search({query:t.target.value})}}))),r.a.createElement(c.d,null),r.a.createElement(c.l,{href:"/profiles/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},r.a.createElement(c.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),r.a.createElement(c.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),r.a.createElement(ye,{profiles:e.profiles}))},Se=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getList=e.getList.bind(Object(p.a)(e)),e.search=e.search.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),profiles:null,query:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){E("profiles",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState(e,(function(){E("profiles/search",t.state.page,{q:t.state.query},t.state.token)}))}},{key:"getList",value:function(){var e=w.getList(),t=w.getKlass();e&&"Profile"===t&&this.setState({profiles:e})}},{key:"render",value:function(){var e=this.state.profiles;return r.a.createElement(ke,{profiles:e,search:this.search})}}]),t}(r.a.Component),je=n(172),Ee=n.n(je),Oe=function(e){return e.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.profile_info),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.firstname,type:"text",placeholder:"...",defaultValue:e.name,onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.p,{label:$.surename,type:"text",placeholder:"...",defaultValue:e.surename,onInput:function(t){e.handleChange({surename:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,null),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.submit))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,r.a.createElement("img",{src:e.avatar,width:"40",height:"40"})),r.a.createElement(Ee.a,{withIcon:!0,buttonText:$.choose_image,onChange:e.onDrop,buttonClassName:"upload-btn",imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880}))):null},Ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.handleChangeValueFields=e.handleChangeValueFields.bind(Object(p.a)(e)),e.removeActual=e.removeActual.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.submitFields=e.submitFields.bind(Object(p.a)(e)),e.onDrop=e.onDrop.bind(Object(p.a)(e)),e.getList=e.getList.bind(Object(p.a)(e)),e.getList=e.getList.bind(Object(p.a)(e)),e.state={profile:{},metas:null,token:window.localStorage.getItem("token"),fields:[],name:"dd",surename:"",pictures:[],avatar:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.getInstance),w.on("deleted_instance",this.getInstance),w.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.getInstance),w.removeListener("deleted_instance",this.getInstance),w.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){E("metas",this.state.page)}},{key:"onDrop",value:function(e){console.log(e[0]),O("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){x("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"submitFields",value:function(){_("actuals",{meta_id:this.state.metaId,content:this.state.fields},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"handleChangeValueFields",value:function(e,t,n){var a=this.state.fields;if(a.length>0)for(var r=0;r<a.length;r++)if(a[r].fid&&a[r].fid===e){var o=Object.assign({},this.state);o.fields[r]={fid:e,value:t,metaId:n},this.setState(o)}else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})});else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:n})})}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({metas:e.metas,profile:e})}},{key:"removeActual",value:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");k.a.get(j+"/"+e+"/delete?"+a,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){v.dispatch({type:"DELETE_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}("actuals",{uuid:e})}},{key:"getList",value:function(){var e=w.getList(),t=w.getKlass();e&&"Meta"===t&&this.setState({metas:e})}},{key:"render",value:function(){var e=this.state,t=(e.profile,e.metas),n=e.name,a=e.avatar,o=e.surename;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(Oe,{name:n,avatar:a,surename:o,metas:t,onDrop:this.onDrop,removeActual:this.removeActual,submitFields:this.submitFields,submit:this.submit,editing:!0,handleChangeValueFields:this.handleChangeValueFields,handleChange:this.handleChangeValue}))}}]),t}(a.Component),_e=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.onDrop=e.onDrop.bind(Object(p.a)(e)),e.state={name:null,surename:null,token:window.localStorage.getItem("token"),profile:null,id:null,pictures:[],avatar:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.setInstance),w.on("file_posted",this.getInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.setInstance),w.removeListener("file_posted",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.$f7route.params.profileId&&C("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"onDrop",value:function(e){console.log(e[0]),O("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){x("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Profile"===t&&this.setState({id:e.id,profile:e,name:e.name,surename:e.surename,avatar:e.avatar})}},{key:"render",value:function(){var e=this.state,t=e.profile,n=e.name,a=e.surename,o=e.avatar;return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.profile_form,backLink:$.back}),r.a.createElement(c.d,null,$.profile_form),r.a.createElement(Oe,{profile:t,name:n,avatar:o,surename:a,onDrop:this.onDrop,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(a.Component);function xe(){var e=this;U.init({debug:"all",callback:function(){var t=new U({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),U.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){U.error("  -- Error attaching plugin...",e)},consentDialog:function(e){U.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){U.log("ICE state changed to "+e)},mediaState:function(e,t){U.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){U.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){U.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(U.debug("Event: "+a),a)if("joined"===a){if(t.id&&(e.setState({myid:t.id}),U.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){U.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!1},jsep:t})},error:function(e){U.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){var i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;e.addParticipant(r[o].id,r[o].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),U.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID),U.debug("  >> ["+i+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)U.warn("The room has been destroyed!");else if("event"===a){if(t.participants){r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;U.debug("  >> ["+i+"] "+s+" (setup="+c+", muted="+l+")"),e.addParticipant(r[o].id,r[o].display)}}else if(t.error)return void t.error_code;if(t.leaving){var d=t.leaving;U.log("Participant left: "+d+" elements with ID #rp"+d+")")}}n&&(U.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(e){U.debug(" ::: Got a local stream :::",e)},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),U.attachMediaStream(document.getElementById("roomaudio"),t))},oncleanup:function(){U.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function Te(){var e={request:"join",room:1234,display:this.state.fullname+" \xa7"+this.state.userUUID};this.state.mixertest.send({message:e})}function Ie(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],role:"listener"})}),console.log("participant added:",n[1])}function De(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}var Me=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).sessionCreate=xe.bind(Object(p.a)(e)),e.registerUsername=Te.bind(Object(p.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.addParticipant=Ie.bind(Object(p.a)(e)),e.exisitingParticipant=De.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+U.randomString(12),roomId:1234,webrtcUp:null,myusername:null,mixertest:null,myid:null,mystream:null,pin:null,userUUID:null,fullname:null,isOwner:!1,muted:!0,participants:[],room:null,notification:{},chats:[],panelOpen:!1},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("got_instance",this.getInstance),w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("got_instance",this.getInstance),w.removeListener("set_instance",this.setInstance),window.removeEventListener("beforeunload",this.unPublishData)}},{key:"componentDidMount",value:function(){C("rooms",this.$f7route.params.roomId,this.state.token),window.addEventListener("beforeunload",this.unPublishData),window.innerWidth>960&&(this.setState({panelOpen:!0}),console.log(">960"));var e=this.$f7;console.log("props",e.panel.get("#panel-r"))}},{key:"submitParticipation",value:function(e){_("participations",{room_id:this.state.id,activity:e},this.state.token)}},{key:"getInstance",value:function(){var e=this,t=w.getIntance(),n=w.getKlass();t&&"Room"===n&&this.setState({room:t,id:t.id,roomId:t.room_id,pin:t.pin,fullname:t.user_fullname,title:t.title,isOwner:t.is_owner},(function(){return e.submitParticipation("joined")})),console.log(t)}},{key:"pageAfterIn",value:function(){this.sessionCreate()}},{key:"setInstance",value:function(){var e=this,t=w.getIntance(),n=w.getKlass();t&&"Participation"===n&&this.setState({userUUID:t.uuid},(function(){return e.pageAfterIn()})),console.log(t)}},{key:"render",value:function(){var e=this.state,t=(e.token,e.shortners,e.urls,e.publishedMicrophone,e.publishedCamera,e.publishedDesktop,e.feeds,e.muted,e.lowFeeds,e.requests,e.participants),n=(e.room,e.notification,e.chats,e.isOwner,e.roomId,e.panelOpen);return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{participants:t,panelOpen:n}))}}]),t}(r.a.Component),Ae=n(173),Re=n.n(Ae),Pe=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.sign_up},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,{className:"mh-auto"},r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.e,{fill:!0,className:"fs-11 external f-color-black bg-teal",href:"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Ftavan.ut.ac.ir%2Fusers%2Fservice",animate:!1,ignoreCache:!0},$.cas," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},Le=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={token:window.localStorage.getItem("token"),email:"",password:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.$f7route.params.token&&_("users/validate_token",{},this.$f7route.params.token),this.state.token&&this.state.token.length>10&&_("users/validate_token",{},this.state.token)}},{key:"submit",value:function(){_("users/login",{email:this.state.email,password:this.state.password})}},{key:"setInstance",value:function(){var e=w.getKlass();"Login"===e&&this.$f7router.navigate("/verification/"+this.state.email),"Validate"===e&&(this.$f7router.navigate("/"),window.location.reload()),console.log(e)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Pe,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ve=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={email:"",password:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){_("users/validate_token",{},this.$f7route.params.token)}},{key:"setInstance",value:function(){var e=w.getIntance();"Validate"===w.getKlass()?(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload()):(this.$f7router.navigate("/login_error/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Pe,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),Ue=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.sign_up},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.sign_up),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.firstname+" *",placeholder:$.enter_your_name,type:"text",name:we.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({name:t.target.value})}}),r.a.createElement(c.p,{label:$.surename+" *",placeholder:$.enter_your_surename,type:"text",name:we.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({surename:t.target.value})}}),r.a.createElement(c.p,{label:" * "+$.email,type:"email",validate:!0,placeholder:$.enter_your_email,className:"ltr",value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/login/"},$.if_registered,"\xa0",$.you_can_login," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.sign_up))))},Ne=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={email:"",name:"",surename:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={email:this.state.email,name:this.state.name,surename:this.state.surename};if(this.state.email&&this.state.email.length>0&&this.state.name&&this.state.name.length>0&&this.state.surename&&this.state.surename.length>0)_("users/sign_up",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"setInstance",value:function(){"SignUp"===w.getKlass()&&(this.$$(".btn").show(),this.$f7router.navigate("/verification/"+this.state.email))}},{key:"handleChangeValue",value:function(e){this.setState(e),console.log(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return r.a.createElement(Ue,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(r.a.Component),$e=function(e){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:$.verification},r.a.createElement(c.n,{panelOpen:"right"},r.a.createElement(c.m,{f7:"bars"}))),r.a.createElement(c.f,null,r.a.createElement(c.i,null,$.login),r.a.createElement(c.g,null,r.a.createElement(c.o,null,r.a.createElement(c.p,{label:$.email,type:"text",autofocus:!0,placeholder:$.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}),r.a.createElement(c.p,{label:$.verification_code,type:"text",placeholder:$.enter_verification_code,onInput:function(t){e.handleChange({verificationCode:t.target.value})}}))),r.a.createElement(c.h,null,r.a.createElement(c.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},$.you_can_sign_up," "),r.a.createElement(c.n,{className:"btn-notice"}),r.a.createElement(c.e,{className:"col btn",fill:!0,onClick:e.submit},$.login))))},Be=[{path:"/",component:ge},{path:"/login/",component:Le},{path:"/sign_up/",component:Ne},{path:"/verification/:email",component:function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).submit=e.submit.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.state={verificationCode:"",email:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){w.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.setState({email:this.$f7route.params.email})}},{key:"submit",value:function(){_("users/verify",{verification_code:this.state.verificationCode})}},{key:"setInstance",value:function(){var e=w.getIntance(),t=w.getKlass();e&&"Verify"==t&&(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state,t=(e.username,e.email);return r.a.createElement($e,{submit:this.submit,email:t,handleChange:this.handleChangeValue})}}]),t}(r.a.Component)},{path:"/login_jwt/:token",component:Ve},{path:"/profiles/",component:Se},{path:"/profiles/:profileId/edit",component:_e},{path:"/profiles/new",component:Ce},{path:"/profiles/:profileId",component:ve},{path:"/rooms/",component:Re.a},{path:"/rooms/:roomId",component:Me},{path:"(.*)",component:function(){return r.a.createElement(c.u,null,r.a.createElement(c.t,{title:"Not found",backLink:"Back"}),r.a.createElement(c.b,{strong:!0},r.a.createElement("p",null,"Sorry"),r.a.createElement("p",null,"Requested content not found.")))}}];function Fe(){var e=this;U.init({debug:"all",callback:function(){var t=new U({server:e.state.server,success:function(){t.attach({plugin:"janus.plugin.audiobridge",opaqueId:e.state.opaqueId,success:function(t){e.setState({mixertest:t}),U.log("Plugin attached! ("+e.state.mixertest.getPlugin()+", id="+e.state.mixertest.getId()+")"),e.registerUsername()},error:function(e){U.error("  -- Error attaching plugin...",e)},consentDialog:function(e){U.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){U.log("ICE state changed to "+e)},mediaState:function(e,t){U.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){U.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){U.debug(" ::: Got a message :::",t);var a=t.audiobridge;if(U.debug("Event: "+a),a)if("joined"===a){if(t.id&&(e.setState({myid:t.id}),U.log("Successfully joined room "+t.room+" with ID "+e.state.myid),e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),e.state.webrtcUp||(e.setState({webrtcUp:!0}),e.state.mixertest.createOffer({media:{video:!1,audio:{echoCancellation:!0}},success:function(t){U.debug("Got SDP!",t);e.state.mixertest.send({message:{request:"configure",muted:!0},jsep:t})},error:function(e){U.error("WebRTC error:",e)}}))),t.participants){var r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){var i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;console.log("%%%%%%%%",r[o]),e.addParticipant(r[o].id,r[o].display)}}}else if("roomchanged"===a){if(e.setState({myid:t.id}),U.log("Moved to room "+t.room+", new ID: "+e.state.myid),t.participants){r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;e.addParticipant(t.id,e.state.fullname+"\xa7"+e.state.userUUID+"\xa7"+e.state.userColor),U.debug("  >> ["+i+"] "+s+" (setup="+c+", muted="+l+")")}}}else if("destroyed"===a)U.warn("The room has been destroyed!");else if("event"===a){if(t.participants){r=t.participants;for(var o in U.debug("Got a list of participants:",r),r){i=r[o].id,s=r[o].display,c=r[o].setup,l=r[o].muted;U.debug("  >> ["+i+"] "+s+" (setup="+c+", muted="+l+")"),console.log("%%%%%%%%",r[o]),e.addParticipant(r[o].id,r[o].display)}}else if(t.error)return void t.error_code;if(t.leaving){var d=t.leaving;e.removeParticipant(d),U.log("Participant left: "+d+" elements with ID #rp"+d+")")}}n&&(U.debug("Handling SDP as well...",n),e.state.mixertest.handleRemoteJsep({jsep:n}))},onlocalstream:function(t){U.debug(" ::: Got a local stream :::",t),console.log("Local stream ******",t),console.log("Local stream ******",t.getTracks()),e.setState({localStream:t})},onremotestream:function(t){0===e.$$("#roomaudio").length&&(e.$$("#mixedaudio").append('<audio class="rounded centered" id="roomaudio" width="100%" height="100%" autoplay/>'),U.attachMediaStream(document.getElementById("roomaudio"),t),e.setState({remoteStream:t}))},oncleanup:function(){U.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log(e)},destroyed:function(){window.location.reload()}})}})}function ze(){var e={request:"join",room:1234,display:this.state.fullname+" \xa7"+this.state.userUUID+"\xa7"+this.state.userColor};this.state.mixertest.send({message:e})}function We(e){this.setState({participants:this.state.participants.filter((function(t){return t.id!==e}))})}function qe(e,t){console.log("Adding Participants ...",e,t);var n=t.split("\xa7");this.exisitingParticipant(n[1])&&this.setState({participants:this.state.participants.concat({id:e,display:n[0],uuid:n[1],userColor:n[2],role:"listener"})}),console.log("participant added:",n[1])}function He(e){return 0===this.state.participants.filter((function(t){return t.uuid===e})).length}function Je(){this.state.mixertest.send({message:{request:"configure",muted:this.state.muted}})}function Ge(){this.state.mixertest.send({message:{request:"unpublish"}})}var Ke=new g.w3cwebsocket(S.socketServer),Ze=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).setParticipants=e.setParticipants.bind(Object(p.a)(e)),e.sessionCreate=Fe.bind(Object(p.a)(e)),e.registerUsername=ze.bind(Object(p.a)(e)),e.addParticipant=qe.bind(Object(p.a)(e)),e.exisitingParticipant=He.bind(Object(p.a)(e)),e.toggleMute=Je.bind(Object(p.a)(e)),e.getJsonFromUrl=e.getJsonFromUrl.bind(Object(p.a)(e)),e.wsSend=e.wsSend.bind(Object(p.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(p.a)(e)),e.login=e.login.bind(Object(p.a)(e)),e.setInstance=e.setInstance.bind(Object(p.a)(e)),e.newComerReset=e.newComerReset.bind(Object(p.a)(e)),e.toggleMicrophone=e.toggleMicrophone.bind(Object(p.a)(e)),e.uploader=e.uploader.bind(Object(p.a)(e)),e.getInstance=e.getInstance.bind(Object(p.a)(e)),e.recentUpload=e.recentUpload.bind(Object(p.a)(e)),e.revertUndo=e.revertUndo.bind(Object(p.a)(e)),e.revertTrash=e.revertTrash.bind(Object(p.a)(e)),e.exitAudioRoom=Ge.bind(Object(p.a)(e)),e.removeParticipant=We.bind(Object(p.a)(e)),e.uploadedRecentlyReset=e.uploadedRecentlyReset.bind(Object(p.a)(e)),e.extractAction=e.extractAction.bind(Object(p.a)(e)),e.logout=e.logout.bind(Object(p.a)(e)),e.signUp=e.signUp.bind(Object(p.a)(e)),e.state={participants:[],token:window.localStorage.getItem("token"),shortners:null,server:S.janusServer,janus:null,sfutest:null,opaqueId:"videoroomtest-"+U.randomString(12),roomId:1234,webrtcUp:null,myusername:null,mixertest:null,fullname:null,userUUID:null,line:null,currentTab:null,currentPoint:null,quillDelta:null,cursorRange:null,newCursor:null,client:null,clients:[],typing:null,loginScreenOpened:!0,username:"",pass:"",name:null,newComerLength:null,contentSync:null,wsConnected:!1,muted:!0,progressShow:!1,progress:null,upload:null,page:null,undoVector:null,trash:!1,userColor:Z()({luminosity:"dark",hue:"random",alpha:.6}),uploadedRecently:!1,remoteStream:null,localStream:null,chats:[],action:null,signingUp:!1,email:null,password:null,passwordConfirmation:null},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setParticipants",value:function(){}},{key:"toggleMicrophone",value:function(){var e=this;this.setState({muted:!this.state.muted},(function(){e.toggleMute()}))}},{key:"wsSend",value:function(e){this.state.wsConnected&&Ke.send(JSON.stringify(e))}},{key:"componentDidMount",value:function(){C("uploads/recent",1,this.state.token);this.$f7;console.log("this $$$$$$$",this.getJsonFromUrl(this.$f7.view[0].history[0])),this.extractAction(),this.state.token&&this.state.token.length>10&&(_("users/validate_token",{},this.state.token),this.setState({loginScreenOpened:!1}))}},{key:"extractAction",value:function(){var e=this.getJsonFromUrl(this.$f7.view[0].history[0]);e&&e.action?this.setState({action:e.action}):this.setState({action:"room"})}},{key:"componentWillUnmount",value:function(){w.removeListener("set_instance",this.setInstance),w.removeListener("got_instance",this.getInstance)}},{key:"newComerReset",value:function(){this.setState({newComerLength:null})}},{key:"uploadedRecentlyReset",value:function(){this.setState({uploadedRecently:!1})}},{key:"logout",value:function(){this.setState({token:null}),this.exitAudioRoom(),setTimeout((function(){window.localStorage.removeItem("token"),window.location.replace("/")}),1e3)}},{key:"uploader",value:function(e){var t=this,n=this;console.log(e),n.setState({progressShow:!0},(function(){return console.log(t.state.progressShow)}));var a={onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);console.log(t),n.setState({progress:t})},headers:{"Content-Type":"application/json",Authorization:"bearer "+n.state.token}},r=new FormData;r.append("upload[attached_document]",e),r.append("upload[room_id]",1),k.a.post(S.server+"/uploads",r,a).then((function(e){n.setState({progressShow:!1,uploadedRecently:!0}),C("uploads/recent",1,t.state.token)})).catch((function(e){return n.setState({progressShow:!1})}))}},{key:"recentUpload",value:function(){console.log("recentUpload Called ..."),this.setState({progressShow:!0}),C("uploads/recent",1,this.state.token)}},{key:"revertUndo",value:function(){this.setState({undo:null})}},{key:"revertTrash",value:function(){this.setState({trash:!1})}},{key:"componentWillMount",value:function(){var e=this;w.on("set_instance",this.setInstance),w.on("got_instance",this.getInstance);var t=this;Ke.onopen=function(){Ke.send(JSON.stringify({type:"room",id:e.state.roomId})),t.setState({wsConnected:!0})},Ke.onclose=function(){t.setState({wsConnected:!1})},Ke.onmessage=function(n){var a={};switch(n.data&&n.data.length>0&&(a=JSON.parse(n.data)),a.type){case"room":console.log("client",a.c),t.setState({client:a.c});break;case"chat":t.setState({chats:e.state.chats.concat(a.c)});break;case"page":t.setState({page:a.c});break;case"undo":t.setState({undoVector:a.c});break;case"trash":t.setState({trash:!0});break;case"newUpload":t.recentUpload();break;case"contentSync":t.setState({contentSync:a.c});break;case"newComer":console.log("newComer",a.c),t.setState({newComerLength:a.c});break;case"newCursor":t.setState({newCursor:a.c});break;case"typing":t.setState({typing:a.c});break;case"point":t.setState({currentPoint:a.c});break;case"quill":t.setState({quillDelta:a.c});break;case"cursor":t.setState({cursorRange:a.c});break;case"line":t.setState({line:a.c});break;case"tab":t.setState({currentTab:a.current})}}}},{key:"getJsonFromUrl",value:function(e){if(!e||!e.split("?")||!e.split("?")[1])return[];var t=e.split("?")[1],n={};return t.split("&").forEach((function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])})),n}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"login",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text($.submitting);var e={name:this.state.name,user:{email:this.state.email,password:this.state.password}};if(this.state.email&&this.state.email.length>0)this.state.signingUp?_("users/sign_up",e):_("users/login",e);else{this.$f7.dialog.alert($.incomplete_data,$.alert)}}},{key:"signUp",value:function(){this.setState({signingUp:!0})}},{key:"setInstance",value:function(){var e=this,t=w.getKlass(),n=w.getIntance();!n||"SignUp"!==t&&"Login"!==t||(window.localStorage.setItem("token",n.token),window.location.reload()),"Validate"===t&&(console.log("registering name ..."),this.setState({name:n.name,fullname:n.name,userUUID:n.uuid},(function(){e.sessionCreate()}))),console.log(n,t)}},{key:"getInstance",value:function(){var e=this,t=w.getIntance(),n=w.getKlass();t&&"Upload"===n&&this.setState({upload:t},(function(){t.converted?e.setState({progressShow:!1}):(console.log("Cheking for conversion ..."),setTimeout((function(){return e.recentUpload()}),1e4))})),console.log(t,n)}},{key:"currentPage",value:function(){}},{key:"render",value:function(){var e=this,t={id:"io.framework7.testapp",name:"Framework7",theme:"aurora",panel:{rightBreakpoint:960},view:{},routes:Be},n=this.state,a=n.line,o=n.currentTab,i=n.currentPoint,s=n.quillDelta,l=n.cursorRange,d=(n.clients,n.client),u=n.newCursor,m=n.typing,p=n.name,h=n.newComerLength,g=n.contentSync,f=n.muted,v=n.userUUID,b=n.progress,w=n.progressShow,y=n.upload,k=n.page,S=n.undoVector,j=n.trash,E=n.userColor,O=n.participants,C=n.uploadedRecently,_=n.remoteStream,x=n.localStream,T=n.chats,I=n.email,D=n.password,M=n.passwordConfirmation,A=n.signingUp;return r.a.createElement(c.a,{params:t},r.a.createElement(c.v,{resizable:!0,left:!0,cover:!0},r.a.createElement(c.D,null,r.a.createElement(me,{wsSend:this.wsSend,chats:T}))),r.a.createElement(c.v,{resizable:!0,right:!0,themeDark:!0},r.a.createElement(c.D,null,r.a.createElement(ue,{participants:O,handleChangeValue:this.handleChangeValue,muted:f,userUUID:v,toggleMicrophone:this.toggleMicrophone,userColor:E,logout:this.logout}))),r.a.createElement(c.D,{id:"main-view",url:"",pushState:!0,main:!0,className:"safe-areas"},r.a.createElement(de,{wsSend:this.wsSend,line:a,currentTab:o,currentPoint:i,quillDelta:s,cursorRange:l,client:d,typing:m,newCursor:u,name:p,newComerLength:h,contentSync:g,newComerReset:this.newComerReset,uploader:this.uploader,progress:b,progressShow:w,upload:y,recentUpload:this.recentUpload,page:k,undoVector:S,revertUndo:this.revertUndo,trash:j,revertTrash:this.revertTrash,userColor:E,participants:O,userUUID:v,uploadedRecently:C,uploadedRecentlyReset:this.uploadedRecentlyReset,remoteStream:_,localStream:x}),r.a.createElement(c.r,{className:"demo-login-screen",opened:this.state.loginScreenOpened,onLoginScreenClosed:function(){e.handleChangeValue({loginScreenOpened:!1})}},r.a.createElement(pe,{email:I,handleChangeValue:this.handleChangeValue,name:p,password:D,passwordConfirmation:M,login:this.login,signUp:this.signUp,signingUp:A}))))}}]),t}(r.a.Component);n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)})),s.a.use(c.E),i.a.render(r.a.createElement(Ze),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.027e314e.chunk.js.map